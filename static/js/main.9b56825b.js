/*! For license information please see main.9b56825b.js.LICENSE.txt */
(()=>{"use strict";var e={4(e,t,n){var r=n(853),s=n(43),a=n(950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(i(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case N:return"Suspense";case S:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return P(e(t))}catch(as){}}return null}var D=Array.isArray,R=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B,q,G=U(null),H=U(null),W=U(null),K=U(null);function J(e,t){switch(z(W,t),z(H,e),z(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(G),z(G,e)}function Q(){V(G),V(H),V(W)}function Y(e){null!==e.memoizedState&&z(K,e);var t=G.current,n=bd(t,e.type);t!==n&&(z(H,e),z(G,n))}function X(e){H.current===e&&(V(G),V(H)),K.current===e&&(V(K),dh._currentValue=O)}function $(e){if(void 0===B)try{throw Error()}catch(as){var t=as.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",q=-1<as.stack.indexOf("\n    at")?" (<anonymous>)":-1<as.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+q}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(as){var r=as}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(i){if(i&&r&&"string"===typeof i.stack)return[i.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),i=a[0],o=a[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&null!==t?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return $("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(as){return"\nError generating stack: "+as.message+"\n"+as.stack}}var re=Object.prototype.hasOwnProperty,se=r.unstable_scheduleCallback,ae=r.unstable_cancelCallback,ie=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,me=r.unstable_LowPriority,pe=r.unstable_IdlePriority,fe=r.log,ge=r.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof fe&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(we(e)/je|0)|0},we=Math.log,je=Math.LN2;var Ne=256,Se=262144,Ee=4194304;function ke(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~a)?s=ke(r):0!==(i&=o)?s=ke(i):n||0!==(n=o&~e)&&(s=ke(n)):0!==(o=r&~a)?s=ke(o):0!==i?s=ke(i):n||0!==(n=r&~e)&&(s=ke(n)),0===s?0:0!==t&&t!==s&&0===(t&a)&&((a=s&-s)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:s}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Le(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Oe(n))&(e.suspendedLanes|t))?0:n}function Oe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function Ue(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var Ve=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ve,Be="__reactProps$"+Ve,qe="__reactContainer$"+Ve,Ge="__reactEvents$"+Ve,He="__reactListeners$"+Ve,We="__reactHandles$"+Ve,Ke="__reactResources$"+Ve,Je="__reactMarker$"+Ve;function Qe(e){delete e[ze],delete e[Be],delete e[Ge],delete e[He],delete e[We]}function Ye(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qe]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Md(e);null!==e;){if(n=e[ze])return n;e=Md(e)}return t}n=(e=n).parentNode}return null}function Xe(e){if(e=e[ze]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Ze(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Je]=!0}var tt=new Set,nt={};function rt(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},ot={};function lt(e,t,n){if(s=t,re.call(ot,s)||!re.call(it,s)&&(at.test(s)?ot[s]=!0:(it[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,s,a,i,o){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?xt(e,i,dt(t)):null!=n?xt(e,i,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=a&&(e.defaultChecked=!!a),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,s,a,i,o){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void mt(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i),mt(e)}function xt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function jt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Nt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(D(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),mt(e)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&kt(e,s,r)}else for(var a in t)t.hasOwnProperty(a)&&kt(e,a,t[a])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Dt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Ot=null;function Mt(e){var t=Xe(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Be]||null;if(!s)throw Error(i(90));yt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":jt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ft=!1;function Ut(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Lt||null!==Ot)&&(eu(),Lt&&(t=Lt,e=Ot,Ot=Lt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Vt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(zt)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch($h){Bt=!1}var Gt=null,Ht=null,Wt=null;function Kt(){if(Wt)return Wt;var e,t,n=Ht,r=n.length,s="value"in Gt?Gt.value:Gt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Wt=s.slice(e,1<t?1-t:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Qt(){return!0}function Yt(){return!1}function Xt(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Qt:Yt,this.isPropagationStopped=Yt,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qt)},persist:function(){},isPersistent:Qt}),t}var $t,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Xt(tn),rn=m({},tn,{view:0,detail:0}),sn=Xt(rn),an=m({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?($t=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=$t=0,en=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=Xt(an),ln=Xt(m({},an,{dataTransfer:0})),cn=Xt(m({},rn,{relatedTarget:0})),un=Xt(m({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Xt(m({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Xt(m({},tn,{data:0})),mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function vn(){return gn}var yn=Xt(m({},rn,{key:function(e){if(e.key){var t=mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Xt(m({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=Xt(m({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),wn=Xt(m({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=Xt(m({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Nn=Xt(m({},tn,{newState:0,oldState:0})),Sn=[9,13,27,32],En=zt&&"CompositionEvent"in window,kn=null;zt&&"documentMode"in document&&(kn=document.documentMode);var Cn=zt&&"TextEvent"in window&&!kn,Tn=zt&&(!En||kn&&8<kn&&11>=kn),In=String.fromCharCode(32),_n=!1;function An(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function On(e,t,n,r){Lt?Ot?Ot.push(r):Ot=[r]:Lt=r,0<(t=sd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Fn=null;function Un(e){Yu(e,0)}function Vn(e){if(pt($e(e)))return e}function zn(e,t){if("change"===e)return t}var Bn=!1;if(zt){var qn;if(zt){var Gn="oninput"in document;if(!Gn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Gn="function"===typeof Hn.oninput}qn=Gn}else qn=!1;Bn=qn&&(!document.documentMode||9<document.documentMode)}function Wn(){Mn&&(Mn.detachEvent("onpropertychange",Kn),Fn=Mn=null)}function Kn(e){if("value"===e.propertyName&&Vn(Fn)){var t=[];On(t,Fn,e,Rt(e)),Ut(Un,t)}}function Jn(e,t,n){"focusin"===e?(Wn(),Fn=n,(Mn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Wn()}function Qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Fn)}function Yn(e,t){if("click"===e)return Vn(t)}function Xn(e,t){if("input"===e||"change"===e)return Vn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!re.call(t,s)||!$n(e[s],t[s]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=zt&&"documentMode"in document&&11>=document.documentMode,ir=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ir||ir!==ft(r)||("selectionStart"in(r=ir)&&sr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=sd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ir)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},mr={},pr={};function fr(e){if(mr[e])return mr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return mr[e]=n[t];return e}zt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=fr("animationend"),vr=fr("animationiteration"),yr=fr("animationstart"),br=fr("transitionrun"),xr=fr("transitionstart"),wr=fr("transitioncancel"),jr=fr("transitionend"),Nr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Nr.set(e,t),rt(t,[e])}Sr.push("scrollEnd");var kr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Cr=[],Tr=0,Ir=0;function _r(){for(var e=Tr,t=Ir=Tr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var s=Cr[t];Cr[t++]=null;var a=Cr[t];if(Cr[t++]=null,null!==r&&null!==s){var i=r.pending;null===i?s.next=s:(s.next=i.next,i.next=s),r.pending=s}0!==a&&Rr(n,s,a)}}function Ar(e,t,n,r){Cr[Tr++]=e,Cr[Tr++]=t,Cr[Tr++]=n,Cr[Tr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Pr(e,t,n,r){return Ar(e,t,n,r),Lr(e)}function Dr(e,t){return Ar(e,null,null,t),Lr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(s=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,s&&null!==t&&(s=31-xe(n),null===(r=(e=a.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),a):null}function Lr(e){if(50<Hc)throw Hc=0,Wc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Mr(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vr(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,s,a){var o=0;if(r=e,"function"===typeof e)Ur(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fr(31,n,t,s)).elementType=C,e.lanes=a,e;case v:return qr(n.children,s,a,t);case y:o=8,s|=24;break;case b:return(e=Fr(12,n,t,2|s)).elementType=b,e.lanes=a,e;case N:return(e=Fr(13,n,t,s)).elementType=N,e.lanes=a,e;case S:return(e=Fr(19,n,t,s)).elementType=S,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case x:o=9;break e;case j:o=11;break e;case E:o=14;break e;case k:o=16,r=null;break e}o=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function qr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Hr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Wr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=new WeakMap;function Jr(e,t){if("object"===typeof e&&null!==e){var n=Kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Kr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Qr=[],Yr=0,Xr=null,$r=0,Zr=[],es=0,ts=null,ns=1,rs="";function ss(e,t){Qr[Yr++]=$r,Qr[Yr++]=Xr,Xr=e,$r=t}function is(e,t,n){Zr[es++]=ns,Zr[es++]=rs,Zr[es++]=ts,ts=e;var r=ns;e=rs;var s=32-xe(r)-1;r&=~(1<<s),n+=1;var a=32-xe(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,ns=1<<32-xe(t)+s|n<<s|r,rs=a+e}else ns=1<<a|n<<s|r,rs=e}function os(e){null!==e.return&&(ss(e,1),is(e,1,0))}function ls(e){for(;e===Xr;)Xr=Qr[--Yr],Qr[Yr]=null,$r=Qr[--Yr],Qr[Yr]=null;for(;e===ts;)ts=Zr[--es],Zr[es]=null,rs=Zr[--es],Zr[es]=null,ns=Zr[--es],Zr[es]=null}function cs(e,t){Zr[es++]=ns,Zr[es++]=rs,Zr[es++]=ts,ns=t.id,rs=t.overflow,ts=e}var us=null,ds=null,hs=!1,ms=null,ps=!1,fs=Error(i(519));function gs(e){throw js(Jr(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fs}function vs(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Be]=r,n){case"dialog":Xu("cancel",t),Xu("close",t);break;case"iframe":case"object":case"embed":Xu("load",t);break;case"video":case"audio":for(n=0;n<Ju.length;n++)Xu(Ju[n],t);break;case"source":Xu("error",t);break;case"img":case"image":case"link":Xu("error",t),Xu("load",t);break;case"details":Xu("toggle",t);break;case"input":Xu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Xu("invalid",t);break;case"textarea":Xu("invalid",t),Nt(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ud(t.textContent,n)?(null!=r.popover&&(Xu("beforetoggle",t),Xu("toggle",t)),null!=r.onScroll&&Xu("scroll",t),null!=r.onScrollEnd&&Xu("scrollend",t),null!=r.onClick&&(t.onclick=Pt),t=!0):t=!1,t||gs(e,!0)}function ys(e){for(us=e.return;us;)switch(us.tag){case 5:case 31:case 13:return void(ps=!1);case 27:case 3:return void(ps=!0);default:us=us.return}}function bs(e){if(e!==us)return!1;if(!hs)return ys(e),hs=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||xd(e.type,e.memoizedProps)),t=!t),t&&ds&&gs(e),ys(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ds=Od(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ds=Od(e)}else 27===n?(n=ds,Cd(e.type)?(e=Ld,Ld=null,ds=e):ds=n):ds=us?Rd(e.stateNode.nextSibling):null;return!0}function xs(){ds=us=null,hs=!1}function ws(){var e=ms;return null!==e&&(null===Ac?Ac=e:Ac.push.apply(Ac,e),ms=null),e}function js(e){null===ms?ms=[e]:ms.push(e)}var Ns=U(null),Ss=null,Es=null;function ks(e,t,n){z(Ns,t._currentValue),t._currentValue=n}function Cs(e){e._currentValue=Ns.current,V(Ns)}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var a=s.dependencies;if(null!==a){var o=s.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ts(a.return,n,e),r||(o=null);break e}a=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Ts(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function _s(e,t,n,r){e=null;for(var s=t,a=!1;null!==s;){if(!a)if(0!==(524288&s.flags))a=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=s.type;$n(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===K.current){if(null===(o=s.alternate))throw Error(i(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(dh):e=[dh])}s=s.return}null!==e&&Is(t,e,n,r),t.flags|=262144}function As(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ps(e){Ss=e,Es=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ds(e){return Ls(Ss,e)}function Rs(e,t){return null===Ss&&Ps(e),Ls(e,t)}function Ls(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Es){if(null===e)throw Error(i(308));Es=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Es=Es.next=t;return n}var Os="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ms=r.unstable_scheduleCallback,Fs=r.unstable_NormalPriority,Us={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vs(){return{controller:new Os,data:new Map,refCount:0}}function zs(e){e.refCount--,0===e.refCount&&Ms(Fs,function(){e.controller.abort()})}var Bs=null,qs=0,Gs=0,Hs=null;function Ws(){if(0===--qs&&null!==Bs){null!==Hs&&(Hs.status="fulfilled");var e=Bs;Bs=null,Gs=0,Hs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ks=R.S;R.S=function(e,t){Rc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bs){var n=Bs=[];qs=0,Gs=qu(),Hs={status:"pending",value:void 0,then:function(e){n.push(e)}}}qs++,t.then(Ws,Ws)}(0,t),null!==Ks&&Ks(e,t)};var Js=U(null);function Qs(){var e=Js.current;return null!==e?e:fc.pooledCache}function Ys(e,t){z(Js,null===t?Js.current:t.pool)}function Xs(){var e=Qs();return null===e?null:{parent:Us._currentValue,pool:e}}var $s=Error(i(460)),Zs=Error(i(474)),ea=Error(i(542)),ta={then:function(){}};function na(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ra(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Pt,Pt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oa(e=t.reason),e;default:if("string"===typeof t.status)t.then(Pt,Pt);else{if(null!==(e=fc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oa(e=t.reason),e}throw aa=t,$s}}function sa(e){try{return(0,e._init)(e._payload)}catch(as){if(null!==as&&"object"===typeof as&&"function"===typeof as.then)throw aa=as,$s;throw as}}var aa=null;function ia(){if(null===aa)throw Error(i(459));var e=aa;return aa=null,e}function oa(e){if(e===$s||e===ea)throw Error(i(483))}var la=null,ca=0;function ua(e){var t=ca;return ca+=1,null===la&&(la=[]),ra(la,e,t)}function da(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ha(e,t){if(t.$$typeof===p)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ma(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Vr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===v?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===k&&sa(a)===t.type)?(da(t=s(t,n.props),n),t.return=e,t):(da(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=qr(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return da(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Wr(t,e.mode,n)).return=e,t;case k:return h(e,t=sa(t),n)}if(D(t)||_(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ua(t),n);if(t.$$typeof===w)return h(e,Rs(e,t),n);ha(e,t)}return null}function m(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===s?c(e,t,n,r):null;case g:return n.key===s?u(e,t,n,r):null;case k:return m(e,t,n=sa(n),r)}if(D(n)||_(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return m(e,t,ua(n),r);if(n.$$typeof===w)return m(e,t,Rs(e,n),r);ha(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return p(e,t,n,r=sa(r),s)}if(D(r)||_(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return p(e,t,n,ua(r),s);if(r.$$typeof===w)return p(e,t,n,Rs(t,r),s);ha(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===v){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===k&&sa(b)===c.type){n(l,c.sibling),da(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((d=qr(u.props.children,l.mode,d,u.key)).return=l,l=d):(da(d=Br(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Wr(u,l.mode,d)).return=l,l=d}return o(l);case k:return y(l,c,u=sa(u),d)}if(D(u))return function(s,i,o,l){for(var c=null,u=null,d=i,f=i=0,g=null;null!==d&&f<o.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var v=m(s,d,o[f],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(s,d),i=a(v,i,f),null===u?c=v:u.sibling=v,u=v,d=g}if(f===o.length)return n(s,d),hs&&ss(s,f),c;if(null===d){for(;f<o.length;f++)null!==(d=h(s,o[f],l))&&(i=a(d,i,f),null===u?c=d:u.sibling=d,u=d);return hs&&ss(s,f),c}for(d=r(d);f<o.length;f++)null!==(g=p(d,s,f,o[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),i=a(g,i,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),hs&&ss(s,f),c}(l,c,u,d);if(_(u)){if("function"!==typeof(b=_(u)))throw Error(i(150));return function(s,o,l,c){if(null==l)throw Error(i(151));for(var u=null,d=null,f=o,g=o=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=m(s,f,y.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(s,f),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,f=v}if(y.done)return n(s,f),hs&&ss(s,g),u;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return hs&&ss(s,g),u}for(f=r(f);!y.done;g++,y=l.next())null!==(y=p(f,s,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(s,e)}),hs&&ss(s,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,ua(u),d);if(u.$$typeof===w)return y(l,c,Rs(l,u),d);ha(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Gr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ca=0;var s=y(e,t,n,r);return la=null,s}catch(as){if(as===$s||as===ea)throw as;var a=Fr(29,as,null,e.mode);return a.lanes=r,a.return=e,a}}}var pa=ma(!0),fa=ma(!1),ga=!1;function va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Lr(e),Rr(e,null,n),t}return Ar(e,r,t,n),Lr(e)}function wa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}function ja(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Na=!1;function Sa(){if(Na){if(null!==Hs)throw Hs}}function Ea(e,t,n,r){Na=!1;var s=e.updateQueue;ga=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=s.baseState;for(i=0,u=c=l=null,o=a;;){var h=-536870913&o.lane,p=h!==o.lane;if(p?(vc&h)===h:(r&h)===h){0!==h&&h===Gs&&(Na=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,g=o;h=t;var v=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(v,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(v,d,h):f)||void 0===h)break e;d=m({},d,h);break e;case 2:ga=!0}}null!==(h=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[h]:p.push(h))}else p={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(p=o).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===a&&(s.shared.lanes=0),Ec|=i,e.lanes=i,e.memoizedState=d}}function ka(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function Ca(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ka(n[e],t)}var Ta=U(null),Ia=U(0);function _a(e,t){z(Ia,e=Nc),z(Ta,t),Nc=e|t.baseLanes}function Aa(){z(Ia,Nc),z(Ta,Ta.current)}function Pa(){Nc=Ia.current,V(Ta),V(Ia)}var Da=U(null),Ra=null;function La(e){var t=e.alternate;z(Va,1&Va.current),z(Da,e),null===Ra&&(null===t||null!==Ta.current||null!==t.memoizedState)&&(Ra=e)}function Oa(e){z(Va,Va.current),z(Da,e),null===Ra&&(Ra=e)}function Ma(e){22===e.tag?(z(Va,Va.current),z(Da,e),null===Ra&&(Ra=e)):Fa()}function Fa(){z(Va,Va.current),z(Da,Da.current)}function Ua(e){V(Da),Ra===e&&(Ra=null),V(Va)}var Va=U(0);function za(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pd(n)||Dd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=0,qa=null,Ga=null,Ha=null,Wa=!1,Ka=!1,Ja=!1,Qa=0,Ya=0,Xa=null,$a=0;function Za(){throw Error(i(321))}function ei(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function ti(e,t,n,r,s,a){return Ba=a,qa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?vo:yo,Ja=!1,a=n(r,s),Ja=!1,Ka&&(a=ri(t,n,r,s)),ni(e),a}function ni(e){R.H=go;var t=null!==Ga&&null!==Ga.next;if(Ba=0,Ha=Ga=qa=null,Wa=!1,Ya=0,Xa=null,t)throw Error(i(300));null===e||Ro||null!==(e=e.dependencies)&&As(e)&&(Ro=!0)}function ri(e,t,n,r){qa=e;var s=0;do{if(Ka&&(Xa=null),Ya=0,Ka=!1,25<=s)throw Error(i(301));if(s+=1,Ha=Ga=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}R.H=bo,a=t(n,r)}while(Ka);return a}function si(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?ui(t):t,e=e.useState()[0],(null!==Ga?Ga.memoizedState:null)!==e&&(qa.flags|=1024),t}function ai(){var e=0!==Qa;return Qa=0,e}function ii(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oi(e){if(Wa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wa=!1}Ba=0,Ha=Ga=qa=null,Ka=!1,Ya=Qa=0,Xa=null}function li(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ha?qa.memoizedState=Ha=e:Ha=Ha.next=e,Ha}function ci(){if(null===Ga){var e=qa.alternate;e=null!==e?e.memoizedState:null}else e=Ga.next;var t=null===Ha?qa.memoizedState:Ha.next;if(null!==t)Ha=t,Ga=e;else{if(null===e){if(null===qa.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Ga=e).memoizedState,baseState:Ga.baseState,baseQueue:Ga.baseQueue,queue:Ga.queue,next:null},null===Ha?qa.memoizedState=Ha=e:Ha=Ha.next=e}return Ha}function ui(e){var t=Ya;return Ya+=1,null===Xa&&(Xa=[]),e=ra(Xa,e,t),t=qa,null===(null===Ha?t.memoizedState:Ha.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?vo:yo),e}function di(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ui(e);if(e.$$typeof===w)return Ds(e)}throw Error(i(438,String(e)))}function hi(e){var t=null,n=qa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=qa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},qa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function mi(e,t){return"function"===typeof t?t(e):t}function pi(e){return fi(ci(),Ga,e)}function fi(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var s=e.baseQueue,a=r.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}t.baseQueue=s=a,r.pending=null}if(a=e.baseState,null===s)e.memoizedState=a;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(vc&h)===h:(Ba&h)===h){var m=u.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Gs&&(d=!0);else{if((Ba&m)===m){u=u.next,m===Gs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,qa.lanes|=m,Ec|=m}h=u.action,Ja&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else m={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=m,o=a):c=c.next=m,qa.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!$n(a,e.memoizedState)&&(Ro=!0,d&&null!==(n=Hs)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function gi(e){var t=ci(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);$n(a,t.memoizedState)||(Ro=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function vi(e,t,n){var r=qa,s=ci(),a=hs;if(a){if(void 0===n)throw Error(i(407));n=n()}else n=t();var o=!$n((Ga||s).memoizedState,n);if(o&&(s.memoizedState=n,Ro=!0),s=s.queue,Bi(xi.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==Ha&&1&Ha.memoizedState.tag){if(r.flags|=2048,Mi(9,{destroy:void 0},bi.bind(null,r,s,n,t),null),null===fc)throw Error(i(349));a||0!==(127&Ba)||yi(r,t,n)}return n}function yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=qa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},qa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bi(e,t,n,r){t.value=n,t.getSnapshot=r,wi(t)&&ji(e)}function xi(e,t,n){return n(function(){wi(t)&&ji(e)})}function wi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function ji(e){var t=Dr(e,2);null!==t&&Qc(t,e,2)}function Ni(e){var t=li();if("function"===typeof e){var n=e;if(e=n(),Ja){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:e},t}function Si(e,t,n,r){return e.baseState=n,fi(e,Ga,"function"===typeof r?r:mi)}function Ei(e,t,n,r,s){if(mo(e))throw Error(i(485));if(null!==(e=t.action)){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==R.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,ki(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ki(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var a=R.T,i={};R.T=i;try{var o=n(s,r),l=R.S;null!==l&&l(i,o),Ci(e,t,o)}catch(c){Ii(e,t,c)}finally{null!==a&&null!==i.types&&(a.types=i.types),R.T=a}}else try{Ci(e,t,a=n(s,r))}catch(u){Ii(e,t,u)}}function Ci(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ti(e,t,n)},function(n){return Ii(e,t,n)}):Ti(e,t,n)}function Ti(e,t,n){t.status="fulfilled",t.value=n,_i(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ki(e,n)))}function Ii(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,_i(t),t=t.next}while(t!==r)}e.action=null}function _i(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ai(e,t){return t}function Pi(e,t){if(hs){var n=fc.formState;if(null!==n){e:{var r=qa;if(hs){if(ds){t:{for(var s=ds,a=ps;8!==s.nodeType;){if(!a){s=null;break t}if(null===(s=Rd(s.nextSibling))){s=null;break t}}s="F!"===(a=s.data)||"F"===a?s:null}if(s){ds=Rd(s.nextSibling),r="F!"===s.data;break e}}gs(r)}r=!1}r&&(t=n[0])}}return(n=li()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},n.queue=r,n=co.bind(null,qa,r),r.dispatch=n,r=Ni(!1),a=ho.bind(null,qa,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=li()).queue=s,n=Ei.bind(null,qa,s,a,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function Di(e){return Ri(ci(),Ga,e)}function Ri(e,t,n){if(t=fi(e,t,Ai)[0],e=pi(mi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ui(t)}catch(as){if(as===$s)throw ea;throw as}else r=t;var s=(t=ci()).queue,a=s.dispatch;return n!==t.memoizedState&&(qa.flags|=2048,Mi(9,{destroy:void 0},Li.bind(null,s,n),null)),[r,a,e]}function Li(e,t){e.action=t}function Oi(e){var t=ci(),n=Ga;if(null!==n)return Ri(t,n,e);ci(),t=t.memoizedState;var r=(n=ci()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Mi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=qa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},qa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fi(){return ci().memoizedState}function Ui(e,t,n,r){var s=li();qa.flags|=e,s.memoizedState=Mi(1|t,{destroy:void 0},n,void 0===r?null:r)}function Vi(e,t,n,r){var s=ci();r=void 0===r?null:r;var a=s.memoizedState.inst;null!==Ga&&null!==r&&ei(r,Ga.memoizedState.deps)?s.memoizedState=Mi(t,a,n,r):(qa.flags|=e,s.memoizedState=Mi(1|t,a,n,r))}function zi(e,t){Ui(8390656,8,e,t)}function Bi(e,t){Vi(2048,8,e,t)}function qi(e){var t=ci().memoizedState;return function(e){qa.flags|=4;var t=qa.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},qa.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Gi(e,t){return Vi(4,2,e,t)}function Hi(e,t){return Vi(4,4,e,t)}function Wi(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ki(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Vi(4,4,Wi.bind(null,t,e),n)}function Ji(){}function Qi(e,t){var n=ci();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ei(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yi(e,t){var n=ci();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ei(t,r[1]))return r[0];if(r=e(),Ja){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Xi(e,t,n){return void 0===n||0!==(1073741824&Ba)&&0===(261930&vc)?e.memoizedState=t:(e.memoizedState=n,e=Jc(),qa.lanes|=e,Ec|=e,n)}function $i(e,t,n,r){return $n(n,t)?n:null!==Ta.current?(e=Xi(e,n,r),$n(e,t)||(Ro=!0),e):0===(42&Ba)||0!==(1073741824&Ba)&&0===(261930&vc)?(Ro=!0,e.memoizedState=n):(e=Jc(),qa.lanes|=e,Ec|=e,t)}function Zi(e,t,n,r,s){var a=L.p;L.p=0!==a&&8>a?a:8;var i=R.T,o={};R.T=o,ho(e,!1,t,n);try{var l=s(),c=R.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Kc());else uo(e,t,r,Kc())}catch(u){uo(e,t,{then:function(){},status:"rejected",reason:u},Kc())}finally{L.p=a,null!==i&&null!==o.types&&(i.types=o.types),R.T=i}}function eo(){}function to(e,t,n,r){if(5!==e.tag)throw Error(i(476));var s=no(e).queue;Zi(e,s,t,O,null===n?eo:function(){return ro(e),n(r)})}function no(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ro(e){var t=no(e);null===t.next&&(t=e.alternate.memoizedState),uo(e,t.next.queue,{},Kc())}function so(){return Ds(dh)}function ao(){return ci().memoizedState}function io(){return ci().memoizedState}function oo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Kc(),r=xa(t,e=ba(n),n);return null!==r&&(Qc(r,t,n),wa(r,t,n)),t={cache:Vs()},void(e.payload=t)}t=t.return}}function lo(e,t,n){var r=Kc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},mo(e)?po(t,n):null!==(n=Pr(e,t,n,r))&&(Qc(n,e,r),fo(n,t,r))}function co(e,t,n){uo(e,t,n,Kc())}function uo(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(mo(e))po(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,$n(o,i))return Ar(e,t,s,0),null===fc&&_r(),!1}catch(l){}if(null!==(n=Pr(e,t,s,r)))return Qc(n,e,r),fo(n,t,r),!0}return!1}function ho(e,t,n,r){if(r={lane:2,revertLane:qu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},mo(e)){if(t)throw Error(i(479))}else null!==(t=Pr(e,n,r,2))&&Qc(t,e,2)}function mo(e){var t=e.alternate;return e===qa||null!==t&&t===qa}function po(e,t){Ka=Wa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}var go={readContext:Ds,use:di,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useLayoutEffect:Za,useInsertionEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useSyncExternalStore:Za,useId:Za,useHostTransitionStatus:Za,useFormState:Za,useActionState:Za,useOptimistic:Za,useMemoCache:Za,useCacheRefresh:Za};go.useEffectEvent=Za;var vo={readContext:Ds,use:di,useCallback:function(e,t){return li().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:zi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ui(4194308,4,Wi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ui(4194308,4,e,t)},useInsertionEffect:function(e,t){Ui(4,2,e,t)},useMemo:function(e,t){var n=li();t=void 0===t?null:t;var r=e();if(Ja){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=li();if(void 0!==n){var s=n(t);if(Ja){be(!0);try{n(t)}finally{be(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=lo.bind(null,qa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},li().memoizedState=e},useState:function(e){var t=(e=Ni(e)).queue,n=co.bind(null,qa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ji,useDeferredValue:function(e,t){return Xi(li(),e,t)},useTransition:function(){var e=Ni(!1);return e=Zi.bind(null,qa,e.queue,!0,!1),li().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=qa,s=li();if(hs){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===fc)throw Error(i(349));0!==(127&vc)||yi(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,zi(xi.bind(null,r,a,e),[e]),r.flags|=2048,Mi(9,{destroy:void 0},bi.bind(null,r,a,n,t),null),n},useId:function(){var e=li(),t=fc.identifierPrefix;if(hs){var n=rs;t="_"+t+"R_"+(n=(ns&~(1<<32-xe(ns)-1)).toString(32)+n),0<(n=Qa++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=$a++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:so,useFormState:Pi,useActionState:Pi,useOptimistic:function(e){var t=li();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ho.bind(null,qa,!0,n),n.dispatch=t,[e,t]},useMemoCache:hi,useCacheRefresh:function(){return li().memoizedState=oo.bind(null,qa)},useEffectEvent:function(e){var t=li(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(i(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Ds,use:di,useCallback:Qi,useContext:Ds,useEffect:Bi,useImperativeHandle:Ki,useInsertionEffect:Gi,useLayoutEffect:Hi,useMemo:Yi,useReducer:pi,useRef:Fi,useState:function(){return pi(mi)},useDebugValue:Ji,useDeferredValue:function(e,t){return $i(ci(),Ga.memoizedState,e,t)},useTransition:function(){var e=pi(mi)[0],t=ci().memoizedState;return["boolean"===typeof e?e:ui(e),t]},useSyncExternalStore:vi,useId:ao,useHostTransitionStatus:so,useFormState:Di,useActionState:Di,useOptimistic:function(e,t){return Si(ci(),0,e,t)},useMemoCache:hi,useCacheRefresh:io};yo.useEffectEvent=qi;var bo={readContext:Ds,use:di,useCallback:Qi,useContext:Ds,useEffect:Bi,useImperativeHandle:Ki,useInsertionEffect:Gi,useLayoutEffect:Hi,useMemo:Yi,useReducer:gi,useRef:Fi,useState:function(){return gi(mi)},useDebugValue:Ji,useDeferredValue:function(e,t){var n=ci();return null===Ga?Xi(n,e,t):$i(n,Ga.memoizedState,e,t)},useTransition:function(){var e=gi(mi)[0],t=ci().memoizedState;return["boolean"===typeof e?e:ui(e),t]},useSyncExternalStore:vi,useId:ao,useHostTransitionStatus:so,useFormState:Oi,useActionState:Oi,useOptimistic:function(e,t){var n=ci();return null!==Ga?Si(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hi,useCacheRefresh:io};function xo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:m({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bo.useEffectEvent=qi;var wo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kc(),s=ba(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=xa(e,s,r))&&(Qc(t,e,r),wa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kc(),s=ba(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=xa(e,s,r))&&(Qc(t,e,r),wa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kc(),r=ba(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=xa(e,r,n))&&(Qc(t,e,n),wa(t,e,n))}};function jo(e,t,n,r,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(s,a))}function No(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wo.enqueueReplaceState(t,t.state,null)}function So(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=m({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function Eo(e){kr(e)}function ko(e){console.error(e)}function Co(e){kr(e)}function To(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Io(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function _o(e,t,n){return(n=ba(n)).tag=3,n.payload={element:null},n.callback=function(){To(e,t)},n}function Ao(e){return(e=ba(e)).tag=3,e}function Po(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var a=r.value;e.payload=function(){return s(a)},e.callback=function(){Io(t,n,r)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){Io(t,n,r),"function"!==typeof s&&(null===Mc?Mc=new Set([this]):Mc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Do=Error(i(461)),Ro=!1;function Lo(e,t,n,r){t.child=null===e?fa(t,null,n,r):pa(t,e.child,n,r)}function Oo(e,t,n,r,s){n=n.render;var a=t.ref;if("ref"in r){var i={};for(var o in r)"ref"!==o&&(i[o]=r[o])}else i=r;return Ps(t),r=ti(e,t,n,i,a,s),o=ai(),null===e||Ro?(hs&&o&&os(t),t.flags|=1,Lo(e,t,r,s),t.child):(ii(e,t,s),al(e,t,s))}function Mo(e,t,n,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Ur(a)||void 0!==a.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Fo(e,t,a,r,s))}if(a=e.child,!il(e,s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(i,r)&&e.ref===t.ref)return al(e,t,s)}return t.flags|=1,(e=Vr(a,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(Zn(a,r)&&e.ref===t.ref){if(Ro=!1,t.pendingProps=r=a,!il(e,s))return t.lanes=e.lanes,al(e,t,s);0!==(131072&e.flags)&&(Ro=!0)}}return Ho(e,t,n,r,s)}function Uo(e,t,n,r){var s=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~a}else r=0,t.child=null;return zo(e,t,a,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,zo(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ys(0,null!==a?a.cachePool:null),null!==a?_a(t,a):Aa(),Ma(t)}else null!==a?(Ys(0,a.cachePool),_a(t,a),Fa(),t.memoizedState=null):(null!==e&&Ys(0,null),Aa(),Fa());return Lo(e,t,s,n),t.child}function Vo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zo(e,t,n,r,s){var a=Qs();return a=null===a?null:{parent:Us._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Ys(0,null),Aa(),Ma(t),null!==e&&_s(e,t,r,!0),t.childLanes=s,null}function Bo(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function qo(e,t,n){return pa(t,e.child,null,n),(e=Bo(t,t.pendingProps)).flags|=2,Ua(t),t.memoizedState=null,e}function Go(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ho(e,t,n,r,s){return Ps(t),n=ti(e,t,n,r,void 0,s),r=ai(),null===e||Ro?(hs&&r&&os(t),t.flags|=1,Lo(e,t,n,s),t.child):(ii(e,t,s),al(e,t,s))}function Wo(e,t,n,r,s,a){return Ps(t),t.updateQueue=null,n=ri(t,r,n,s),ni(e),r=ai(),null===e||Ro?(hs&&r&&os(t),t.flags|=1,Lo(e,t,n,a),t.child):(ii(e,t,a),al(e,t,a))}function Ko(e,t,n,r,s){if(Ps(t),null===t.stateNode){var a=Or,i=n.contextType;"object"===typeof i&&null!==i&&(a=Ds(i)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=wo,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},va(t),i=n.contextType,a.context="object"===typeof i&&null!==i?Ds(i):Or,a.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(xo(t,n,i,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(i=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&wo.enqueueReplaceState(a,a.state,null),Ea(t,r,a,s),Sa(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=So(n,o);a.props=l;var c=a.context,u=n.contextType;i=Or,"object"===typeof u&&null!==u&&(i=Ds(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||c!==i)&&No(t,a,r,i),ga=!1;var h=t.memoizedState;a.state=h,Ea(t,r,a,s),Sa(),c=t.memoizedState,o||h!==c||ga?("function"===typeof d&&(xo(t,n,d,r),c=t.memoizedState),(l=ga||jo(t,n,l,r,h,c,i))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=i,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ya(e,t),u=So(n,i=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Or,"object"===typeof c&&null!==c&&(l=Ds(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(i!==d||h!==l)&&No(t,a,r,l),ga=!1,h=t.memoizedState,a.state=h,Ea(t,r,a,s),Sa();var m=t.memoizedState;i!==d||h!==m||ga||null!==e&&null!==e.dependencies&&As(e.dependencies)?("function"===typeof o&&(xo(t,n,o,r),m=t.memoizedState),(u=ga||jo(t,n,u,r,h,m,l)||null!==e&&null!==e.dependencies&&As(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Go(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=pa(t,e.child,null,s),t.child=pa(t,null,n,s)):Lo(e,t,n,s),t.memoizedState=a.state,e=t.child):e=al(e,t,s),e}function Jo(e,t,n,r){return xs(),t.flags|=256,Lo(e,t,n,r),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yo(e){return{baseLanes:e,cachePool:Xs()}}function Xo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Tc),e}function $o(e,t,n){var r,s=t.pendingProps,a=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Va.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hs){if(a?La(t):Fa(),(e=ds)?null!==(e=null!==(e=Ad(e,ps))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Hr(e)).return=t,t.child=n,us=t,ds=null):e=null,null===e)throw gs(t);return Dd(e)?t.lanes=32:t.lanes=536870912,null}var l=s.children;return s=s.fallback,a?(Fa(),l=el({mode:"hidden",children:l},a=t.mode),s=qr(s,a,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,(s=t.child).memoizedState=Yo(n),s.childLanes=Xo(e,r,n),t.memoizedState=Qo,Vo(null,s)):(La(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(La(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(Fa(),t.child=e.child,t.flags|=128,t=null):(Fa(),l=s.fallback,a=t.mode,s=el({mode:"visible",children:s.children},a),(l=qr(l,a,n,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,pa(t,e.child,null,n),(s=t.child).memoizedState=Yo(n),s.childLanes=Xo(e,r,n),t.memoizedState=Qo,t=Vo(null,s));else if(La(t),Dd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(i(419))).stack="",s.digest=r,js({value:s,source:null,stack:null}),t=tl(e,t,n)}else if(Ro||_s(e,t,n,!1),r=0!==(n&e.childLanes),Ro||r){if(null!==(r=fc)&&(0!==(s=Le(r,n))&&s!==c.retryLane))throw c.retryLane=s,Dr(e,s),Qc(r,e,s),Do;Pd(l)||ou(),t=tl(e,t,n)}else Pd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ds=Rd(l.nextSibling),us=t,hs=!0,ms=null,ps=!1,null!==e&&cs(t,e),(t=Zo(t,s.children)).flags|=4096);return t}return a?(Fa(),l=s.fallback,a=t.mode,u=(c=e.child).sibling,(s=Vr(c,{mode:"hidden",children:s.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Vr(u,l):(l=qr(l,a,n,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,Vo(null,s),s=t.child,null===(l=e.child.memoizedState)?l=Yo(n):(null!==(a=l.cachePool)?(c=Us._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=Xs(),l={baseLanes:l.baseLanes|n,cachePool:a}),s.memoizedState=l,s.childLanes=Xo(e,r,n),t.memoizedState=Qo,Vo(e.child,s)):(La(t),e=(n=e.child).sibling,(n=Vr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function tl(e,t,n){return pa(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function rl(e,t,n,r,s,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s,i.treeForkCount=a)}function sl(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;r=r.children;var i=Va.current,o=0!==(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,z(Va,i),Lo(e,t,r,n),r=hs?$r:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===za(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),rl(t,!1,s,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===za(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}rl(t,!0,n,null,a,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(_s(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Vr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!As(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ro=!0;else{if(!il(e,n)&&0===(128&t.flags))return Ro=!1,function(e,t,n){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),ks(0,Us,e.memoizedState.cache),xs();break;case 27:case 5:Y(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:ks(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Oa(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(La(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$o(e,t,n):(La(t),null!==(e=al(e,t,n))?e.sibling:null);La(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(_s(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return sl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(Va,Va.current),r)break;return null;case 22:return t.lanes=0,Uo(e,t,n,t.pendingProps);case 24:ks(0,Us,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Ro=0!==(131072&e.flags)}else Ro=!1,hs&&0!==(1048576&t.flags)&&is(t,$r,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=sa(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var s=e.$$typeof;if(s===j){t.tag=11,t=Oo(null,t,e,r,n);break e}if(s===E){t.tag=14,t=Mo(null,t,e,r,n);break e}}throw t=P(e)||e,Error(i(306,t,""))}Ur(e)?(r=So(e,r),t.tag=1,t=Ko(null,t,e,r,n)):(t.tag=0,t=Ho(null,t,e,r,n))}return t;case 0:return Ho(e,t,t.type,t.pendingProps,n);case 1:return Ko(e,t,r=t.type,s=So(r,t.pendingProps),n);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var a=t.memoizedState;s=a.element,ya(e,t),Ea(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ks(0,Us,r),r!==a.cache&&Is(t,[Us],n,!0),Sa(),r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Jo(e,t,r,n);break e}if(r!==s){js(s=Jr(Error(i(424)),t)),t=Jo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ds=Rd(e.firstChild),us=t,hs=!0,ms=null,ps=!0,n=fa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(xs(),r===s){t=al(e,t,n);break e}Lo(e,t,r,n)}t=t.child}return t;case 26:return Go(e,t),null===e?(n=Wd(t.type,null,t.pendingProps,null))?t.memoizedState=n:hs||(n=t.type,e=t.pendingProps,(r=vd(W.current).createElement(n))[ze]=t,r[Be]=e,md(r,n,e),et(r),t.stateNode=r):t.memoizedState=Wd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&hs&&(r=t.stateNode=Fd(t.type,t.pendingProps,W.current),us=t,ps=!0,s=ds,Cd(t.type)?(Ld=s,ds=Rd(r.firstChild)):ds=s),Lo(e,t,t.pendingProps.children,n),Go(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hs&&((s=r=ds)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===a)return e}if(null===(e=Rd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ps))?(t.stateNode=r,us=t,ds=Rd(r.firstChild),ps=!1,s=!0):s=!1),s||gs(t)),Y(t),s=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,xd(s,a)?r=null:null!==o&&xd(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ti(e,t,si,null,null,n),dh._currentValue=s),Go(e,t),Lo(e,t,r,n),t.child;case 6:return null===e&&hs&&((e=n=ds)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}(n,t.pendingProps,ps))?(t.stateNode=n,us=t,ds=null,e=!0):e=!1),e||gs(t)),null;case 13:return $o(e,t,n);case 4:return J(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pa(t,null,r,n):Lo(e,t,r,n),t.child;case 11:return Oo(e,t,t.type,t.pendingProps,n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ks(0,t.type,r.value),Lo(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Ps(t),r=r(s=Ds(s)),t.flags|=1,Lo(e,t,r,n),t.child;case 14:return Mo(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return sl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,s=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hs){if("hidden"===r.mode)return e=Bo(t,r),t.lanes=536870912,Vo(null,e);if(Oa(t),(e=ds)?null!==(e=null!==(e=Ad(e,ps))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Hr(e)).return=t,t.child=n,us=t,ds=null):e=null,null===e)throw gs(t);return t.lanes=536870912,null}return Bo(t,r)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(Oa(t),s)if(256&t.flags)t.flags&=-257,t=qo(e,t,n);else{if(null===t.memoizedState)throw Error(i(558));t.child=e.child,t.flags|=128,t=null}else if(Ro||_s(e,t,n,!1),s=0!==(n&e.childLanes),Ro||s){if(null!==(r=fc)&&0!==(o=Le(r,n))&&o!==a.retryLane)throw a.retryLane=o,Dr(e,o),Qc(r,e,o),Do;ou(),t=qo(e,t,n)}else e=a.treeContext,ds=Rd(o.nextSibling),us=t,hs=!0,ms=null,ps=!1,null!==e&&cs(t,e),(t=Bo(t,r)).flags|=4096;return t}return(e=Vr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Uo(e,t,n,t.pendingProps);case 24:return Ps(t),r=Ds(Us),null===e?(null===(s=Qs())&&(s=fc,a=Vs(),s.pooledCache=a,a.refCount++,null!==a&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:r,cache:s},va(t),ks(0,Us,s)):(0!==(e.lanes&n)&&(ya(e,t),Ea(t,null,null,n),Sa()),s=e.memoizedState,a=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),ks(0,Us,r)):(r=a.cache,ks(0,Us,r),r!==s.cache&&Is(t,[Us],n,!0))),Lo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,s){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!su())throw aa=ta,Zs;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!su())throw aa=ta,Zs;e.flags|=8192}}function dl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?_e():536870912,e.lanes|=t,Ic|=t)}function hl(e,t){if(!hs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ml(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(ls(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ml(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Cs(Us),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bs(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ws())),ml(t),null;case 26:var s=t.type,a=t.memoizedState;return null===e?(ll(t),null!==a?(ml(t),ul(t,a)):(ml(t),cl(t,s,0,0,n))):a?a!==e.memoizedState?(ll(t),ml(t),ul(t,a)):(ml(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),ml(t),cl(t,s,0,0,n)),null;case 27:if(X(t),n=W.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ml(t),null}e=G.current,bs(t)?vs(t):(e=Fd(s,r,n),t.stateNode=e,ll(t))}return ml(t),null;case 5:if(X(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ml(t),null}if(a=G.current,bs(t))vs(t);else{var o=vd(W.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"===typeof r.is?o.createElement(s,{is:r.is}):o.createElement(s)}}a[ze]=t,a[Be]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(md(a,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return ml(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(e=W.current,bs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=us))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ud(e.nodeValue,n)))||gs(t,!0)}else(e=vd(e).createTextNode(r))[ze]=t,t.stateNode=e}return ml(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=bs(t),null!==n){if(null===e){if(!r)throw Error(i(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));e[ze]=t}else xs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ml(t),e=!1}else n=ws(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ua(t),t):(Ua(t),null);if(0!==(128&t.flags))throw Error(i(558))}return ml(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=bs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[ze]=t}else xs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ml(t),s=!1}else s=ws(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Ua(t),t):(Ua(t),null)}return Ua(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dl(t,t.updateQueue),ml(t),null);case 4:return Q(),null===e&&ed(t.stateNode.containerInfo),ml(t),null;case 10:return Cs(t.type),ml(t),null;case 19:if(V(Va),null===(r=t.memoizedState))return ml(t),null;if(s=0!==(128&t.flags),null===(a=r.rendering))if(s)hl(r,!1);else{if(0!==Sc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=za(e))){for(t.flags|=128,hl(r,!1),e=a.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(Va,1&Va.current|2),hs&&ss(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Lc&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=za(a))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!hs)return ml(t),null}else 2*le()-r.renderingStartTime>Lc&&536870912!==n&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Va.current,z(Va,s?1&n|2:1&n),hs&&ss(t,r.treeForkCount),e):(ml(t),null);case 22:case 23:return Ua(t),Pa(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(ml(t),6&t.subtreeFlags&&(t.flags|=8192)):ml(t),null!==(n=t.updateQueue)&&dl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(Js),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Cs(Us),ml(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function fl(e,t){switch(ls(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Cs(Us),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(null!==t.memoizedState){if(Ua(t),null===t.alternate)throw Error(i(340));xs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));xs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(Va),null;case 4:return Q(),null;case 10:return Cs(t.type),null;case 22:case 23:return Ua(t),Pa(),null!==e&&V(Js),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Cs(Us),null;default:return null}}function gl(e,t){switch(ls(t),t.tag){case 3:Cs(Us),Q();break;case 26:case 27:case 5:X(t);break;case 4:Q();break;case 31:null!==t.memoizedState&&Ua(t);break;case 13:Ua(t);break;case 19:V(Va);break;case 10:Cs(t.type);break;case 22:case 23:Ua(t),Pa(),null!==e&&V(Js);break;case 24:Cs(Us)}}function vl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var a=n.create,i=n.inst;r=a(),i.destroy=r}n=n.next}while(n!==s)}}catch(o){Su(t,t.return,o)}}function yl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var a=s.next;r=a;do{if((r.tag&e)===e){var i=r.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){Su(s,l,u)}}}r=r.next}while(r!==a)}}catch(u){Su(t,t.return,u)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ca(t,n)}catch(r){Su(e,e.return,r)}}}function xl(e,t,n){n.props=So(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Su(e,t,r)}}function wl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){Su(e,t,s)}}function jl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){Su(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){Su(e,t,a)}else n.current=null}function Nl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){Su(e,e.return,s)}}function Sl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||dd(e,t,p,null,r,h)}}for(var m in r){var p=r[m];if(h=n[m],r.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":a=p;break;case"name":s=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:p!==h&&dd(e,t,m,p,r,h)}}return void yt(e,o,l,c,u,d,a,s);case"select":for(a in p=o=l=m=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(a)||dd(e,t,a,null,r,c)}for(s in r)if(a=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=a||null!=c))switch(s){case"value":m=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&dd(e,t,s,a,r,c)}return t=l,n=o,r=p,void(null!=m?wt(e,!!n,m,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=m=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:dd(e,t,l,null,r,s)}for(o in r)if(s=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=s||null!=a))switch(o){case"value":m=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(i(91));break;default:s!==a&&dd(e,t,o,s,r,a)}return void jt(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else dd(e,t,f,null,r,m);for(c in r)if(m=r[c],p=n[c],r.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else dd(e,t,c,m,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!r.hasOwnProperty(g)&&dd(e,t,g,null,r,m);for(u in r)if(m=r[u],p=n[u],r.hasOwnProperty(u)&&m!==p&&(null!=m||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(i(137,t));break;default:dd(e,t,u,m,r,p)}return;default:if(Tt(t)){for(var v in n)m=n[v],n.hasOwnProperty(v)&&void 0!==m&&!r.hasOwnProperty(v)&&hd(e,t,v,void 0,r,m);for(d in r)m=r[d],p=n[d],!r.hasOwnProperty(d)||m===p||void 0===m&&void 0===p||hd(e,t,d,m,r,p);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&null!=m&&!r.hasOwnProperty(y)&&dd(e,t,y,null,r,m);for(h in r)m=r[h],p=n[h],!r.hasOwnProperty(h)||m===p||null==m&&null==p||dd(e,t,h,m,r,p)}(r,e.type,n,t),r[Be]=t}catch(s){Su(e,e.return,s)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cd(e.type)||4===e.tag}function kl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Pt));else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Il(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);md(t,r,n),t[ze]=e,t[Be]=n}catch(a){Su(e,e.return,a)}}var _l=!1,Al=!1,Pl=!1,Dl="function"===typeof WeakSet?WeakSet:Set,Rl=null;function Ll(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ql(e,n),4&r&&vl(5,n);break;case 1:if(Ql(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){Su(n,n.return,i)}else{var s=So(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Su(n,n.return,o)}}64&r&&bl(n),512&r&&wl(n,n.return);break;case 3:if(Ql(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ca(e,t)}catch(i){Su(n,n.return,i)}}break;case 27:null===t&&4&r&&Il(n);case 26:case 5:Ql(e,n),null===t&&4&r&&Nl(n),512&r&&wl(n,n.return);break;case 12:Ql(e,n);break;case 31:Ql(e,n),4&r&&zl(e,n);break;case 13:Ql(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Tu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||Al,s=_l;var a=Al;_l=r,(Al=t)&&!a?Xl(e,n,0!==(8772&n.subtreeFlags)):Ql(e,n),_l=s,Al=a}break;case 30:break;default:Ql(e,n)}}function Ol(e){var t=e.alternate;null!==t&&(e.alternate=null,Ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ml=null,Fl=!1;function Ul(e,t,n){for(n=n.child;null!==n;)Vl(e,t,n),n=n.sibling}function Vl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(a){}switch(n.tag){case 26:Al||jl(n,t),Ul(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Al||jl(n,t);var r=Ml,s=Fl;Cd(n.type)&&(Ml=n.stateNode,Fl=!1),Ul(e,t,n),Ud(n.stateNode),Ml=r,Fl=s;break;case 5:Al||jl(n,t);case 6:if(r=Ml,s=Fl,Ml=null,Ul(e,t,n),Fl=s,null!==(Ml=r))if(Fl)try{(9===Ml.nodeType?Ml.body:"HTML"===Ml.nodeName?Ml.ownerDocument.body:Ml).removeChild(n.stateNode)}catch(i){Su(n,t,i)}else try{Ml.removeChild(n.stateNode)}catch(i){Su(n,t,i)}break;case 18:null!==Ml&&(Fl?(Td(9===(e=Ml).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Hh(e)):Td(Ml,n.stateNode));break;case 4:r=Ml,s=Fl,Ml=n.stateNode.containerInfo,Fl=!0,Ul(e,t,n),Ml=r,Fl=s;break;case 0:case 11:case 14:case 15:yl(2,n,t),Al||yl(4,n,t),Ul(e,t,n);break;case 1:Al||(jl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&xl(n,t,r)),Ul(e,t,n);break;case 21:Ul(e,t,n);break;case 22:Al=(r=Al)||null!==n.memoizedState,Ul(e,t,n),Al=r;break;default:Ul(e,t,n)}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Hh(e)}catch(n){Su(t,t.return,n)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Hh(e)}catch(n){Su(t,t.return,n)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Iu.bind(null,e,t);t.then(r,r)}})}function Gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Cd(l.type)){Ml=l.stateNode,Fl=!1;break e}break;case 5:Ml=l.stateNode,Fl=!1;break e;case 3:case 4:Ml=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Ml)throw Error(i(160));Vl(a,o,s),Ml=null,Fl=!1,null!==(a=s.alternate)&&(a.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wl(t,e),t=t.sibling}var Hl=null;function Wl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gl(t,e),Kl(e),4&r&&(yl(3,e,e.return),vl(3,e),yl(5,e,e.return));break;case 1:Gl(t,e),Kl(e),512&r&&(Al||null===n||jl(n,n.return)),64&r&&_l&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Hl;if(Gl(t,e),Kl(e),512&r&&(Al||null===n||jl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(a=s.getElementsByTagName("title")[0])||a[Je]||a[ze]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=s.createElement(r),s.head.insertBefore(a,s.querySelector("head > title"))),md(a,r,n),a[ze]=e,et(a),r=a;break e;case"link":var o=rh("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}md(a=s.createElement(r),r,n),s.head.appendChild(a);break;case"meta":if(o=rh("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}md(a=s.createElement(r),r,n),s.head.appendChild(a);break;default:throw Error(i(468,r))}a[ze]=e,et(a),r=a}e.stateNode=r}else sh(s,e.type,e.stateNode);else e.stateNode=$d(s,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?sh(s,e.type,e.stateNode):$d(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Gl(t,e),Kl(e),512&r&&(Al||null===n||jl(n,n.return)),null!==n&&4&r&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Gl(t,e),Kl(e),512&r&&(Al||null===n||jl(n,n.return)),32&e.flags){s=e.stateNode;try{St(s,"")}catch(f){Su(e,e.return,f)}}4&r&&null!=e.stateNode&&Sl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(Pl=!0);break;case 6:if(Gl(t,e),Kl(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){Su(e,e.return,f)}}break;case 3:if(nh=null,s=Hl,Hl=Bd(t.containerInfo),Gl(t,e),Hl=s,Kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Hh(t.containerInfo)}catch(f){Su(e,e.return,f)}Pl&&(Pl=!1,Jl(e));break;case 4:r=Hl,Hl=Bd(e.stateNode.containerInfo),Gl(t,e),Kl(e),Hl=r;break;case 12:default:Gl(t,e),Kl(e);break;case 31:case 19:Gl(t,e),Kl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 13:Gl(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,d=Al;if(_l=u||s,Al=d||c,Gl(t,e),Al=d,_l=u,Kl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||_l||Al||Yl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,s)"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(f){Su(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(f){Su(c,c.return,f)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;s?Id(p,!0):Id(c.stateNode,!1)}catch(f){Su(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,ql(e,n))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var s=n.stateNode;Tl(e,kl(e),s);break;case 5:var a=n.stateNode;32&n.flags&&(St(a,""),n.flags&=-33),Tl(e,kl(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Cl(e,kl(e),o);break;default:throw Error(i(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Jl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Jl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ll(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Yl(t);break;case 1:jl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&xl(t,t.return,n),Yl(t);break;case 27:Ud(t.stateNode);case 26:case 5:jl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function Xl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:Xl(s,a,n),vl(4,a);break;case 1:if(Xl(s,a,n),"function"===typeof(s=(r=a).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){Su(r,r.return,c)}if(null!==(s=(r=a).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)ka(l[s],o)}catch(c){Su(r,r.return,c)}}n&&64&i&&bl(a),wl(a,a.return);break;case 27:Il(a);case 26:case 5:Xl(s,a,n),n&&null===r&&4&i&&Nl(a),wl(a,a.return);break;case 12:Xl(s,a,n);break;case 31:Xl(s,a,n),n&&4&i&&zl(s,a);break;case 13:Xl(s,a,n),n&&4&i&&Bl(s,a);break;case 22:null===a.memoizedState&&Xl(s,a,n),wl(a,a.return);break;case 30:break;default:Xl(s,a,n)}t=t.sibling}}function $l(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&zs(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zs(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&s&&vl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zs(e)));break;case 12:if(2048&s){ec(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,o=a.onPostCommit;"function"===typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Su(t,t.return,l)}}else ec(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,null!==t.memoizedState?2&a._visibility?ec(e,t,n,r):rc(e,t):2&a._visibility?ec(e,t,n,r):(a._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&s&&$l(i,t);break;case 24:ec(e,t,n,r),2048&s&&Zl(t.alternate,t)}}function nc(e,t,n,r,s){for(s=s&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,i=t,o=n,l=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:nc(a,i,o,l,s),vl(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?nc(a,i,o,l,s):rc(a,i):(u._visibility|=2,nc(a,i,o,l,s)),s&&2048&c&&$l(i.alternate,i);break;case 24:nc(a,i,o,l,s),s&&2048&c&&Zl(i.alternate,i);break;default:nc(a,i,o,l,s)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:rc(n,r),2048&s&&$l(r.alternate,r);break;case 24:rc(n,r),2048&s&&Zl(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var sc=8192;function ac(e,t,n){if(e.subtreeFlags&sc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&sc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var s=Kd(r.href),a=t.querySelector(Jd(s));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,r=Qd(r),(s=Vd.get(s))&&eh(r,s),et(a=a.createElement("link"));var i=a;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),md(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Hl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Hl;Hl=Bd(e.stateNode.containerInfo),ac(e,t,n),Hl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=sc,sc=16777216,ac(e,t,n),sc=r):ac(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Rl=r,dc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Rl=r,dc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function dc(e,t){for(;null!==Rl;){var n=Rl;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:zs(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Rl=r;else e:for(n=e;null!==Rl;){var s=(r=Rl).sibling,a=r.return;if(Ol(r),r===n){Rl=null;break e}if(null!==s){s.return=a,Rl=s;break e}Rl=a}}}var hc={getCacheForType:function(e){var t=Ds(Us),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ds(Us).controller.signal}},mc="function"===typeof WeakMap?WeakMap:Map,pc=0,fc=null,gc=null,vc=0,yc=0,bc=null,xc=!1,wc=!1,jc=!1,Nc=0,Sc=0,Ec=0,kc=0,Cc=0,Tc=0,Ic=0,_c=null,Ac=null,Pc=!1,Dc=0,Rc=0,Lc=1/0,Oc=null,Mc=null,Fc=0,Uc=null,Vc=null,zc=0,Bc=0,qc=null,Gc=null,Hc=0,Wc=null;function Kc(){return 0!==(2&pc)&&0!==vc?vc&-vc:null!==R.T?qu():Fe()}function Jc(){if(0===Tc)if(0===(536870912&vc)||hs){var e=Se;0===(3932160&(Se<<=1))&&(Se=262144),Tc=e}else Tc=536870912;return null!==(e=Da.current)&&(e.flags|=32),Tc}function Qc(e,t,n){(e!==fc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(nu(e,0),Zc(e,vc,Tc,!1)),Pe(e,n),0!==(2&pc)&&e===fc||(e===fc&&(0===(2&pc)&&(kc|=n),4===Sc&&Zc(e,vc,Tc,!1)),Ou(e))}function Yc(e,t,n){if(0!==(6&pc))throw Error(i(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),s=r?function(e,t){var n=pc;pc|=2;var r=au(),s=iu();fc!==e||vc!==t?(Oc=null,Lc=le()+500,nu(e,t)):wc=Te(e,t);e:for(;;)try{if(0!==yc&&null!==gc){t=gc;var a=bc;t:switch(yc){case 1:yc=0,bc=null,mu(e,t,a,1);break;case 2:case 9:if(na(a)){yc=0,bc=null,hu(t);break}t=function(){2!==yc&&9!==yc||fc!==e||(yc=7),Ou(e)},a.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:na(a)?(yc=0,bc=null,hu(t)):(yc=0,bc=null,mu(e,t,a,7));break;case 5:var o=null;switch(gc.tag){case 26:o=gc.memoizedState;case 5:case 27:var l=gc;if(o?ah(o):l.stateNode.complete){yc=0,bc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,pu(u)):gc=null}break t}}yc=0,bc=null,mu(e,t,a,5);break;case 6:yc=0,bc=null,mu(e,t,a,6);break;case 8:tu(),Sc=6;break e;default:throw Error(i(462))}}uu();break}catch(d){ru(e,d)}return Es=Ss=null,R.H=r,R.A=s,pc=n,null!==gc?0:(fc=null,vc=0,_r(),Sc)}(e,t):lu(e,t,!0),a=r;;){if(0===s){wc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!a||$c(n)){if(2===s){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=_c;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,o).flags|=256),2!==(o=lu(l,o,!1))){if(jc&&!c){l.errorRecoveryDisabledLanes|=a,kc|=a,s=4;break e}a=Ac,Ac=s,null!==a&&(null===Ac?Ac=a:Ac.push.apply(Ac,a))}s=o}if(a=!1,2!==s)continue}}if(1===s){nu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,a=s){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Tc,!xc);break e;case 2:Ac=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(s=Dc+300-le())){if(Zc(r,t,Tc,!xc),0!==Ce(r,0,!0))break e;zc=t,r.timeoutHandle=jd(Xc.bind(null,r,n,Ac,Oc,Pc,t,Tc,kc,Ic,xc,a,"Throttled",-0,0),s)}else Xc(r,n,Ac,Oc,Pc,t,Tc,kc,Ic,xc,a,null,-0,0)}break}s=lu(e,t,!1),a=!1}Ou(e)}function Xc(e,t,n,r,s,a,i,o,l,c,u,d,h,m){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ic(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt});var p=(62914560&a)===a?Dc-le():(4194048&a)===a?Rc-le():0;if(p=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],a=s.transferSize,i=s.initiatorType,o=s.duration;if(a&&o&&pd(i)){for(i=0,o=s.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&pd(d)&&(i+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(a+i)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}(d,p),null!==p)return zc=a,e.cancelPendingCommit=p(gu.bind(null,e,t,a,n,r,s,i,o,l,u,d,null,h,m)),void Zc(e,a,i,!c)}gu(e,t,a,n,r,s,i,o,l)}function $c(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!$n(a(),s))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Cc,t&=~kc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var a=31-xe(s),i=1<<a;r[a]=-1,s&=~i}0!==n&&De(e,n,t)}function eu(){return 0!==(6&pc)||(Mu(0,!1),!1)}function tu(){if(null!==gc){if(0===yc)var e=gc.return;else Es=Ss=null,oi(e=gc),la=null,ca=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Nd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc=0,tu(),fc=e,gc=n=Vr(e.current,null),vc=t,yc=0,bc=null,xc=!1,wc=Te(e,t),jc=!1,Ic=Tc=Cc=kc=Ec=Sc=0,Ac=_c=null,Pc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-xe(r),a=1<<s;t|=e[s],r&=~a}return Nc=t,_r(),n}function ru(e,t){qa=null,R.H=go,t===$s||t===ea?(t=ia(),yc=3):t===Zs?(t=ia(),yc=4):yc=t===Do?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bc=t,null===gc&&(Sc=1,To(e,Jr(t,e.current)))}function su(){var e=Da.current;return null===e||((4194048&vc)===vc?null===Ra:((62914560&vc)===vc||0!==(536870912&vc))&&e===Ra)}function au(){var e=R.H;return R.H=go,null===e?go:e}function iu(){var e=R.A;return R.A=hc,e}function ou(){Sc=4,xc||(4194048&vc)!==vc&&null!==Da.current||(wc=!0),0===(134217727&Ec)&&0===(134217727&kc)||null===fc||Zc(fc,vc,Tc,!1)}function lu(e,t,n){var r=pc;pc|=2;var s=au(),a=iu();fc===e&&vc===t||(Oc=null,nu(e,t)),t=!1;var i=Sc;e:for(;;)try{if(0!==yc&&null!==gc){var o=gc,l=bc;switch(yc){case 8:tu(),i=6;break e;case 3:case 2:case 9:case 6:null===Da.current&&(t=!0);var c=yc;if(yc=0,bc=null,mu(e,o,l,c),n&&wc){i=0;break e}break;default:c=yc,yc=0,bc=null,mu(e,o,l,c)}}cu(),i=Sc;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,Es=Ss=null,pc=r,R.H=s,R.A=a,null===gc&&(fc=null,vc=0,_r()),i}function cu(){for(;null!==gc;)du(gc)}function uu(){for(;null!==gc&&!ie();)du(gc)}function du(e){var t=ol(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wo(n,t,t.pendingProps,t.type,void 0,vc);break;case 11:t=Wo(n,t,t.pendingProps,t.type.render,t.ref,vc);break;case 5:oi(t);default:gl(n,t),t=ol(n,t=gc=zr(t,Nc),Nc)}e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function mu(e,t,n,r){Es=Ss=null,oi(t),la=null,ca=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&_s(t,n,s,!0),null!==(n=Da.current)){switch(n.tag){case 31:case 13:return null===Ra?ou():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Eu(e,r,s)),!1;case 22:return n.flags|=65536,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Eu(e,r,s)),!1}throw Error(i(435,n.tag))}return Eu(e,r,s),ou(),!1}if(hs)return null!==(t=Da.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==fs&&js(Jr(e=Error(i(422),{cause:r}),n))):(r!==fs&&js(Jr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Jr(r,n),ja(e,s=_o(e.stateNode,r,s)),4!==Sc&&(Sc=2)),!1;var a=Error(i(520),{cause:r});if(a=Jr(a,n),null===_c?_c=[a]:_c.push(a),4!==Sc&&(Sc=2),null===t)return!0;r=Jr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,ja(n,e=_o(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Mc||!Mc.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,Po(s=Ao(s),e,n,r),ja(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,vc))return Sc=1,To(e,Jr(n,e.current)),void(gc=null)}catch(a){if(null!==s)throw gc=s,a;return Sc=1,To(e,Jr(n,e.current)),void(gc=null)}32768&t.flags?(hs||1===r?e=!0:wc||0!==(536870912&vc)?e=!1:(xc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Da.current)&&13===r.tag&&(r.flags|=16384))),fu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void fu(t,xc);e=t.return;var n=pl(t.alternate,t,Nc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===Sc&&(Sc=5)}function fu(e,t){do{var n=fl(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);Sc=6,gc=null}function gu(e,t,n,r,s,a,o,l,c){e.cancelPendingCommit=null;do{wu()}while(0!==Fc);if(0!==(6&pc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,s,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-xe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}n&=~d}0!==r&&De(e,r,0),0!==a&&0===s&&0!==e.tag&&(e.suspendedLanes|=a&~(i&~t))}(e,n,a|=Ir,o,l,c),e===fc&&(gc=fc=null,vc=0),Vc=t,Uc=e,zc=n,Bc=a,qc=s,Gc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,se(he,function(){return ju(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=R.T,R.T=null,s=L.p,L.p=2,o=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,fd=xh,sr(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=o),m===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},xh=!1,Rl=t;null!==Rl;)if(e=(t=Rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Rl=e;else for(;null!==Rl;){switch(a=(t=Rl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var f=So(n.type,s);e=r.getSnapshotBeforeUpdate(f,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){Su(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))_d(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_d(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Rl=e;break}Rl=t.return}}(e,t)}finally{pc=o,L.p=s,R.T=r}}Fc=1,vu(),yu(),bu()}}function vu(){if(1===Fc){Fc=0;var e=Uc,t=Vc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var r=L.p;L.p=2;var s=pc;pc|=4;try{Wl(t,e);var a=gd,i=rr(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(i!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&sr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=o.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!m.extend&&f>g&&(i=g,g=f,f=i);var v=tr(o,f),y=tr(o,g);if(v&&y&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==y.node||m.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),m.removeAllRanges(),f>g?(m.addRange(b),m.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),m.addRange(b))}}}}for(d=[],m=o;m=m.parentNode;)1===m.nodeType&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}xh=!!fd,gd=fd=null}finally{pc=s,L.p=r,R.T=n}}e.current=t,Fc=2}}function yu(){if(2===Fc){Fc=0;var e=Uc,t=Vc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var r=L.p;L.p=2;var s=pc;pc|=4;try{Ll(e,t.alternate,t)}finally{pc=s,L.p=r,R.T=n}}Fc=3}}function bu(){if(4===Fc||3===Fc){Fc=0,oe();var e=Uc,t=Vc,n=zc,r=Gc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Vc=Uc=null,xu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Mc=null),Me(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=R.T,s=L.p,L.p=2,R.T=null;try{for(var a=e.onRecoverableError,i=0;i<r.length;i++){var o=r[i];a(o.value,{componentStack:o.stack})}}finally{R.T=t,L.p=s}}0!==(3&zc)&&wu(),Ou(e),s=e.pendingLanes,0!==(261930&n)&&0!==(42&s)?e===Wc?Hc++:(Hc=0,Wc=e):Hc=0,Mu(0,!1)}}function xu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,zs(t)))}function wu(){return vu(),yu(),bu(),ju()}function ju(){if(5!==Fc)return!1;var e=Uc,t=Bc;Bc=0;var n=Me(zc),r=R.T,s=L.p;try{L.p=32>n?32:n,R.T=null,n=qc,qc=null;var a=Uc,o=zc;if(Fc=0,Vc=Uc=null,zc=0,0!==(6&pc))throw Error(i(331));var l=pc;if(pc|=4,cc(a.current),tc(a,a.current,o,n),pc=l,Mu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,a)}catch(c){}return!0}finally{L.p=s,R.T=r,xu(e,t)}}function Nu(e,t,n){t=Jr(n,t),null!==(e=xa(e,t=_o(e.stateNode,t,2),2))&&(Pe(e,2),Ou(e))}function Su(e,t,n){if(3===e.tag)Nu(e,e,n);else for(;null!==t;){if(3===t.tag){Nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Mc||!Mc.has(r))){e=Jr(n,e),null!==(r=xa(t,n=Ao(2),2))&&(Po(n,r,t,e),Pe(r,2),Ou(r));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(jc=!0,s.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fc===e&&(vc&n)===n&&(4===Sc||3===Sc&&(62914560&vc)===vc&&300>le()-Dc?0===(2&pc)&&nu(e,0):Cc|=n,Ic===vc&&(Ic=0)),Ou(e)}function Cu(e,t){0===t&&(t=_e()),null!==(e=Dr(e,t))&&(Pe(e,t),Ou(e))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cu(e,n)}var _u=null,Au=null,Pu=!1,Du=!1,Ru=!1,Lu=0;function Ou(e){e!==Au&&null===e.next&&(null===Au?_u=Au=e:Au=Au.next=e),Du=!0,Pu||(Pu=!0,Ed(function(){0!==(6&pc)?se(ue,Fu):Uu()}))}function Mu(e,t){if(!Ru&&Du){Ru=!0;do{for(var n=!1,r=_u;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var a=0;else{var i=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-xe(42|e)+1)-1,a=201326741&(a&=s&~(i&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Bu(r,a))}else a=vc,0===(3&(a=Ce(r,r===fc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,a)||(n=!0,Bu(r,a));r=r.next}}while(n);Ru=!1}}function Fu(){Uu()}function Uu(){Du=Pu=!1;var e=0;0!==Lu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wd&&(wd=e,!0);return wd=null,!1}()&&(e=Lu);for(var t=le(),n=null,r=_u;null!==r;){var s=r.next,a=Vu(r,t);0===a?(r.next=null,null===n?_u=s:n.next=s,null===s&&(Au=n)):(n=r,(0!==e||0!==(3&a))&&(Du=!0)),r=s}0!==Fc&&5!==Fc||Mu(e,!1),0!==Lu&&(Lu=0)}function Vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var i=31-xe(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=vc,n=Ce(e,e===(t=fc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ae(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ae(r),Me(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=zu.bind(null,e),n=se(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ae(r),e.callbackPriority=2,e.callbackNode=null,2}function zu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=vc;return 0===(r=Ce(e,e===fc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,r,t),Vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?zu.bind(null,e):null)}function Bu(e,t){if(wu())return null;Yc(e,t,!0)}function qu(){if(0===Lu){var e=Gs;0===e&&(e=Ne,0===(261888&(Ne<<=1))&&(Ne=256)),Lu=e}return Lu}function Gu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Hu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wu=0;Wu<Sr.length;Wu++){var Ku=Sr[Wu];Er(Ku.toLowerCase(),"on"+(Ku[0].toUpperCase()+Ku.slice(1)))}Er(gr,"onAnimationEnd"),Er(vr,"onAnimationIteration"),Er(yr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(br,"onTransitionRun"),Er(xr,"onTransitionStart"),Er(wr,"onTransitionCancel"),Er(jr,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ju));function Yu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){kr(u)}s.currentTarget=null,a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){kr(u)}s.currentTarget=null,a=l}}}}function Xu(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var r=e+"__bubble";n.has(r)||(td(t,e,2,!1),n.add(r))}function $u(e,t,n){var r=0;t&&(r|=4),td(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Qu.has(t)||$u(t,!1,e),$u(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,$u("selectionchange",!1,t))}}function td(e,t,n,r){switch(Ch(t)){case 2:var s=wh;break;case 8:s=jh;break;default:s=Nh}n=s.bind(null,t,n,e),s=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function nd(e,t,n,r,s){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===s)return;i=i.return}for(;null!==o;){if(null===(i=Ye(o)))return;if(5===(c=i.tag)||6===c||26===c||27===c){r=a=i;continue e}o=o.parentNode}}r=r.return}Ut(function(){var r=a,s=Rt(n),i=[];e:{var o=Nr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Jt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case gr:case vr:case yr:c=un;break;case jr:c=wn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=jn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Nn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),m=d?null!==o?o+"Capture":null:o;d=[];for(var p,f=r;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=Vt(f,m))&&d.push(rd(f,g,p)),h)break;f=f.return}0<d.length&&(o=new c(o,u,null,n,s),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!Ye(u)&&!u[qe])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ye(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?o:$e(c),p=null==u?o:$e(u),(o=new d(g,f+"leave",c,n,s)).target=h,o.relatedTarget=p,g=null,Ye(s)===r&&((d=new d(m,f+"enter",u,n,s)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ad,f=u,p=0,g=m=c;g;g=d(g))p++;g=0;for(var v=f;v;v=d(v))g++;for(;0<p-g;)m=d(m),p--;for(;0<g-p;)f=d(f),g--;for(;p--;){if(m===f||null!==f&&m===f.alternate){d=m;break e}m=d(m),f=d(f)}d=null}else d=null;null!==c&&id(i,o,c,d,!1),null!==u&&null!==h&&id(i,h,u,d,!0)}if("select"===(c=(o=r?$e(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=zn;else if(Ln(o))if(Bn)y=Xn;else{y=Qn;var b=Jn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(y=zn):y=Yn;switch(y&&(y=y(e,r))?On(i,y,n,s):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&xt(o,"number",o.value)),b=r?$e(r):window,e){case"focusin":(Ln(b)||"true"===b.contentEditable)&&(ir=b,or=r,lr=null);break;case"focusout":lr=or=ir=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(i,n,s);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":ur(i,n,s)}var x;if(En)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Dn?An(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Dn&&(x=Kt()):(Ht="value"in(Gt=s)?Gt.value:Gt.textContent,Dn=!0)),0<(b=sd(r,w)).length&&(w=new hn(w,e,null,n,s),i.push({event:w,listeners:b}),x?w.data=x:null!==(x=Pn(n))&&(w.data=x))),(x=Cn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(_n=!0,In);case"textInput":return(e=t.data)===In&&_n?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!En&&An(e,t)?(e=Kt(),Wt=Ht=Gt=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=sd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,s),i.push({event:b,listeners:w}),b.data=x)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var a=Gu((s[Be]||null).action),i=r.submitter;i&&null!==(t=(t=i[Be]||null)?Gu(t.formAction):i.getAttribute("formAction"))&&(a=t,i=null);var o=new nn("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Lu){var e=i?Hu(s,i):new FormData(s);to(n,{pending:!0,data:e,method:s.method,action:a},null,e)}}else"function"===typeof a&&(o.preventDefault(),e=i?Hu(s,i):new FormData(s),to(n,{pending:!0,data:e,method:s.method,action:a},a,e))},currentTarget:s}]})}}(i,e,r,n,s)}Yu(i,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sd(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===a||(null!=(s=Vt(e,n))&&r.unshift(rd(e,s,a)),null!=(s=Vt(e,t))&&r.push(rd(e,s,a))),3===e.tag)return r;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Vt(n,a))&&i.unshift(rd(n,c,l)):s||null!=(c=Vt(n,a))&&i.push(rd(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var od=/\r\n?/g,ld=/\u0000|\uFFFD/g;function cd(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(ld,"")}function ud(e,t){return t=cd(t),cd(e)===t}function dd(e,t,n,r,s,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Ct(e,r,a);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&dd(e,t,"name",s.name,s,null),dd(e,t,"formEncType",s.formEncType,s,null),dd(e,t,"formMethod",s.formMethod,s,null),dd(e,t,"formTarget",s.formTarget,s,null)):(dd(e,t,"encType",s.encType,s,null),dd(e,t,"method",s.method,s,null),dd(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"onScroll":null!=r&&Xu("scroll",e);break;case"onScrollEnd":null!=r&&Xu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Xu("beforetoggle",e),Xu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function hd(e,t,n,r,s,a){switch(n){case"style":Ct(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Xu("scroll",e);break;case"onScrollEnd":null!=r&&Xu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(a=null!=(a=e[Be]||null)?a[n]:null)&&e.removeEventListener(t,a,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function md(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xu("error",e),Xu("load",e);var r,s=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:dd(e,t,r,o,n,null)}}return a&&dd(e,t,"srcSet",n.srcSet,n,null),void(s&&dd(e,t,"src",n.src,n,null));case"input":Xu("invalid",e);var l=r=o=a=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:dd(e,t,s,d,n,null)}}return void bt(e,r,l,c,u,o,a,!1);case"select":for(a in Xu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:dd(e,t,a,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?wt(e,!!s,t,!1):null!=n&&wt(e,!!s,n,!0));case"textarea":for(o in Xu("invalid",e),r=a=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:dd(e,t,o,l,n,null)}return void Nt(e,s,a,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else dd(e,t,c,s,n,null);return;case"dialog":Xu("beforetoggle",e),Xu("toggle",e),Xu("cancel",e),Xu("close",e);break;case"iframe":case"object":Xu("load",e);break;case"video":case"audio":for(s=0;s<Ju.length;s++)Xu(Ju[s],e);break;case"image":Xu("error",e),Xu("load",e);break;case"details":Xu("toggle",e);break;case"embed":case"source":case"link":Xu("error",e),Xu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:dd(e,t,u,s,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&hd(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&dd(e,t,l,s,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fd=null,gd=null;function vd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function xd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wd=null;var jd="function"===typeof setTimeout?setTimeout:void 0,Nd="function"===typeof clearTimeout?clearTimeout:void 0,Sd="function"===typeof Promise?Promise:void 0,Ed="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sd?function(e){return Sd.resolve(null).then(e).catch(kd)}:jd;function kd(e){setTimeout(function(){throw e})}function Cd(e){return"head"===e}function Td(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===r)return e.removeChild(s),void Hh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Ud(e.ownerDocument.documentElement);else if("head"===n){Ud(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var i=a.nextSibling,o=a.nodeName;a[Je]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=i}}else"body"===n&&Ud(e.ownerDocument.body);n=s}while(n);Hh(t)}function Id(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function _d(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":_d(n),Qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ad(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function Dd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Rd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ld=null;function Od(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Rd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=vd(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Ud(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qe(e)}var Vd=new Map,zd=new Set;function Bd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qd=L.d;L.d={f:function(){var e=qd.f(),t=eu();return e||t},r:function(e){var t=Xe(e);null!==t&&5===t.tag&&"form"===t.type?ro(t):qd.r(e)},D:function(e){qd.D(e),Hd("dns-prefetch",e,null)},C:function(e,t){qd.C(e,t),Hd("preconnect",e,t)},L:function(e,t,n){qd.L(e,t,n);var r=Gd;if(r&&e&&t){var s='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+vt(n.imageSizes)+'"]')):s+='[href="'+vt(e)+'"]';var a=s;switch(t){case"style":a=Kd(e);break;case"script":a=Yd(e)}Vd.has(a)||(e=m({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Vd.set(a,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Jd(a))||"script"===t&&r.querySelector(Xd(a))||(md(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){qd.m(e,t);var n=Gd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',a=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Yd(e)}if(!Vd.has(a)&&(e=m({rel:"modulepreload",href:e},t),Vd.set(a,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xd(a)))return}md(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){qd.X(e,t);var n=Gd;if(n&&e){var r=Ze(n).hoistableScripts,s=Yd(e),a=r.get(s);a||((a=n.querySelector(Xd(s)))||(e=m({src:e,async:!0},t),(t=Vd.get(s))&&th(e,t),et(a=n.createElement("script")),md(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}},S:function(e,t,n){qd.S(e,t,n);var r=Gd;if(r&&e){var s=Ze(r).hoistableStyles,a=Kd(e);t=t||"default";var i=s.get(a);if(!i){var o={loading:0,preload:null};if(i=r.querySelector(Jd(a)))o.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Vd.get(a))&&eh(e,n);var l=i=r.createElement("link");et(l),md(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:o},s.set(a,i)}}},M:function(e,t){qd.M(e,t);var n=Gd;if(n&&e){var r=Ze(n).hoistableScripts,s=Yd(e),a=r.get(s);a||((a=n.querySelector(Xd(s)))||(e=m({src:e,async:!0,type:"module"},t),(t=Vd.get(s))&&th(e,t),et(a=n.createElement("script")),md(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}};var Gd="undefined"===typeof document?null:document;function Hd(e,t,n){var r=Gd;if(r&&"string"===typeof t&&t){var s=vt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),zd.has(s)||(zd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(md(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Wd(e,t,n,r){var s,a,o,l,c=(c=W.current)?Bd(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Jd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Vd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Vd.set(e,n),u||(s=c,a=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=s.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),md(a,"link",o),et(a),s.head.appendChild(a))))),t&&null===r)throw Error(i(528,""));return d}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Kd(e){return'href="'+vt(e)+'"'}function Jd(e){return'link[rel="stylesheet"]['+e+"]"}function Qd(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+vt(e)+'"]'}function Xd(e){return"script[async]"+e}function $d(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var s=m({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),md(r,"style",s),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Kd(n.href);var a=e.querySelector(Jd(s));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=Qd(n),(s=Vd.get(s))&&eh(r,s),et(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),md(a,"link",r),t.state.loading|=4,Zd(a,n.precedence,e),t.instance=a;case"script":return a=Yd(n.src),(s=e.querySelector(Xd(a)))?(t.instance=s,et(s),s):(r=n,(s=Vd.get(a))&&th(r=m({},n),s),et(s=(e=e.ownerDocument||e).createElement("script")),md(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,a=s,i=0;i<r.length;i++){var o=r[i];if(o.dataset.precedence===t)a=o;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nh=null;function rh(e,t,n){if(null===nh){var r=new Map,s=nh=new Map;s.set(n,r)}else(r=(s=nh).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var a=n[s];if(!(a[Je]||a[ze]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var i=a.getAttribute(t)||"";i=e+i;var o=r.get(i);o?o.push(a):r.set(i,[a])}}return r}function sh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ih=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(uh,e),lh=null,oh.call(e))}function uh(e,t){if(!(4&t.state.loading)){var n=lh.get(e);if(n)var r=n.get(null);else{n=new Map,lh.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var i=s[a];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(s=t.instance).getAttribute("data-precedence"),(a=n.get(i)||r)===r&&n.set(null,s),n.set(i,s),this.count++,r=oh.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),a?a.parentNode.insertBefore(s,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var dh={$$typeof:w,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function hh(e,t,n,r,s,a,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function mh(e,t,n,r,s,a,i,o,l,c,u,d){return e=new hh(e,t,n,i,l,c,u,d,o),t=1,!0===a&&(t|=24),a=Fr(3,null,null,t),e.current=a,a.stateNode=e,(t=Vs()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},va(a),e}function ph(e){return e?e=Or:Or}function fh(e,t,n,r,s,a){s=ph(s),null===r.context?r.context=s:r.pendingContext=s,(r=ba(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=xa(e,r,t))&&(Qc(n,0,t),wa(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function vh(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Dr(e,67108864);null!==t&&Qc(t,0,67108864),vh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Kc(),n=Dr(e,t=Oe(t));null!==n&&Qc(n,0,t),vh(e,t)}}var xh=!0;function wh(e,t,n,r){var s=R.T;R.T=null;var a=L.p;try{L.p=2,Nh(e,t,n,r)}finally{L.p=a,R.T=s}}function jh(e,t,n,r){var s=R.T;R.T=null;var a=L.p;try{L.p=8,Nh(e,t,n,r)}finally{L.p=a,R.T=s}}function Nh(e,t,n,r){if(xh){var s=Sh(r);if(null===s)nd(e,t,r,Eh,n),Oh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ih=Mh(Ih,e,t,n,r,s),!0;case"dragenter":return _h=Mh(_h,e,t,n,r,s),!0;case"mouseover":return Ah=Mh(Ah,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Ph.set(a,Mh(Ph.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Dh.set(a,Mh(Dh.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Oh(e,r),4&t&&-1<Lh.indexOf(e)){for(;null!==s;){var a=Xe(s);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var i=ke(a.pendingLanes);if(0!==i){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-xe(i);o.entanglements[1]|=l,i&=~l}Ou(a),0===(6&pc)&&(Lc=le()+500,Mu(0,!1))}}break;case 31:case 13:null!==(o=Dr(a,2))&&Qc(o,0,2),eu(),vh(a,2)}if(null===(a=Sh(r))&&nd(e,t,r,Eh,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else nd(e,t,r,null,n)}}function Sh(e){return kh(e=Rt(e))}var Eh=null;function kh(e){if(Eh=null,null!==(e=Ye(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Eh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case me:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Th=!1,Ih=null,_h=null,Ah=null,Ph=new Map,Dh=new Map,Rh=[],Lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Oh(e,t){switch(e){case"focusin":case"focusout":Ih=null;break;case"dragenter":case"dragleave":_h=null;break;case"mouseover":case"mouseout":Ah=null;break;case"pointerover":case"pointerout":Ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(t.pointerId)}}function Mh(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=Xe(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Fh(e){var t=Ye(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Ue(e.priority,function(){bh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ue(e.priority,function(){bh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Uh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sh(e.nativeEvent);if(null!==n)return null!==(t=Xe(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Vh(e,t,n){Uh(e)&&n.delete(t)}function zh(){Th=!1,null!==Ih&&Uh(Ih)&&(Ih=null),null!==_h&&Uh(_h)&&(_h=null),null!==Ah&&Uh(Ah)&&(Ah=null),Ph.forEach(Vh),Dh.forEach(Vh)}function Bh(e,t){e.blockedOn===t&&(e.blockedOn=null,Th||(Th=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zh)))}var qh=null;function Gh(e){qh!==e&&(qh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qh===e&&(qh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===kh(r||n))continue;break}var a=Xe(n);null!==a&&(e.splice(t,3),t-=3,to(a,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Hh(e){function t(t){return Bh(t,e)}null!==Ih&&Bh(Ih,e),null!==_h&&Bh(_h,e),null!==Ah&&Bh(Ah,e),Ph.forEach(t),Dh.forEach(t);for(var n=0;n<Rh.length;n++){var r=Rh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Rh.length&&null===(n=Rh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Rh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],a=n[r+1],i=s[Be]||null;if("function"===typeof a)i||Gh(n);else if(i){var o=null;if(a&&a.hasAttribute("formAction")){if(s=a,i=a[Be]||null)o=i.formAction;else if(null!==kh(s))continue}else o=i.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Gh(n)}}}function Wh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Kh(e){this._internalRoot=e}function Jh(e){this._internalRoot=e}Jh.prototype.render=Kh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));fh(t.current,Kc(),e,t,null,null)},Jh.prototype.unmount=Kh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fh(e.current,2,null,e,null,null),eu(),t[qe]=null}},Jh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rh.length&&0!==t&&t<Rh[n].priority;n++);Rh.splice(n,0,e),0===n&&Fh(e)}};var Qh=s.version;if("19.2.3"!==Qh)throw Error(i(527,Qh,"19.2.3"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return d(s),e;if(a===r)return d(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Yh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{ve=Xh.inject(Yh),ye=Xh}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(i(299));var n=!1,r="",s=Eo,a=ko,l=Co;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=mh(e,1,!1,null,0,n,r,null,s,a,l,Wh),e[qe]=t.current,ed(e),new Kh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(i(299));var r=!1,s="",a=Eo,l=ko,c=Co,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=mh(e,1,!0,t,0,r,s,u,a,l,c,Wh)).context=ph(null),n=t.current,(s=ba(r=Oe(r=Kc()))).callback=null,xa(n,s,r),n=r,t.current.lanes=n,Pe(t,n),Ou(t),e[qe]=t.current,ed(e),new Jh(t)},t.version="19.2.3"},43(e,t,n){e.exports=n(288)},288(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=x.prototype=new b;w.constructor=x,g(w,y.prototype),w.isPureReactComponent=!0;var j=Array.isArray;function N(){}var S={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function k(e,t,r){var s=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:r}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,s,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return _((u=e._init)(e._payload),t,s,a,i)}}if(u)return i=i(e),u=""===a?"."+I(e,0):a,j(i)?(s="",null!=u&&(s=u.replace(T,"$&/")+"/"),_(i,t,s,"",function(e){return e})):null!=i&&(C(i)&&(l=i,c=s+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+u,i=k(l.type,c,l.props)),t.push(i)),1;u=0;var d,m=""===a?".":a+":";if(j(e))for(var f=0;f<e.length;f++)u+=_(a=e[f],t,s,o=m+I(a,f),i);else if("function"===typeof(f=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=f.call(e),f=0;!(a=e.next()).done;)u+=_(a=a.value,t,s,o=m+I(a,f++),i);else if("object"===o){if("function"===typeof e.then)return _(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,a,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],s=0;return _(e,r,"","",function(e){return t.call(n,e,s++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},R={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=m,t.Children=R,t.Component=y,t.Fragment=s,t.Profiler=i,t.PureComponent=x,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key;if(null!=t)for(a in void 0!==t.key&&(s=""+t.key),t)!E.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var i=Array(a),o=0;o<a;o++)i[o]=arguments[o+2];r.children=i}return k(e.type,s,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var i=arguments.length-2;if(1===i)s.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===s[r]&&(s[r]=i[r]);return k(e,a,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),s=S.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(N,D)}catch(a){D(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useEffectEvent=function(e){return S.H.useEffectEvent(e)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.2.3"},391(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579(e,t,n){e.exports=n(799)},672(e,t,n){var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=i.p;try{if(l.T=null,i.p=2,e)return e()}finally{l.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:a}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},799(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853(e,t,n){e.exports=n(896)},896(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<s&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,f=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function j(e){if(g=!1,w(e),!f)if(null!==r(c))f=!0,S||(S=!0,N());else{var t=r(u);null!==t&&P(j,t.startTime-e)}}var N,S=!1,E=-1,k=5,C=-1;function T(){return!!v||!(t.unstable_now()-C<k)}function I(){if(v=!1,S){var e=t.unstable_now();C=e;var n=!0;try{e:{f=!1,g&&(g=!1,b(E),E=-1),p=!0;var a=m;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&s(c),w(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(j,l.startTime-e),n=!1}}break e}finally{h=null,m=a,p=!1}n=void 0}}finally{n?N():S=!1}}}if("function"===typeof x)N=function(){x(I)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,A=_.port2;_.port1.onmessage=I,N=function(){A.postMessage(null)}}else N=function(){y(I,0)};function P(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(E),E=-1):g=!0,P(j,a-i))):(e.sortIndex=o,n(c,e),f||p||(f=!0,S||(S=!0,N()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".cebfac77.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="christ-soldiers-talent-test-manager:";n.l=(r,s,a,i)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(m);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/christ-soldiers-talent-test/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var a=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=a);var i=n.p+n.u(t),o=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,a,[i,o,l]=r,c=0;if(i.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkchrist_soldiers_talent_test_manager=self.webpackChunkchrist_soldiers_talent_test_manager||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),s=n.t(r,2),a=n(391);function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const h=["sri"],m=["page"],p=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],g=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],v=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var y="popstate";function b(){return k(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=E(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),N("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:S(t))},function(e,t){w("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function x(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function j(e,t){return{usr:e.state,key:e.key,idx:t}}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return d(d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?E(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function E(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function k(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,c=u();function u(){return(i.state||{idx:null}).idx}function h(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function m(e){return C(e)}null==c&&(c=0,i.replaceState(d(d({},i.state),{},{idx:c}),""));let p={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(y,h),l=e,()=>{s.removeEventListener(y,h),l=null}},createHref:e=>t(s,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=N(p.location,e,t);n&&n(r,e),c=u()+1;let d=j(r,c),h=p.createHref(r);try{i.pushState(d,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;s.location.assign(h)}a&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let r=N(p.location,e,t);n&&n(r,e),c=u();let s=j(r,c),d=p.createHref(r);i.replaceState(s,"",d),a&&l&&l({action:o,location:p.location,delta:0})},go:e=>i.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),x(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:S(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function T(e,t){return I(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function I(e,t,n,r){let s=G(("string"===typeof t?E(t):t).pathname||"/",n);if(null==s)return null;let a=_(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=q(s);i=V(a[o],e,r)}return i}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;x(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=$([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(x(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),_(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:U(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of A(e.path))a(e,t,!0,r);else a(e,t)}),t}function A(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=A(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var P=/^:[\w-]+$/,D=3,R=2,L=1,O=10,M=-2,F=e=>"*"===e;function U(e,t){let n=e.split("/"),r=n.length;return n.some(F)&&(r+=M),t&&(r+=R),n.filter(e=>!F(e)).reduce((e,t)=>e+(P.test(t)?D:""===t?L:O),r)}function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=z({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=z({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:$([a,u.pathname]),pathnameBase:Z($([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=$([a,u.pathnameBase]))}return i}function z(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function q(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return w(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function G(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var H=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W=e=>H.test(e);function K(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function J(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Q(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Y(e){let t=Q(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function X(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=E(e):(r=d({},e),x(!r.pathname||!r.pathname.includes("?"),J("?","pathname","search",r)),x(!r.pathname||!r.pathname.includes("#"),J("#","pathname","hash",r)),x(!r.search||!r.search.includes("#"),J("#","search","hash",r)));let a,i=""===e||""===r.pathname,o=i?"/":r.pathname;if(null==o)a=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:s="",hash:a=""}="string"===typeof e?E(e):e;if(r)if(W(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),w(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?K(r.substring(1),"/"):K(r,n)}else t=n;return{pathname:t,search:ee(s),hash:te(a)}}(r,a),c=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var $=e=>e.join("/").replace(/\/\/+/g,"/"),Z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ee=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",te=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ne=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function re(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function se(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ae="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function ie(e,t){let n=e;if("string"!==typeof n||!H.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(ae)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=G(r.pathname,t);r.origin===e.origin&&null!=a?n=a+r.search+r.hash:s=!0}catch(a){w(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:r,isExternal:s,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oe=["POST","PUT","PATCH","DELETE"],le=(new Set(oe),["GET",...oe]);new Set(le),Symbol("ResetLoaderData");var ce=r.createContext(null);ce.displayName="DataRouter";var ue=r.createContext(null);ue.displayName="DataRouterState";var de=r.createContext(!1);function he(){return r.useContext(de)}var me=r.createContext({isTransitioning:!1});me.displayName="ViewTransition";var pe=r.createContext(new Map);pe.displayName="Fetchers";var fe=r.createContext(null);fe.displayName="Await";var ge=r.createContext(null);ge.displayName="Navigation";var ve=r.createContext(null);ve.displayName="Location";var ye=r.createContext({outlet:null,matches:[],isDataRoute:!1});ye.displayName="Route";var be=r.createContext(null);be.displayName="RouteError";var xe="REACT_ROUTER_ERROR";function we(){return null!=r.useContext(ve)}function je(){return x(we(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ve).location}var Ne="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Se(e){r.useContext(ge).static||r.useLayoutEffect(e)}function Ee(){let{isDataRoute:e}=r.useContext(ye);return e?function(){let{router:e}=Me("useNavigate"),t=Ue("useNavigate"),n=r.useRef(!1);Se(()=>{n.current=!0});let s=r.useCallback(async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(n.current,Ne),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,d({fromRouteId:t},s)))},[e,t]);return s}():function(){x(we(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(ce),{basename:t,navigator:n}=r.useContext(ge),{matches:s}=r.useContext(ye),{pathname:a}=je(),i=JSON.stringify(Y(s)),o=r.useRef(!1);Se(()=>{o.current=!0});let l=r.useCallback(function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(w(o.current,Ne),!o.current)return;if("number"===typeof r)return void n.go(r);let l=X(r,JSON.parse(i),a,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:$([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)},[t,n,i,a,e]);return l}()}r.createContext(null);function ke(){let{matches:e}=r.useContext(ye),t=e[e.length-1];return t?t.params:{}}function Ce(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ye),{pathname:s}=je(),a=JSON.stringify(Y(n));return r.useMemo(()=>X(e,JSON.parse(a),s,"path"===t),[e,a,s,t])}function Te(e,t,n,s,a){x(we(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=r.useContext(ge),{matches:o}=r.useContext(ye),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let e=m&&m.path||"";Be(u,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=je();if(t){var g;let e="string"===typeof t?E(t):t;x("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let v=p.pathname||"/",y=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=T(e,{pathname:y});w(m||null!=b,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),w(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let j=Le(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:$([h,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:$([h,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,s,a);return t&&j?r.createElement(ve.Provider,{value:{location:d({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},j):j}function Ie(){let e=Ve(),t=re(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:i},"ErrorBoundary")," or"," ",r.createElement("code",{style:i},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,o)}var _e=r.createElement(Ie,null),Ae=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(xe,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ne(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?r.createElement(ye.Provider,{value:this.props.routeContext},r.createElement(be.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?r.createElement(De,{error:e},t):t}};Ae.contextType=de;var Pe=new WeakMap;function De(e){let{children:t,error:n}=e,{basename:s}=r.useContext(ge);if("object"===typeof n&&n&&"digest"in n&&"string"===typeof n.digest){let e=function(e){if(e.startsWith("".concat(xe,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(n.digest);if(e){let t=Pe.get(n);if(t)throw t;let a=ie(e.location,s);if(ae&&!Pe.get(n)){if(!a.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:e.replace}));throw Pe.set(n,t),t}window.location.href=a.absoluteURL||a.to}return r.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(a.absoluteURL||a.to)})}}return t}function Re(e){let{routeContext:t,match:n,children:s}=e,a=r.useContext(ce);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ye.Provider,{value:t},s)}function Le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=a.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));x(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let o=!1,l=-1;if(n)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){o=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}let c=n&&s?(e,t)=>{var r,a;s(e,{location:n.location,params:null!==(r=null===(a=n.matches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.params)&&void 0!==r?r:{},unstable_pattern:se(n.matches),errorInfo:t})}:void 0;return a.reduceRight((e,s,u)=>{let d,h=!1,m=null,p=null;n&&(d=i&&s.route.id?i[s.route.id]:void 0,m=s.route.errorElement||_e,o&&(l<0&&0===u?(Be("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=s.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,u+1)),g=()=>{let t;return t=d?m:h?p:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:e,r.createElement(Re,{match:s,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===u)?r.createElement(Ae,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:c}):g()},null)}function Oe(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Me(e){let t=r.useContext(ce);return x(t,Oe(e)),t}function Fe(e){let t=r.useContext(ue);return x(t,Oe(e)),t}function Ue(e){let t=function(e){let t=r.useContext(ye);return x(t,Oe(e)),t}(e),n=t.matches[t.matches.length-1];return x(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ve(){var e;let t=r.useContext(be),n=Fe("useRouteError"),s=Ue("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[s]}var ze={};function Be(e,t,n){t||ze[e]||(ze[e]=!0,w(!1,n))}var qe={};function Ge(e,t){e||qe[t]||(qe[t]=!0,console.warn(t))}s.useOptimistic;r.memo(function(e){let{routes:t,future:n,state:r,onError:s}=e;return Te(t,void 0,r,s,n)});function He(e){let{to:t,replace:n,state:s,relative:a}=e;x(we(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=r.useContext(ge);w(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=r.useContext(ye),{pathname:l}=je(),c=Ee(),u=X(t,Y(o),l,"path"===a),d=JSON.stringify(u);return r.useEffect(()=>{c(JSON.parse(d),{replace:n,state:s,relative:a})},[c,d,a,n,s]),null}function We(e){x(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ke(e){let{basename:t="/",children:n=null,location:s,navigationType:a="POP",navigator:i,static:o=!1,unstable_useTransitions:l}=e;x(!we(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:c,navigator:i,static:o,unstable_useTransitions:l,future:{}}),[c,i,o,l]);"string"===typeof s&&(s=E(s));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:f="default"}=s,g=r.useMemo(()=>{let e=G(d,c);return null==e?null:{location:{pathname:e,search:h,hash:m,state:p,key:f},navigationType:a}},[c,d,h,m,p,f,a]);return w(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(m,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:r.createElement(ge.Provider,{value:u},r.createElement(ve.Provider,{children:n,value:g}))}function Je(e){let{children:t,location:n}=e;return Te(Qe(t),n)}r.Component;function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let a=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,Qe(e.props.children,a));x(e.type===We,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),x(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Qe(e.props.children,a)),n.push(i)}),n}var Ye="get",Xe="application/x-www-form-urlencoded";function $e(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var Ze=null;var et=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tt(e){return null==e||et.has(e)?e:(w(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Xe,'"')),null)}function nt(e,t){let n,r,s,a,i;if($e(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?G(i,t):null,n=e.getAttribute("method")||Ye,s=tt(e.getAttribute("enctype"))||Xe,a=new FormData(e)}else if(function(e){return $e(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return $e(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?G(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Ye,s=tt(e.getAttribute("formenctype"))||tt(i.getAttribute("enctype"))||Xe,a=new FormData(i,e),!function(){if(null===Ze)try{new FormData(document.createElement("form"),0),Ze=!1}catch(e){Ze=!0}return Ze}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,r)}}else{if($e(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ye,r=null,s=Xe,i=e}var o;return a&&"text/plain"===s&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function rt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function st(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===G(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function at(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function it(e){return null!=e&&"string"===typeof e.page}function ot(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function lt(e,t,n,r,s,a){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function ct(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function ut(e,t){let n=new Set,r=new Set(t);return e.reduce((e,s)=>{if(t&&!it(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(a)||(n.add(a),e.push({key:a,link:s})),e},[])}function dt(e,t){return"lazy"===e.mode&&!0===t}function ht(){let e=r.useContext(ce);return rt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function mt(){let e=r.useContext(ue);return rt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var pt=r.createContext(void 0);function ft(){let e=r.useContext(pt);return rt(e,"You must render this element inside a <HydratedRouter> element"),e}function gt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function vt(e,t,n){if(n&&!wt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}pt.displayName="FrameworkContext";function yt(e){let{page:t}=e,n=i(e,m),{router:s}=ht(),a=r.useMemo(()=>T(s.routes,t,s.basename),[s.routes,t,s.basename]);return a?r.createElement(xt,d({page:t,matches:a},n)):null}function bt(e){let{manifest:t,routeModules:n}=ft(),[s,a]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return ut((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await at(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(ot).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?d(d({},e),{},{rel:"prefetch",as:"style"}):d(d({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||a(e)}),()=>{r=!0}},[e,t,n]),s}function xt(e){let{page:t,matches:n}=e,s=i(e,p),a=je(),{manifest:o,routeModules:l}=ft(),{basename:c}=ht(),{loaderData:u,matches:h}=mt(),m=r.useMemo(()=>lt(t,n,h,o,a,"data"),[t,n,h,o,a]),f=r.useMemo(()=>lt(t,n,h,o,a,"assets"),[t,n,h,o,a]),g=r.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let s=o.routes[t.route.id];s&&s.hasLoader&&(!m.some(e=>e.route.id===t.route.id)&&t.route.id in u&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||s.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let s=st(t,c,"data");return r&&e.size>0&&s.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[s.pathname+s.search]},[c,u,a,o,m,n,t,l]),v=r.useMemo(()=>ct(f,o),[f,o]),y=bt(f);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",d({key:e,rel:"prefetch",as:"fetch",href:e},s))),v.map(e=>r.createElement("link",d({key:e,rel:"modulepreload",href:e},s))),y.map(e=>{let{key:t,link:n}=e;return r.createElement("link",d({key:t,nonce:s.nonce},n))}))}var wt=!1;function jt(e){let{manifest:t,serverHandoffString:n,isSpaMode:s,renderMeta:a,routeDiscovery:o,ssr:l}=ft(),{router:c,static:u,staticContext:m}=ht(),{matches:p}=mt(),f=he(),g=dt(o,l);a&&(a.didRenderScripts=!0);let v=vt(p,null,s);r.useEffect(()=>{wt=!0},[]);let y=r.useMemo(()=>{var s;if(f)return null;let a=m?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=u?"".concat(null!==(s=t.hmr)&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,n)=>{let r="route".concat(n),s=t.routes[e.route.id];rt(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:i,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,u=[...a?[{module:a,varName:"".concat(r,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=i(e,h),s=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(a.pop();a.length>0;)o.push("/".concat(a.join("/"))),a.pop();o.forEach(e=>{let n=T(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let l=[...s].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return d(d({},r),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",d(d({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:void 0})),r.createElement("script",d(d({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))},[]),b=wt||f?[]:(x=t.entry.imports.concat(ct(v,t,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let w="object"===typeof t.sri?t.sri:{};return Ge(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),wt||f?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),y)}function Nt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function St(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let s,a=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(re(t))return r.createElement(Et,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),a);if(t instanceof Error)s=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);s=new Error(e)}return r.createElement(Et,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),a)}function Et(e){var t;let{title:n,renderScripts:s,isOutsideRemixApp:a,children:i}=e,{routeModules:o}=ft();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!a?i:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,s?r.createElement(jt,null):null)))}var kt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{kt&&(window.__reactRouterVersion="7.11.0")}catch(xy){}function Ct(e){let{basename:t,children:n,unstable_useTransitions:s,window:a}=e,i=r.useRef();null==i.current&&(i.current=b({window:a,v5Compat:!0}));let o=i.current,[l,c]=r.useState({action:o.action,location:o.location}),u=r.useCallback(e=>{!1===s?c(e):r.startTransition(()=>c(e))},[s]);return r.useLayoutEffect(()=>o.listen(u),[o,u]),r.createElement(Ke,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:s})}var Tt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,It=r.forwardRef(function(e,t){let{onClick:n,discover:s="render",prefetch:a="none",relative:o,reloadDocument:l,replace:c,state:u,target:h,to:m,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v}=e,y=i(e,f),{basename:b,unstable_useTransitions:w}=r.useContext(ge),j="string"===typeof m&&Tt.test(m),N=ie(m,b);m=N.to;let E=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(we(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=r.useContext(ge),{hash:a,pathname:i,search:o}=Ce(e,{relative:t}),l=i;return"/"!==n&&(l="/"===i?n:$([n,i])),s.createHref({pathname:l,search:o,hash:a})}(m,{relative:o}),[k,C,T]=function(e,t){let n=r.useContext(pt),[s,a]=r.useState(!1),[i,o]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,m=r.useRef(null);r.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let p=()=>{a(!0)},f=()=>{a(!1),o(!1)};return n?"intent"!==e?[i,m,{}]:[i,m,{onFocus:gt(l,p),onBlur:gt(c,f),onMouseEnter:gt(u,p),onMouseLeave:gt(d,f),onTouchStart:gt(h,p)}]:[!1,m,{}]}(a,y),I=function(e){let{target:t,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=Ee(),d=je(),h=Ce(e,{relative:i});return r.useCallback(m=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(m,t)){m.preventDefault();let t=void 0!==n?n:S(d)===S(h),p=()=>u(e,{replace:t,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?r.startTransition(()=>p()):p()}},[d,u,h,n,s,t,e,a,i,o,l,c])}(m,{replace:c,state:u,target:h,preventScrollReset:p,relative:o,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:w});let _=r.createElement("a",d(d(d({},y),T),{},{href:N.absoluteURL||E,onClick:N.isExternal||l?n:function(e){n&&n(e),e.defaultPrevented||I(e)},ref:Nt(t,C),target:h,"data-discover":j||"render"!==s?void 0:"true"}));return k&&!j?r.createElement(r.Fragment,null,_,r.createElement(yt,{page:E})):_});It.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:u,children:h}=e,m=i(e,g),p=Ce(c,{relative:m.relative}),f=je(),v=r.useContext(ue),{navigator:y,basename:b}=r.useContext(ge),w=null!=v&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(me);x(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Pt("useViewTransitionState"),a=Ce(e,{relative:t});if(!n.isTransitioning)return!1;let i=G(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=G(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=z(a.pathname,o)||null!=z(a.pathname,i)}(p)&&!0===u,j=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,N=f.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(N=N.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&b&&(S=G(S,b)||S);const E="/"!==j&&j.endsWith("/")?j.length-1:j.length;let k,C=N===j||!o&&N.startsWith(j)&&"/"===N.charAt(E),T=null!=S&&(S===j||!o&&S.startsWith(j)&&"/"===S.charAt(j.length)),I={isActive:C,isPending:T,isTransitioning:w},_=C?n:void 0;k="function"===typeof a?a(I):[a,C?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(I):l;return r.createElement(It,d(d({},m),{},{"aria-current":_,className:k,ref:t,style:A,to:c,viewTransition:u}),"function"===typeof h?h(I):h)}).displayName="NavLink";var _t=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:s,navigate:a,reloadDocument:o,replace:l,state:c,method:u=Ye,action:h,onSubmit:m,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:y}=e,b=i(e,v),{unstable_useTransitions:w}=r.useContext(ge),j=Lt(),N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(ge),s=r.useContext(ye);x(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i=d({},Ce(e||".",{relative:t})),o=je();if(null==e){i.search=o.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();i.search=n?"?".concat(n):""}}e&&"."!==e||!a.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:$([n,i.pathname]));return S(i)}(h,{relative:p}),E="get"===u.toLowerCase()?"get":"post",k="string"===typeof h&&Tt.test(h);return r.createElement("form",d(d({ref:t,method:E,action:N,onSubmit:o?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u,i=()=>j(t||e.currentTarget,{fetcherKey:s,method:n,navigate:a,replace:l,state:c,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:y});w&&!1!==a?r.startTransition(()=>i()):i()}},b),{},{"data-discover":k||"render"!==n?void 0:"true"}))});function At(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Pt(e){let t=r.useContext(ce);return x(t,At(e)),t}_t.displayName="Form";var Dt=0,Rt=()=>"__".concat(String(++Dt),"__");function Lt(){let{router:e}=Pt("useSubmit"),{basename:t}=r.useContext(ge),n=Ue("useRouteId"),s=e.fetch,a=e.navigate;return r.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:o,encType:l,formData:c,body:u}=nt(e,t);if(!1===r.navigate){let e=r.fetcherKey||Rt();await s(e,n,r.action||i,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await a(r.action||i,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[s,a,t,n])}const Ot=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Mt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],a=s+1<e.length,i=a?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ot(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const i=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==i||null==o)throw new Ft;const l=t<<2|a>>4;if(r.push(l),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==o){const e=i<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ft extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ut=function(e){return function(e){const t=Ot(e);return Mt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Vt=function(e){try{return Mt.decodeString(e,!0)}catch(xy){console.error("base64Decode failed: ",xy)}return null};function zt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Bt=()=>{try{return zt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/christ-soldiers-talent-test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAuRvDyTlGQY7pF0tZSjNL40ht7d94lBB0",REACT_APP_FIREBASE_AUTH_DOMAIN:"bga-cs-talent-test-app.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"bga-cs-talent-test-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"bga-cs-talent-test-app.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"588423733482",REACT_APP_FIREBASE_APP_ID:"1:588423733482:web:c62cd3acf645875f77f793",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2X6ZPX2Q5N",REACT_APP_IS_DEMO:"false"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(xy){return}const t=e&&Vt(e[1]);return t&&JSON.parse(t)})()}catch(xy){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(xy))}},qt=e=>{var t;return null===(t=Bt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Gt=()=>{var e;return null===(e=Bt())||void 0===e?void 0:e.config},Ht=e=>{var t;return null===(t=Bt())||void 0===t?void 0:t["_".concat(e)]};class Wt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Kt(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Jt(e){return(await fetch(e,{credentials:"include"})).ok}const Qt={};let Yt=!1;function Xt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Kt(window.location.host)||Qt[e]===t||Qt[e]||Yt)return;function n(e){return"__firebase__banner__".concat(e)}Qt[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Qt))Qt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function a(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Yt=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function i(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),i=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=a();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,i,l,n),document.body.appendChild(t)}s?(i.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',i.innerText="Preview backend running in this workspace."),i.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",i):i()}function $t(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Zt(){var e;const t=null===(e=Bt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(xy){return!1}}function en(){return!Zt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tn(){try{return"object"===typeof indexedDB}catch(xy){return!1}}class nn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}}class rn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(sn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new nn(n,a,t)}}const sn=/\{\$([^}]+)}/g;function an(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],a=t[s];if(on(n)&&on(a)){if(!an(n,a))return!1}else if(n!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function on(e){return null!==e&&"object"===typeof e}function ln(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function cn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function un(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class dn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=hn),void 0===r.error&&(r.error=hn),void 0===r.complete&&(r.complete=hn);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(xy){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(xy){"undefined"!==typeof console&&console.error&&console.error(xy)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hn(){}function mn(e){return e&&e._delegate?e._delegate:e}class pn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fn="[DEFAULT]";class gn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Wt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(xy){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(xy){if(r)return null;throw xy}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:fn})}catch(xy){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(xy){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===fn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;return this.component?this.component.multipleInstances?e:fn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class vn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const yn=[];var bn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(bn||(bn={}));const xn={debug:bn.DEBUG,verbose:bn.VERBOSE,info:bn.INFO,warn:bn.WARN,error:bn.ERROR,silent:bn.SILENT},wn=bn.INFO,jn={[bn.DEBUG]:"log",[bn.VERBOSE]:"log",[bn.INFO]:"info",[bn.WARN]:"warn",[bn.ERROR]:"error"},Nn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=jn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class Sn{constructor(e){this.name=e,this._logLevel=wn,this._logHandler=Nn,this._userLogHandler=null,yn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?xn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.DEBUG,...t),this._logHandler(this,bn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.VERBOSE,...t),this._logHandler(this,bn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.INFO,...t),this._logHandler(this,bn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.WARN,...t),this._logHandler(this,bn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.ERROR,...t),this._logHandler(this,bn.ERROR,...t)}}let En,kn;const Cn=new WeakMap,Tn=new WeakMap,In=new WeakMap,_n=new WeakMap,An=new WeakMap;let Pn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Tn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||In.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ln(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Dn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(kn||(kn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(On(this),n),Ln(Cn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ln(e.apply(On(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const a=e.call(On(this),t,...r);return In.set(a,t.sort?t.sort():[t]),Ln(a)}}function Rn(e){return"function"===typeof e?Dn(e):(e instanceof IDBTransaction&&function(e){if(Tn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});Tn.set(e,t)}(e),t=e,(En||(En=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Pn):e);var t}function Ln(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(Ln(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&Cn.set(t,e)}).catch(()=>{}),An.set(t,e),t}(e);if(_n.has(e))return _n.get(e);const t=Rn(e);return t!==e&&(_n.set(e,t),An.set(t,e)),t}const On=e=>An.get(e);const Mn=["get","getKey","getAll","getAllKeys","count"],Fn=["put","add","delete","clear"],Un=new Map;function Vn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Un.get(t))return Un.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Fn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Mn.includes(n))return;const a=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let a=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),s&&t.done]))[0]};return Un.set(t,a),a}Pn=(e=>d(d({},e),{},{get:(t,n,r)=>Vn(t,n)||e.get(t,n,r),has:(t,n)=>!!Vn(t,n)||e.has(t,n)}))(Pn);class zn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Bn="@firebase/app",qn="0.14.6",Gn=new Sn("@firebase/app"),Hn="@firebase/app-compat",Wn="@firebase/analytics-compat",Kn="@firebase/analytics",Jn="@firebase/app-check-compat",Qn="@firebase/app-check",Yn="@firebase/auth",Xn="@firebase/auth-compat",$n="@firebase/database",Zn="@firebase/data-connect",er="@firebase/database-compat",tr="@firebase/functions",nr="@firebase/functions-compat",rr="@firebase/installations",sr="@firebase/installations-compat",ar="@firebase/messaging",ir="@firebase/messaging-compat",or="@firebase/performance",lr="@firebase/performance-compat",cr="@firebase/remote-config",ur="@firebase/remote-config-compat",dr="@firebase/storage",hr="@firebase/storage-compat",mr="@firebase/firestore",pr="@firebase/ai",fr="@firebase/firestore-compat",gr="firebase",vr="[DEFAULT]",yr={[Bn]:"fire-core",[Hn]:"fire-core-compat",[Kn]:"fire-analytics",[Wn]:"fire-analytics-compat",[Qn]:"fire-app-check",[Jn]:"fire-app-check-compat",[Yn]:"fire-auth",[Xn]:"fire-auth-compat",[$n]:"fire-rtdb",[Zn]:"fire-data-connect",[er]:"fire-rtdb-compat",[tr]:"fire-fn",[nr]:"fire-fn-compat",[rr]:"fire-iid",[sr]:"fire-iid-compat",[ar]:"fire-fcm",[ir]:"fire-fcm-compat",[or]:"fire-perf",[lr]:"fire-perf-compat",[cr]:"fire-rc",[ur]:"fire-rc-compat",[dr]:"fire-gcs",[hr]:"fire-gcs-compat",[mr]:"fire-fst",[fr]:"fire-fst-compat",[pr]:"fire-vertex","fire-js":"fire-js",[gr]:"fire-js-all"},br=new Map,xr=new Map,wr=new Map;function jr(e,t){try{e.container.addComponent(t)}catch(xy){Gn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),xy)}}function Nr(e){const t=e.name;if(wr.has(t))return Gn.debug("There were multiple attempts to register component ".concat(t,".")),!1;wr.set(t,e);for(const n of br.values())jr(n,e);for(const n of xr.values())jr(n,e);return!0}function Sr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Er(e){return null!==e&&void 0!==e&&void 0!==e.settings}const kr=new rn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Cr{constructor(e,t,n){this._isDeleted=!1,this._options=d({},e),this._config=d({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}const Tr="12.6.0";function Ir(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=d({name:vr,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw kr.create("bad-app-name",{appName:String(s)});if(n||(n=Gt()),!n)throw kr.create("no-options");const a=br.get(s);if(a){if(an(n,a.options)&&an(r,a.config))return a;throw kr.create("duplicate-app",{appName:s})}const i=new vn(s);for(const l of wr.values())i.addComponent(l);const o=new Cr(n,r,i);return br.set(s,o),o}function _r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr;const t=br.get(e);if(!t&&e===vr&&Gt())return Ir();if(!t)throw kr.create("no-app",{appName:e});return t}function Ar(e,t,n){var r;let s=null!==(r=yr[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Gn.warn(e.join(" "))}Nr(new pn("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Pr="firebase-heartbeat-store";let Dr=null;function Rr(){return Dr||(Dr=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=Ln(i);return r&&i.addEventListener("upgradeneeded",e=>{r(Ln(i.result),e.oldVersion,e.newVersion,Ln(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Pr)}catch(xy){console.warn(xy)}}}).catch(e=>{throw kr.create("idb-open",{originalErrorMessage:e.message})})),Dr}async function Lr(e,t){try{const n=(await Rr()).transaction(Pr,"readwrite"),r=n.objectStore(Pr);await r.put(t,Or(e)),await n.done}catch(xy){if(xy instanceof nn)Gn.warn(xy.message);else{const t=kr.create("idb-set",{originalErrorMessage:null===xy||void 0===xy?void 0:xy.message});Gn.warn(t.message)}}}function Or(e){return"".concat(e.name,"!").concat(e.options.appId)}class Mr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ur(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Fr();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(xy){Gn.warn(xy)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Fr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Vr(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Ut(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(xy){return Gn.warn(xy),""}}}function Fr(){return(new Date).toISOString().substring(0,10)}class Ur{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!tn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Rr()).transaction(Pr),n=await t.objectStore(Pr).get(Or(e));return await t.done,n}catch(xy){if(xy instanceof nn)Gn.warn(xy.message);else{const t=kr.create("idb-get",{originalErrorMessage:null===xy||void 0===xy?void 0:xy.message});Gn.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Lr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Lr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Vr(e){return Ut(JSON.stringify({version:2,heartbeats:e})).length}var zr;zr="",Nr(new pn("platform-logger",e=>new zn(e),"PRIVATE")),Nr(new pn("heartbeat",e=>new Mr(e),"PRIVATE")),Ar(Bn,qn,zr),Ar(Bn,qn,"esm2020"),Ar("fire-js","");Ar("firebase","12.7.0","app");var Br,qr,Gr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Hr={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var s=0;s<16;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;s<16;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];let a,i=e.g[3];a=t+(i^n&(s^i))+r[0]+3614090360&4294967295,a=i+(s^(t=n+(a<<7&4294967295|a>>>25))&(n^s))+r[1]+3905402710&4294967295,i=t+(a<<12&4294967295|a>>>20),a=s+(n^i&(t^n))+r[2]+606105819&4294967295,a=n+(t^(s=i+(a<<17&4294967295|a>>>15))&(i^t))+r[3]+3250441966&4294967295,a=t+(i^(n=s+(a<<22&4294967295|a>>>10))&(s^i))+r[4]+4118548399&4294967295,a=i+(s^(t=n+(a<<7&4294967295|a>>>25))&(n^s))+r[5]+1200080426&4294967295,i=t+(a<<12&4294967295|a>>>20),a=s+(n^i&(t^n))+r[6]+2821735955&4294967295,a=n+(t^(s=i+(a<<17&4294967295|a>>>15))&(i^t))+r[7]+4249261313&4294967295,a=t+(i^(n=s+(a<<22&4294967295|a>>>10))&(s^i))+r[8]+1770035416&4294967295,a=i+(s^(t=n+(a<<7&4294967295|a>>>25))&(n^s))+r[9]+2336552879&4294967295,i=t+(a<<12&4294967295|a>>>20),a=s+(n^i&(t^n))+r[10]+4294925233&4294967295,a=n+(t^(s=i+(a<<17&4294967295|a>>>15))&(i^t))+r[11]+2304563134&4294967295,a=t+(i^(n=s+(a<<22&4294967295|a>>>10))&(s^i))+r[12]+1804603682&4294967295,a=i+(s^(t=n+(a<<7&4294967295|a>>>25))&(n^s))+r[13]+4254626195&4294967295,i=t+(a<<12&4294967295|a>>>20),a=s+(n^i&(t^n))+r[14]+2792965006&4294967295,a=n+(t^(s=i+(a<<17&4294967295|a>>>15))&(i^t))+r[15]+1236535329&4294967295,a=t+(s^i&((n=s+(a<<22&4294967295|a>>>10))^s))+r[1]+4129170786&4294967295,a=i+(n^s&((t=n+(a<<5&4294967295|a>>>27))^n))+r[6]+3225465664&4294967295,i=t+(a<<9&4294967295|a>>>23),a=s+(t^n&(i^t))+r[11]+643717713&4294967295,a=n+(i^t&((s=i+(a<<14&4294967295|a>>>18))^i))+r[0]+3921069994&4294967295,a=t+(s^i&((n=s+(a<<20&4294967295|a>>>12))^s))+r[5]+3593408605&4294967295,a=i+(n^s&((t=n+(a<<5&4294967295|a>>>27))^n))+r[10]+38016083&4294967295,i=t+(a<<9&4294967295|a>>>23),a=s+(t^n&(i^t))+r[15]+3634488961&4294967295,a=n+(i^t&((s=i+(a<<14&4294967295|a>>>18))^i))+r[4]+3889429448&4294967295,a=t+(s^i&((n=s+(a<<20&4294967295|a>>>12))^s))+r[9]+568446438&4294967295,a=i+(n^s&((t=n+(a<<5&4294967295|a>>>27))^n))+r[14]+3275163606&4294967295,i=t+(a<<9&4294967295|a>>>23),a=s+(t^n&(i^t))+r[3]+4107603335&4294967295,a=n+(i^t&((s=i+(a<<14&4294967295|a>>>18))^i))+r[8]+1163531501&4294967295,a=t+(s^i&((n=s+(a<<20&4294967295|a>>>12))^s))+r[13]+2850285829&4294967295,a=i+(n^s&((t=n+(a<<5&4294967295|a>>>27))^n))+r[2]+4243563512&4294967295,i=t+(a<<9&4294967295|a>>>23),a=s+(t^n&(i^t))+r[7]+1735328473&4294967295,a=n+(i^t&((s=i+(a<<14&4294967295|a>>>18))^i))+r[12]+2368359562&4294967295,a=t+((n=s+(a<<20&4294967295|a>>>12))^s^i)+r[5]+4294588738&4294967295,a=i+((t=n+(a<<4&4294967295|a>>>28))^n^s)+r[8]+2272392833&4294967295,i=t+(a<<11&4294967295|a>>>21),a=s+(i^t^n)+r[11]+1839030562&4294967295,a=n+((s=i+(a<<16&4294967295|a>>>16))^i^t)+r[14]+4259657740&4294967295,a=t+((n=s+(a<<23&4294967295|a>>>9))^s^i)+r[1]+2763975236&4294967295,a=i+((t=n+(a<<4&4294967295|a>>>28))^n^s)+r[4]+1272893353&4294967295,i=t+(a<<11&4294967295|a>>>21),a=s+(i^t^n)+r[7]+4139469664&4294967295,a=n+((s=i+(a<<16&4294967295|a>>>16))^i^t)+r[10]+3200236656&4294967295,a=t+((n=s+(a<<23&4294967295|a>>>9))^s^i)+r[13]+681279174&4294967295,a=i+((t=n+(a<<4&4294967295|a>>>28))^n^s)+r[0]+3936430074&4294967295,i=t+(a<<11&4294967295|a>>>21),a=s+(i^t^n)+r[3]+3572445317&4294967295,a=n+((s=i+(a<<16&4294967295|a>>>16))^i^t)+r[6]+76029189&4294967295,a=t+((n=s+(a<<23&4294967295|a>>>9))^s^i)+r[9]+3654602809&4294967295,a=i+((t=n+(a<<4&4294967295|a>>>28))^n^s)+r[12]+3873151461&4294967295,i=t+(a<<11&4294967295|a>>>21),a=s+(i^t^n)+r[15]+530742520&4294967295,a=n+((s=i+(a<<16&4294967295|a>>>16))^i^t)+r[2]+3299628645&4294967295,a=t+(s^((n=s+(a<<23&4294967295|a>>>9))|~i))+r[0]+4096336452&4294967295,a=i+(n^((t=n+(a<<6&4294967295|a>>>26))|~s))+r[7]+1126891415&4294967295,i=t+(a<<10&4294967295|a>>>22),a=s+(t^(i|~n))+r[14]+2878612391&4294967295,a=n+(i^((s=i+(a<<15&4294967295|a>>>17))|~t))+r[5]+4237533241&4294967295,a=t+(s^((n=s+(a<<21&4294967295|a>>>11))|~i))+r[12]+1700485571&4294967295,a=i+(n^((t=n+(a<<6&4294967295|a>>>26))|~s))+r[3]+2399980690&4294967295,i=t+(a<<10&4294967295|a>>>22),a=s+(t^(i|~n))+r[10]+4293915773&4294967295,a=n+(i^((s=i+(a<<15&4294967295|a>>>17))|~t))+r[1]+2240044497&4294967295,a=t+(s^((n=s+(a<<21&4294967295|a>>>11))|~i))+r[8]+1873313359&4294967295,a=i+(n^((t=n+(a<<6&4294967295|a>>>26))|~s))+r[15]+4264355552&4294967295,i=t+(a<<10&4294967295|a>>>22),a=s+(t^(i|~n))+r[6]+2734768916&4294967295,a=n+(i^((s=i+(a<<15&4294967295|a>>>17))|~t))+r[13]+1309151649&4294967295,a=t+(s^((n=s+(a<<21&4294967295|a>>>11))|~i))+r[4]+4149444226&4294967295,a=i+(n^((t=n+(a<<6&4294967295|a>>>26))|~s))+r[11]+3174756917&4294967295,i=t+(a<<10&4294967295|a>>>22),a=s+(t^(i|~n))+r[2]+718787259&4294967295,a=n+(i^((s=i+(a<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let s=e.length-1;s>=0;s--){const a=0|e[s];r&&a==t||(n[s]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,s=this.C;let a=this.h,i=0;for(;i<t;){if(0==a)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(s[a++]=e.charCodeAt(i++),a==this.blockSize){n(this,s),a=0;break}}else for(;i<t;)if(s[a++]=e[i++],a==this.blockSize){n(this,s),a=0;break}}this.h=a,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var s={};function a(e){return-128<=e&&e<128?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function i(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(i(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function m(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new f(o,o);if(d(e))return t=g(h(e),t),new f(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new f(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=v(n),r=v(r);var s=y(n,1),a=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=a.add(r);c.l(e)<=0&&(s=s.add(n),a=c),r=y(r,1),n=y(n,1)}return t=m(e,s.j(t)),new f(s,t)}for(s=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(a=i(n)).j(t);d(c)||c.l(e)>0;)c=(a=i(n-=r)).j(t);u(a)&&(a=l),s=s.add(a),e=m(e,c)}return new f(s,e)}function v(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function y(e,t){const n=t>>5;t%=32;const s=e.g.length-n,a=[];for(let r=0;r<s;r++)a[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=i(Math.pow(e,6));var n=this;let r="";for(;;){const s=g(n,t).g;let a=(((n=m(n,s.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return a+r;for(;a.length<6;)a="0"+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=m(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let s=0;for(let r=0;r<=t;r++){let t=s+(65535&this.i(r))+(65535&e.i(r)),a=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);s=a>>>16,t&=65535,a&=65535,n[r]=a<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return i(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(let t=0;t<e.g.length;t++){const r=this.i(s)>>>16,a=65535&this.i(s),i=e.i(t)>>>16,o=65535&e.i(t);n[2*s+2*t]+=a*o,p(n,2*s+2*t),n[2*s+2*t+1]+=r*o,p(n,2*s+2*t+1),n[2*s+2*t+1]+=a*i,p(n,2*s+2*t+1),n[2*s+2*t+2]+=r*i,p(n,2*s+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,qr=Hr.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=i,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=i(Math.pow(n,8));let s=o;for(let o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+a),n);a<8?(a=i(Math.pow(n,a)),s=s.j(a).add(i(e))):(s=s.j(r),s=s.add(i(e)))}return s},Br=Hr.Integer=r}).apply("undefined"!==typeof Gr?Gr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Wr,Kr,Jr,Qr,Yr,Xr,$r,Zr,es="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ts={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof es&&es];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var s=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var i=e[a];if(!(i in s))break e;s=s[i]}(r=r(a=s[e=e[e.length-1]]))!=a&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var s=s||{},a=this||self;function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){a.setTimeout(()=>{throw e},0)}function f(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let y,b=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);y=()=>{e.then(j)}};function j(){for(var e;e=f();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function N(){this.u=this.u,this.C=this.C}function S(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},S.prototype.h=function(){this.defaultPrevented=!0};var E=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(n){}return e}();function k(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){S.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,S),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var T="closure_listenable_"+(1e6*Math.random()|0),I=0;function _(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++I,this.da=this.fa=!1}function A(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<R.length;t++)n=R[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function O(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,s=e.g[n],a=Array.prototype.indexOf.call(s,t,void 0);(r=a>=0)&&Array.prototype.splice.call(s,a,1),r&&(A(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let s=0;s<e.length;++s){const a=e[s];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return s}return-1}O.prototype.add=function(e,t,n,r,s){const a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);const i=F(e,t,r,s);return i>-1?(t=e[i],n||(t.fa=!1)):((t=new _(t,this.src,a,!!r,s)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,s){if(r&&r.once)return q(e,t,n,r,s);if(Array.isArray(t)){for(let a=0;a<t.length;a++)z(e,t[a],n,r,s);return null}return n=Y(n),e&&e[T]?e.J(t,n,i(r)?!!r.capture:!!r,s):B(e,t,n,!1,r,s)}function B(e,t,n,r,s,a){if(!t)throw Error("Invalid event type");const o=i(s)?!!s.capture:!!s;let l=J(e);if(l||(e[U]=l=new O(e)),(n=l.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)E||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(W(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,s){if(Array.isArray(t)){for(let a=0;a<t.length;a++)q(e,t[a],n,r,s);return null}return n=Y(n),e&&e[T]?e.K(t,n,i(r)?!!r.capture:!!r,s):B(e,t,n,!0,r,s)}function G(e,t,n,r,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)G(e,t[a],n,r,s);else r=i(r)?!!r.capture:!!r,n=Y(n),e&&e[T]?(e=e.i,(a=String(t).toString())in e.g&&((n=F(t=e.g[a],n,r,s))>-1&&(A(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[a],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,s)),(n=e>-1?t[e]:null)&&H(n))}function H(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[T])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(W(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(M(n,e),0==n.h&&(n.src=null,t[U]=null)):A(e)}}}function W(e){return e in V?V[e]:V[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&H(e),e=n.call(r,t)}return e}function J(e){return(e=e[U])instanceof O?e:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(e){return"function"===typeof e?e:(e[Q]||(e[Q]=function(t){return e.handleEvent(t)}),e[Q])}function X(){N.call(this),this.i=new O(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new S(t,e);else if(t instanceof S)t.target=t.target||e;else{var s=t;L(t=new S(r,e),s)}let a,i;if(s=!0,n)for(i=n.length-1;i>=0;i--)a=t.g=n[i],s=Z(a,r,!0,t)&&s;if(a=t.g=e,s=Z(a,r,!0,t)&&s,s=Z(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)a=t.g=n[i],s=Z(a,r,!1,t)&&s}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let s=!0;for(let a=0;a<t.length;++a){const i=t[a];if(i&&!i.da&&i.capture==n){const t=i.listener,n=i.ha||i.src;i.fa&&M(e.i,i),s=!1!==t.call(n,r)&&s}}return s&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:a.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,N),X.prototype[T]=!0,X.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)A(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){N.call(this),this.h=e,this.g={}}u(ne,N);var re=[];function se(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&H(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),se(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=a.JSON.stringify,ie=a.JSON.parse,oe=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){S.call(this,"d")}function he(){S.call(this,"c")}u(de,S),u(he,S);var me={},pe=null;function fe(){return pe=pe||new X}function ge(e){S.call(this,me.Ia,e)}function ve(e){const t=fe();$(t,new ge(t))}function ye(e,t){S.call(this,me.STAT_EVENT,e),this.stat=t}function be(e){const t=fe();$(t,new ye(t,e))}function xe(e,t){S.call(this,me.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function je(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const a=JSON.parse(t);if(a)for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(let e=1;e<r.length;e++)r[e]=""}}}return ae(a)}catch(a){return t}}(e,n)+(r?" "+r:"")})}me.Ia="serverreachability",u(ge,S),me.STAT_EVENT="statevent",u(ye,S),me.Ja="timingevent",u(xe,S),je.prototype.ua=function(){this.g=!1},je.prototype.info=function(){};var Se,Ee={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ke={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Te(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _e(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ae}function Ae(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},Se=new Ce;var Pe={},De={};function Re(e,t,n){e.M=1,e.A=at(et(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ae,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var s="readystatechange";Array.isArray(s)||(s&&(re[0]=s.toString()),s=re);for(let a=0;a<s.length;a++){const e=z(n,s[a],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,r,s,a){e.info(function(){if(e.g)if(a){var i="",o=a.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");i=t.length>=2&&"type"==t[1]?i+(e+"=")+l+"&":i+(e+"=redacted&")}}}else i=null;else i=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Oe(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Ve(e){e.D&&(a.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,se(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Je(n.h,e)))if(!e.L&&Je(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),qt(n)}Yt(n),be(18)}}else n.xa=s[1],0<n.xa-n.K&&s[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!k(t))for(s=n.Ba.g.parse(t),t=0;t<s.length;t++){let l=s[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const s=l[4];null!=s&&(n.za=s,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Qe(a,a.h),a.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,st(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var i=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),i.L){Ye(r.h,i);var o=i,c=r.O;c&&(o.H=c),o.D&&(Ve(o),Fe(o)),r.g=i}else Qt(r);n.i.length>0&&Ht(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve()}catch(u){}}_e.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},_e.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=l||7==c||ve(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Oe(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,s=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new a.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(s&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,s,a,i){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+a+" "+i})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,s=this.g;if((r=s.g?s.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(r)){var i=r;break t}}i=null}if(!(e=i)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}Ne(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==De){4==l&&(this.m=4,be(14),e=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),Ne(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ne(this.i,this.l,t,null),qe(this,t)}if(Oe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(o),o.P=!0,be(11))}}else Ne(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else Ne(this.i,this.l,n,null),qe(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=Ie(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[s]||[];t[s]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(Ls){}},_e.prototype.cancel=function(){this.K=!0,Be(this)},_e.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),be(17)),Be(this),this.m=2,ze(this)):Ue(this,this.T-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function He(e){this.l=e||10,a.PerformanceNavigationTiming?e=(e=a.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function We(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qe(e,t){e.g?e.g.add(t):e.h=t}function Ye(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}He.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,xt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=it(t[2]||""),this.g=it(t[3]||"",!0),nt(this,t[4]),this.h=it(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=it(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?it(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(ft(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new pt(t,e.l))}function st(e,t,n){e.i.set(t,n)}function at(e){return st(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function it(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Te(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,mt)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var s=t.h.lastIndexOf("/");-1!=s&&(r=t.h.slice(0,s+1)+r)}if(".."==(s=r)||"."==s)r="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){r=0==s.lastIndexOf("/",0),s=s.split("/");const e=[];for(let t=0;t<s.length;){const n=s[t++];"."==n?r&&t==s.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==s.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=s}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,xt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,mt=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ft(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let s,a=null;r>=0?(s=e[n].substring(0,r),a=e[n].substring(r+1)):s=e[n],t(s,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){ft(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return ft(e),t=wt(e,t),e.g.has(t)}function yt(e,t){ft(e);let n=[];if("string"===typeof t)vt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),h(n)),e.h+=n.length)}function xt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function jt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(a){}}function Nt(){this.g=new oe}function St(e){this.i=e.Sb||null,this.h=e.ab||!1}function Et(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function kt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Tt(e)}function Tt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function _t(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&Te(n):st(e,t,n))}function At(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){ft(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){ft(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return ft(this),this.i=null,vt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=yt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const s=Te(n);n=yt(this,n);for(let t=0;t<n.length;t++){let r=s;""!==n[t]&&(r+="="+Te(n[t])),e.push(r)}}return this.i=e.join("&")},u(St,le),St.prototype.g=function(){return new Et(this.i,this.h)},u(Et,X),(e=Et.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Tt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||a).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Tt(this)),this.g&&(this.readyState=3,Tt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):Tt(this),3==this.readyState&&kt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Et.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(At,X);var Pt=/^https?$/i,Dt=["POST","PUT"];function Rt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Lt(e),Mt(e)}function Lt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Ot(e){if(e.h&&"undefined"!=typeof s)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const s=e.ca();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){let t=String(e.D).match($e)[1]||null;!t&&a.self&&a.self.location&&(t=a.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var i=Ft(e)>2?e.g.statusText:""}catch(o){i=""}e.l=i+" ["+e.ca()+"]",Lt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new je,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new He(e&&e.concurrentRequestLimit),this.Ba=new Nt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(Gt(e),3==e.I){var t=e.V++,n=et(e.J);if(st(n,"SID",e.M),st(n,"RID",t),st(n,"TYPE","terminate"),Kt(e,n),(t=new _e(e,e.j,t)).M=2,t.A=at(et(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function qt(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function Gt(e){qt(e),e.v&&(a.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&a.clearTimeout(e.m),e.m=null)}function Ht(e){if(!We(e.h)&&!e.m){e.m=!0;var t=e.Ea;y||w(),b||(y(),b=!0),x.add(t,e),e.D=0}}function Wt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);st(r,"SID",e.M),st(r,"RID",n),st(r,"AID",e.K),Kt(e,r),e.u&&e.o&&_t(r,e.u,e.o),n=new _e(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Jt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Qe(e.h,n),Re(n,r,t)}function Kt(e,t){e.H&&P(e.H,function(e,n){st(t,n,e)}),e.l&&P({},function(e,n){st(t,n,e)})}function Jt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var a=s[c].g;const n=s[c].map;if((a-=t)<0)t=Math.max(0,s[c].g-100),l=!1;else try{a="req"+a+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;i(n)&&(r=ae(n)),e.push(a+t+"="+encodeURIComponent(r))}}catch(rs){throw e.push(a+"type="+encodeURIComponent("_badmap")),rs}}catch(rs){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Qt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;y||w(),b||(y(),b=!0),x.add(t,e),e.A=0}}function Yt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Xt(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new _e(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);st(t,"RID","rpc"),st(t,"SID",e.M),st(t,"AID",e.K),st(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&st(t,"TO",e.ia),st(t,"TYPE","xmlhttp"),Kt(e,t),e.u&&e.o&&_t(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=at(et(t)),n.u=null,n.R=!0,Le(n,e)}function Zt(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Xt(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.G,Ye(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;$(r=fe(),new xe(r,n)),Ht(e)}else Qt(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Yt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),s){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||tt(r,"https"),at(r),t?function(e,t){const n=new je;if(a.Image){const r=new Image;r.onload=c(jt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(jt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(jt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(jt,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new je;const n=new AbortController,r=setTimeout(()=>{n.abort(),jt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?jt(0,0,!0,t):jt(0,0,!1,t)}).catch(()=>{clearTimeout(r),jt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Gt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var s=a.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),s&&nt(e,s),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&st(r,n,t),st(r,"VER",e.ka),Kt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new At(new St({ab:n})):new At(e.ma)).Fa(e.L),t}function on(){}function ln(){}function cn(e,t){X.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!k(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=At.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Se.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(i){return void Rt(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=a.FormData&&e instanceof a.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(i){Rt(this,i)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),At.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Ot(this):this.Xa())},e.Xa=function(){Ot(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ie(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Ht(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new _e(this,this.j,e);let a=this.o;if(this.U&&(a?(a=D(a),L(a,this.U)):a=this.U),null!==this.u||this.R||(s.J=a,a=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,s,t),st(n=et(this.J),"RID",e),st(n,"CVER",22),this.G&&st(n,"X-HTTP-Session-Id",this.G),Kt(this,n),a&&(this.R?t="headers="+Te(It(a))+"&"+t:this.u&&_t(n,this.u,a)),Qe(this.h,s),this.Ra&&st(n,"TYPE","init"),this.S?(st(n,"$req",t),st(n,"SID","null"),s.U=!0,Re(s,n,null)):Re(s,n,t),this.I=2}}else 3==this.I&&(e?Wt(this,e):0==this.i.length||We(this.h)||Wt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),qt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,qt(this),Yt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,X),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ae(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.I&&Ht(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,on),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new un(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Zr=ts.createWebChannelTransport=function(){return new ln},$r=ts.getStatEventTarget=function(){return fe()},Xr=ts.Event=me,Yr=ts.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,Qr=ts.ErrorCode=Ee,ke.COMPLETE="complete",Jr=ts.EventType=ke,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,Kr=ts.WebChannel=ce,ts.FetchXmlHttpFactory=St,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,Wr=ts.XhrIo=At}).apply("undefined"!==typeof es?es:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ns="@firebase/firestore",rs="4.9.3";class ss{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ss.UNAUTHENTICATED=new ss(null),ss.GOOGLE_CREDENTIALS=new ss("google-credentials-uid"),ss.FIRST_PARTY=new ss("first-party-uid"),ss.MOCK_USER=new ss("mock-user");let as="12.7.0";const is=new Sn("@firebase/firestore");function os(){return is.logLevel}function ls(e){if(is.logLevel<=bn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ds);is.debug("Firestore (".concat(as,"): ").concat(e),...s)}}function cs(e){if(is.logLevel<=bn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ds);is.error("Firestore (".concat(as,"): ").concat(e),...s)}}function us(e){if(is.logLevel<=bn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ds);is.warn("Firestore (".concat(as,"): ").concat(e),...s)}}function ds(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function hs(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ms(e,r,n)}function ms(e,t,n){let r="FIRESTORE (".concat(as,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw cs(r),new Error(r)}function ps(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||ms(t,s,r)}function fs(e,t){return e}const gs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vs extends nn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ys{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class xs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ss.UNAUTHENTICATED))}shutdown(){}}class ws{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class js{constructor(e){this.t=e,this.currentUser=ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ps(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ys,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},i=e=>{ls("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(e=>i(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(ls("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ys)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ls("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ps("string"==typeof t.accessToken,31837,{l:t}),new bs(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ps(null===e||"string"==typeof e,2055,{h:e}),new ss(e)}}class Ns{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ss.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ss{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ns(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ss.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Es{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ks{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ps(void 0===this.o,3512);const n=e=>{null!=e.error&&ls("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ls("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ls("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ls("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Es(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ps("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Es(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Cs(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ts{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Cs(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Is(e,t){return e<t?-1:e>t?1:0}function _s(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return Ds(n)===Ds(s)?Is(n,s):Ds(n)?1:-1}return Is(e.length,t.length)}const As=55296,Ps=57343;function Ds(e){const t=e.charCodeAt(0);return t>=As&&t<=Ps}function Rs(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Ls="__name__";class Os{constructor(e,t,n){void 0===t?t=0:t>e.length&&hs(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&hs(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Os.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Os?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Os.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Is(e.length,t.length)}static compareSegments(e,t){const n=Os.isNumericId(e),r=Os.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Os.extractNumericId(e).compare(Os.extractNumericId(t)):_s(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Br.fromString(e.substring(4,e.length-2))}}class Ms extends Os{construct(e,t,n){return new Ms(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new vs(gs.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Ms(e)}static emptyPath(){return new Ms([])}}const Fs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Us extends Os{construct(e,t,n){return new Us(e,t,n)}static isValidIdentifier(e){return Fs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Us.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ls}static keyField(){return new Us([Ls])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new vs(gs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new vs(gs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new vs(gs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(s(),r++)}if(s(),a)throw new vs(gs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Us(t)}static emptyPath(){return new Us([])}}class Vs{constructor(e){this.path=e}static fromPath(e){return new Vs(Ms.fromString(e))}static fromName(e){return new Vs(Ms.fromString(e).popFirst(5))}static empty(){return new Vs(Ms.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ms.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ms.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vs(new Ms(e.slice()))}}function zs(e,t,n){if(!n)throw new vs(gs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Bs(e){if(!Vs.isDocumentKey(e))throw new vs(gs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function qs(e){if(Vs.isDocumentKey(e))throw new vs(gs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gs(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Hs(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":hs(12329,{type:typeof e})}function Ws(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vs(gs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hs(e);throw new vs(gs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ks(e,t){const n={typeString:e};return t&&(n.value=t),n}function Js(e,t){if(!Gs(e))throw new vs(gs.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const i=e[r];if(s&&typeof i!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==a&&i!==a.value){n="Expected '".concat(r,"' field to equal '").concat(a.value,"'");break}}if(n)throw new vs(gs.INVALID_ARGUMENT,n);return!0}const Qs=-62135596800,Ys=1e6;class Xs{static now(){return Xs.fromMillis(Date.now())}static fromDate(e){return Xs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ys);return new Xs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vs(gs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vs(gs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qs)throw new vs(gs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vs(gs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ys}_compareTo(e){return this.seconds===e.seconds?Is(this.nanoseconds,e.nanoseconds):Is(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xs._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Js(e,Xs._jsonSchema))return new Xs(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qs;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xs._jsonSchemaVersion="firestore/timestamp/1.0",Xs._jsonSchema={type:Ks("string",Xs._jsonSchemaVersion),seconds:Ks("number"),nanoseconds:Ks("number")};class $s{static fromTimestamp(e){return new $s(e)}static min(){return new $s(new Xs(0,0))}static max(){return new $s(new Xs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zs=-1;class ea{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ea.UNKNOWN_ID=-1;function ta(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=$s.fromTimestamp(1e9===r?new Xs(n+1,0):new Xs(n,r));return new ra(s,Vs.empty(),t)}function na(e){return new ra(e.readTime,e.key,Zs)}class ra{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ra($s.min(),Vs.empty(),Zs)}static max(){return new ra($s.max(),Vs.empty(),Zs)}}function sa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Vs.comparator(e.documentKey,t.documentKey),0!==n?n:Is(e.largestBatchId,t.largestBatchId))}const aa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ia{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function oa(e){if(e.code!==gs.FAILED_PRECONDITION||e.message!==aa)throw e;ls("LocalStore","Unexpectedly lost primary lease")}class la{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hs(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new la((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof la?t:la.resolve(t)}catch(e){return la.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):la.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):la.reject(t)}static resolve(e){return new la((t,n)=>{t(e)})}static reject(e){return new la((t,n)=>{n(e)})}static waitFor(e){return new la((t,n)=>{let r=0,s=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++s,a&&s===r&&t()},e=>n(e))}),a=!0,s===r&&t()})}static or(e){let t=la.resolve(!1);for(const n of e)t=t.next(e=>e?la.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new la((n,r)=>{const s=e.length,a=new Array(s);let i=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{a[l]=e,++i,i===s&&n(a)},e=>r(e))}})}static doWhile(e,t){return new la((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function ca(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ua(e){return"IndexedDbTransactionError"===e.name}class da{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}da.ce=-1;const ha=-1;function ma(e){return null==e}function pa(e){return 0===e&&1/e==-1/0}function fa(e){return"number"==typeof e&&Number.isInteger(e)&&!pa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ga="\x01";function va(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ba(t)),t=ya(e.get(n),t);return ba(t)}function ya(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case ga:n+="\x01\x11";break;default:n+=t}}return n}function ba(e){return e+ga+"\x01"}const xa="remoteDocuments",wa="owner",ja="mutationQueues",Na="mutations";const Sa="documentMutations",Ea="remoteDocumentsV14",ka="remoteDocumentGlobal",Ca="targets",Ta="targetDocuments",Ia="targetGlobal",_a="collectionParents",Aa="clientMetadata",Pa="bundles",Da="namedQueries",Ra="indexConfiguration",La="indexState",Oa="indexEntries",Ma="documentOverlays",Fa="globals",Ua=[ja,Na,Sa,xa,Ca,wa,Ia,Ta,Aa,ka,_a,Pa,Da],Va=[ja,Na,Sa,Ea,Ca,wa,Ia,Ta,Aa,ka,_a,Pa,Da,Ma],za=Va,Ba=[...za,Ra,La,Oa];function qa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ga(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ha(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Wa{constructor(e,t){this.comparator=e,this.root=t||Ja.EMPTY}insert(e,t){return new Wa(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ja.BLACK,null,null))}remove(e){return new Wa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ja.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ka(this.root,e,this.comparator,!0)}}class Ka{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ja{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Ja.RED,this.left=null!=r?r:Ja.EMPTY,this.right=null!=s?s:Ja.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Ja(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ja.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ja.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ja.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ja.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hs(43730,{key:this.key,value:this.value});if(this.right.isRed())throw hs(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw hs(27949);return e+(this.isRed()?0:1)}}Ja.EMPTY=null,Ja.RED=!0,Ja.BLACK=!1,Ja.EMPTY=new class{constructor(){this.size=0}get key(){throw hs(57766)}get value(){throw hs(16141)}get color(){throw hs(16727)}get left(){throw hs(29726)}get right(){throw hs(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Ja(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qa{constructor(e){this.comparator=e,this.data=new Wa(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ya(this.data.getIterator())}getIteratorFrom(e){return new Ya(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Qa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qa(this.comparator);return t.data=e,t}}class Ya{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Xa{constructor(e){this.fields=e,e.sort(Us.comparator)}static empty(){return new Xa([])}unionWith(e){let t=new Qa(Us.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Xa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class $a extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Za{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new $a("Invalid base64 string: "+e):e}}(e);return new Za(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Za(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Is(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Za.EMPTY_BYTE_STRING=new Za("");const ei=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(e){if(ps(!!e,39018),"string"==typeof e){let t=0;const n=ei.exec(e);if(ps(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ni(e.seconds),nanos:ni(e.nanos)}}function ni(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ri(e){return"string"==typeof e?Za.fromBase64String(e):Za.fromUint8Array(e)}const si="server_timestamp",ai="__type__",ii="__previous_value__",oi="__local_write_time__";function li(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ai])||void 0===t?void 0:t.stringValue)===si}function ci(e){const t=e.mapValue.fields[ii];return li(t)?ci(t):t}function ui(e){const t=ti(e.mapValue.fields[oi].timestampValue);return new Xs(t.seconds,t.nanos)}class di{constructor(e,t,n,r,s,a,i,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=i,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const hi="(default)";class mi{constructor(e,t){this.projectId=e,this.database=t||hi}static empty(){return new mi("","")}get isDefaultDatabase(){return this.database===hi}isEqual(e){return e instanceof mi&&e.projectId===this.projectId&&e.database===this.database}}const pi="__type__",fi="__max__",gi={mapValue:{fields:{__type__:{stringValue:fi}}}},vi="__vector__",yi="value";function bi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?li(e)?4:Oi(e)?9007199254740991:Ri(e)?10:11:hs(28295,{value:e})}function xi(e,t){if(e===t)return!0;const n=bi(e);if(n!==bi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ui(e).isEqual(ui(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ti(e.timestampValue),r=ti(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ri(e.bytesValue).isEqual(ri(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ni(e.geoPointValue.latitude)===ni(t.geoPointValue.latitude)&&ni(e.geoPointValue.longitude)===ni(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ni(e.integerValue)===ni(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ni(e.doubleValue),r=ni(t.doubleValue);return n===r?pa(n)===pa(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Rs(e.arrayValue.values||[],t.arrayValue.values||[],xi);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(qa(n)!==qa(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!xi(n[s],r[s])))return!1;return!0}(e,t);default:return hs(52216,{left:e})}}function wi(e,t){return void 0!==(e.values||[]).find(e=>xi(e,t))}function ji(e,t){if(e===t)return 0;const n=bi(e),r=bi(t);if(n!==r)return Is(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Is(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ni(e.integerValue||e.doubleValue),r=ni(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ni(e.timestampValue,t.timestampValue);case 4:return Ni(ui(e),ui(t));case 5:return _s(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ri(e),r=ri(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Is(n[s],r[s]);if(0!==e)return e}return Is(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Is(ni(e.latitude),ni(t.latitude));return 0!==n?n:Is(ni(e.longitude),ni(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Si(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,a;const i=e.fields||{},o=t.fields||{},l=null===(n=i[yi])||void 0===n?void 0:n.arrayValue,c=null===(r=o[yi])||void 0===r?void 0:r.arrayValue,u=Is((null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0,(null===c||void 0===c||null===(a=c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Si(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===gi.mapValue&&t===gi.mapValue)return 0;if(e===gi.mapValue)return 1;if(t===gi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},a=Object.keys(s);r.sort(),a.sort();for(let i=0;i<r.length&&i<a.length;++i){const e=_s(r[i],a[i]);if(0!==e)return e;const t=ji(n[r[i]],s[a[i]]);if(0!==t)return t}return Is(r.length,a.length)}(e.mapValue,t.mapValue);default:throw hs(23264,{he:n})}}function Ni(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Is(e,t);const n=ti(e),r=ti(t),s=Is(n.seconds,r.seconds);return 0!==s?s:Is(n.nanos,r.nanos)}function Si(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=ji(n[s],r[s]);if(e)return e}return Is(n.length,r.length)}function Ei(e){return ki(e)}function ki(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ti(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ri(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Vs.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ki(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(ki(e.fields[s]));return n+"}"}(e.mapValue):hs(61005,{value:e})}function Ci(e){switch(bi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ci(e);return t?16+Ci(t):16;case 5:return 2*e.stringValue.length;case 6:return ri(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Ci(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Ga(e.fields,(e,n)=>{t+=e.length+Ci(n)}),t}(e.mapValue);default:throw hs(13486,{value:e})}}function Ti(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ii(e){return!!e&&"integerValue"in e}function _i(e){return!!e&&"arrayValue"in e}function Ai(e){return!!e&&"nullValue"in e}function Pi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Di(e){return!!e&&"mapValue"in e}function Ri(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[pi])||void 0===t?void 0:t.stringValue)===vi}function Li(e){if(e.geoPointValue)return{geoPointValue:d({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:d({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ga(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Li(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Li(e.arrayValue.values[n]);return t}return d({},e)}function Oi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===fi}class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Di(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Li(t)}setAll(e){let t=Us.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Li(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Di(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Di(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ga(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Mi(Li(this.value))}}function Fi(e){const t=[];return Ga(e.fields,(e,n)=>{const r=new Us([e]);if(Di(n)){const e=Fi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Xa(t)}class Ui{constructor(e,t,n,r,s,a,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=a,this.documentState=i}static newInvalidDocument(e){return new Ui(e,0,$s.min(),$s.min(),$s.min(),Mi.empty(),0)}static newFoundDocument(e,t,n,r){return new Ui(e,1,t,$s.min(),n,r,0)}static newNoDocument(e,t){return new Ui(e,2,t,$s.min(),$s.min(),Mi.empty(),0)}static newUnknownDocument(e,t){return new Ui(e,3,t,$s.min(),$s.min(),Mi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($s.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$s.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ui&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Vi{constructor(e,t){this.position=e,this.inclusive=t}}function zi(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const a=t[s],i=e.position[s];if(r=a.field.isKeyField()?Vs.comparator(Vs.fromName(i.referenceValue),n.key):ji(i,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Bi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!xi(e.position[n],t.position[n]))return!1;return!0}class qi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Gi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Hi{}class Wi extends Hi{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new eo(e,t,n):"array-contains"===t?new so(e,n):"in"===t?new ao(e,n):"not-in"===t?new io(e,n):"array-contains-any"===t?new oo(e,n):new Wi(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new to(e,n):new no(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ji(t,this.value)):null!==t&&bi(this.value)===bi(t)&&this.matchesComparison(ji(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return hs(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ki extends Hi{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ki(e,t)}matches(e){return Ji(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ji(e){return"and"===e.op}function Qi(e){return Yi(e)&&Ji(e)}function Yi(e){for(const t of e.filters)if(t instanceof Ki)return!1;return!0}function Xi(e){if(e instanceof Wi)return e.field.canonicalString()+e.op.toString()+Ei(e.value);if(Qi(e))return e.filters.map(e=>Xi(e)).join(",");{const t=e.filters.map(e=>Xi(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function $i(e,t){return e instanceof Wi?function(e,t){return t instanceof Wi&&e.op===t.op&&e.field.isEqual(t.field)&&xi(e.value,t.value)}(e,t):e instanceof Ki?function(e,t){return t instanceof Ki&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&$i(n,t.filters[r]),!0)}(e,t):void hs(19439)}function Zi(e){return e instanceof Wi?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ei(e.value))}(e):e instanceof Ki?function(e){return e.op.toString()+" {"+e.getFilters().map(Zi).join(" ,")+"}"}(e):"Filter"}class eo extends Wi{constructor(e,t,n){super(e,t,n),this.key=Vs.fromName(n.referenceValue)}matches(e){const t=Vs.comparator(e.key,this.key);return this.matchesComparison(t)}}class to extends Wi{constructor(e,t){super(e,"in",t),this.keys=ro("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class no extends Wi{constructor(e,t){super(e,"not-in",t),this.keys=ro("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ro(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Vs.fromName(e.referenceValue))}class so extends Wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _i(t)&&wi(t.arrayValue,this.value)}}class ao extends Wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wi(this.value.arrayValue,t)}}class io extends Wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(wi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!wi(this.value.arrayValue,t)}}class oo extends Wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_i(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>wi(this.value.arrayValue,e))}}class lo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=a,this.endAt=i,this.Te=null}}function co(e){return new lo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function uo(e){const t=fs(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Xi(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ma(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ei(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ei(e)).join(",")),t.Te=e}return t.Te}function ho(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Gi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$i(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bi(e.startAt,t.startAt)&&Bi(e.endAt,t.endAt)}function mo(e){return Vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class po{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=a,this.startAt=i,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fo(e,t,n,r,s,a,i,o){return new po(e,t,n,r,s,a,i,o)}function go(e){return new po(e)}function vo(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function yo(e){return null!==e.collectionGroup}function bo(e){const t=fs(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Qa(Us.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new qi(r,n))}),e.has(Us.keyField().canonicalString())||t.Ie.push(new qi(Us.keyField(),n))}return t.Ie}function xo(e){const t=fs(e);return t.Ee||(t.Ee=wo(t,bo(e))),t.Ee}function wo(e,t){if("F"===e.limitType)return co(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new qi(e.field,t)});const n=e.endAt?new Vi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vi(e.startAt.position,e.startAt.inclusive):null;return co(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function jo(e,t){const n=e.filters.concat([t]);return new po(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function No(e,t,n){return new po(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function So(e,t){return ho(xo(e),xo(t))&&e.limitType===t.limitType}function Eo(e){return"".concat(uo(xo(e)),"|lt:").concat(e.limitType)}function ko(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Zi(e)).join(", "),"]")),ma(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ei(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ei(e)).join(",")),"Target(".concat(t,")")}(xo(e)),"; limitType=").concat(e.limitType,")")}function Co(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Vs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of bo(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=zi(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,bo(e),t))&&!(e.endAt&&!function(e,t,n){const r=zi(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,bo(e),t))}(e,t)}function To(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Io(e){return(t,n)=>{let r=!1;for(const s of bo(e)){const e=_o(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function _o(e,t,n){const r=e.field.isKeyField()?Vs.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?ji(r,s):hs(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return hs(19790,{direction:e.dir})}}class Ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ga(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Ha(this.inner)}size(){return this.innerSize}}const Po=new Wa(Vs.comparator);function Do(){return Po}const Ro=new Wa(Vs.comparator);function Lo(){let e=Ro;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Oo(e){let t=Ro;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Mo(){return Uo()}function Fo(){return Uo()}function Uo(){return new Ao(e=>e.toString(),(e,t)=>e.isEqual(t))}const Vo=new Wa(Vs.comparator),zo=new Qa(Vs.comparator);function Bo(){let e=zo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const qo=new Qa(Is);function Go(){return qo}function Ho(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pa(t)?"-0":t}}function Wo(e){return{integerValue:""+e}}function Ko(e,t){return fa(t)?Wo(t):Ho(e,t)}class Jo{constructor(){this._=void 0}}function Qo(e,t,n){return e instanceof $o?function(e,t){const n={fields:{[ai]:{stringValue:si},[oi]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&li(t)&&(t=ci(t)),t&&(n.fields[ii]=t),{mapValue:n}}(n,t):e instanceof Zo?el(e,t):e instanceof tl?nl(e,t):function(e,t){const n=Xo(e,t),r=sl(n)+sl(e.Ae);return Ii(n)&&Ii(e.Ae)?Wo(r):Ho(e.serializer,r)}(e,t)}function Yo(e,t,n){return e instanceof Zo?el(e,t):e instanceof tl?nl(e,t):n}function Xo(e,t){return e instanceof rl?function(e){return Ii(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class $o extends Jo{}class Zo extends Jo{constructor(e){super(),this.elements=e}}function el(e,t){const n=al(t);for(const r of e.elements)n.some(e=>xi(e,r))||n.push(r);return{arrayValue:{values:n}}}class tl extends Jo{constructor(e){super(),this.elements=e}}function nl(e,t){let n=al(t);for(const r of e.elements)n=n.filter(e=>!xi(e,r));return{arrayValue:{values:n}}}class rl extends Jo{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function sl(e){return ni(e.integerValue||e.doubleValue)}function al(e){return _i(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class il{constructor(e,t){this.version=e,this.transformResults=t}}class ol{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ol}static exists(e){return new ol(void 0,e)}static updateTime(e){return new ol(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ll(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class cl{}function ul(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new xl(e.key,ol.none()):new fl(e.key,e.data,ol.none());{const n=e.data,r=Mi.empty();let s=new Qa(Us.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new gl(e.key,r,new Xa(s.toArray()),ol.none())}}function dl(e,t,n){e instanceof fl?function(e,t,n){const r=e.value.clone(),s=yl(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gl?function(e,t,n){if(!ll(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=yl(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(vl(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function hl(e,t,n,r){return e instanceof fl?function(e,t,n,r){if(!ll(e.precondition,t))return n;const s=e.value.clone(),a=bl(e.fieldTransforms,r,t);return s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof gl?function(e,t,n,r){if(!ll(e.precondition,t))return n;const s=bl(e.fieldTransforms,r,t),a=t.data;return a.setAll(vl(e)),a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return ll(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ml(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Xo(r.transform,e||null);null!=s&&(null===n&&(n=Mi.empty()),n.set(r.field,s))}return n||null}function pl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Rs(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Zo&&t instanceof Zo||e instanceof tl&&t instanceof tl?Rs(e.elements,t.elements,xi):e instanceof rl&&t instanceof rl?xi(e.Ae,t.Ae):e instanceof $o&&t instanceof $o}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class fl extends cl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class gl extends cl{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vl(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function yl(e,t,n){const r=new Map;ps(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const a=e[s],i=a.transform,o=t.data.field(a.field);r.set(a.field,Yo(i,o,n[s]))}return r}function bl(e,t,n){const r=new Map;for(const s of e){const e=s.transform,a=n.data.field(s.field);r.set(s.field,Qo(e,a,t))}return r}class xl extends cl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wl extends cl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&dl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=hl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=hl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Fo();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let i=this.applyToLocalView(a,s.mutatedFields);i=t.has(r.key)?null:i;const o=ul(a,i);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument($s.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bo())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,(e,t)=>pl(e,t))&&Rs(this.baseMutations,e.baseMutations,(e,t)=>pl(e,t))}}class Nl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ps(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Vo;const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,n[a].version);return new Nl(e,t,n,r)}}class Sl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class El{constructor(e,t){this.count=e,this.unchangedNames=t}}var kl,Cl;function Tl(e){switch(e){case gs.OK:return hs(64938);case gs.CANCELLED:case gs.UNKNOWN:case gs.DEADLINE_EXCEEDED:case gs.RESOURCE_EXHAUSTED:case gs.INTERNAL:case gs.UNAVAILABLE:case gs.UNAUTHENTICATED:return!1;case gs.INVALID_ARGUMENT:case gs.NOT_FOUND:case gs.ALREADY_EXISTS:case gs.PERMISSION_DENIED:case gs.FAILED_PRECONDITION:case gs.ABORTED:case gs.OUT_OF_RANGE:case gs.UNIMPLEMENTED:case gs.DATA_LOSS:return!0;default:return hs(15467,{code:e})}}function Il(e){if(void 0===e)return cs("GRPC error has no .code"),gs.UNKNOWN;switch(e){case kl.OK:return gs.OK;case kl.CANCELLED:return gs.CANCELLED;case kl.UNKNOWN:return gs.UNKNOWN;case kl.DEADLINE_EXCEEDED:return gs.DEADLINE_EXCEEDED;case kl.RESOURCE_EXHAUSTED:return gs.RESOURCE_EXHAUSTED;case kl.INTERNAL:return gs.INTERNAL;case kl.UNAVAILABLE:return gs.UNAVAILABLE;case kl.UNAUTHENTICATED:return gs.UNAUTHENTICATED;case kl.INVALID_ARGUMENT:return gs.INVALID_ARGUMENT;case kl.NOT_FOUND:return gs.NOT_FOUND;case kl.ALREADY_EXISTS:return gs.ALREADY_EXISTS;case kl.PERMISSION_DENIED:return gs.PERMISSION_DENIED;case kl.FAILED_PRECONDITION:return gs.FAILED_PRECONDITION;case kl.ABORTED:return gs.ABORTED;case kl.OUT_OF_RANGE:return gs.OUT_OF_RANGE;case kl.UNIMPLEMENTED:return gs.UNIMPLEMENTED;case kl.DATA_LOSS:return gs.DATA_LOSS;default:return hs(39323,{code:e})}}(Cl=kl||(kl={}))[Cl.OK=0]="OK",Cl[Cl.CANCELLED=1]="CANCELLED",Cl[Cl.UNKNOWN=2]="UNKNOWN",Cl[Cl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cl[Cl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cl[Cl.NOT_FOUND=5]="NOT_FOUND",Cl[Cl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cl[Cl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cl[Cl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cl[Cl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cl[Cl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cl[Cl.ABORTED=10]="ABORTED",Cl[Cl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cl[Cl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cl[Cl.INTERNAL=13]="INTERNAL",Cl[Cl.UNAVAILABLE=14]="UNAVAILABLE",Cl[Cl.DATA_LOSS=15]="DATA_LOSS";let _l=null;function Al(){return new TextEncoder}const Pl=new Br([4294967295,4294967295],0);function Dl(e){const t=Al().encode(e),n=new qr;return n.update(t),new Uint8Array(n.digest())}function Rl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Br([n,r],0),new Br([s,a],0)]}class Ll{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ol("Invalid padding: ".concat(t));if(n<0)throw new Ol("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Ol("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Ol("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Br.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Br.fromNumber(n)));return 1===r.compare(Pl)&&(r=new Br([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Dl(e),[n,r]=Rl(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Ll(s,r,t);return n.forEach(e=>a.insert(e)),a}insert(e){if(0===this.ge)return;const t=Dl(e),[n,r]=Rl(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ml{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Fl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ml($s.min(),r,new Wa(Is),Do(),Bo())}}class Fl{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Fl(n,t,Bo(),Bo(),Bo())}}class Ul{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Vl{constructor(e,t){this.targetId=e,this.Ce=t}}class zl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Za.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Bl{constructor(){this.ve=0,this.Fe=Hl(),this.Me=Za.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Bo(),t=Bo(),n=Bo();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:hs(38017,{changeType:s})}}),new Fl(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Hl()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ps(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ql{constructor(e){this.Ge=e,this.ze=new Map,this.je=Do(),this.Je=Gl(),this.He=Gl(),this.Ye=new Wa(Is)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:hs(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(mo(a))if(0===n){const e=new Vs(a.path);this.et(t,e,Ui.newNoDocument(e,$s.min()))}else ps(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var s;const n=this.ut(e),a=n?this.ct(n,e,r):1;if(0!==a){this.it(t);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(s=_l)||void 0===s||s.lt(function(e,t,n,r,s){var a,i,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===s,hashCount:null!==(a=null===d||void 0===d?void 0:d.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(i=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==i?i:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,a))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let a,i;try{a=ri(n).toUint8Array()}catch(e){if(e instanceof $a)return us("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new Ll(a,r,s)}catch(e){return us(e instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.ge?null:i}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),a="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(a)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&mo(s.target)){const t=new Vs(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Ui.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Bo();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Ml(e,t,this.Ye,this.je,n);return this.je=Do(),this.Je=Gl(),this.He=Gl(),this.Ye=new Wa(Is),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Bl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qa(Is),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qa(Is),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ls("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bl),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gl(){return new Wa(Vs.comparator)}function Hl(){return new Wa(Vs.comparator)}const Wl={asc:"ASCENDING",desc:"DESCENDING"},Kl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jl={and:"AND",or:"OR"};class Ql{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yl(e,t){return e.useProto3Json||ma(t)?t:{value:t}}function Xl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function $l(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zl(e,t){return Xl(e,t.toTimestamp())}function ec(e){return ps(!!e,49232),$s.fromTimestamp(function(e){const t=ti(e);return new Xs(t.seconds,t.nanos)}(e))}function tc(e,t){return nc(e,t).canonicalString()}function nc(e,t){const n=function(e){return new Ms(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function rc(e){const t=Ms.fromString(e);return ps(Nc(t),10190,{key:t.toString()}),t}function sc(e,t){return tc(e.databaseId,t.path)}function ac(e,t){const n=rc(t);if(n.get(1)!==e.databaseId.projectId)throw new vs(gs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vs(gs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vs(cc(n))}function ic(e,t){return tc(e.databaseId,t)}function oc(e){const t=rc(e);return 4===t.length?Ms.emptyPath():cc(t)}function lc(e){return new Ms(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cc(e){return ps(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function uc(e,t,n){return{name:sc(e,t),fields:n.value.mapValue.fields}}function dc(e,t){let n;if(t instanceof fl)n={update:uc(e,t.key,t.value)};else if(t instanceof xl)n={delete:sc(e,t.key)};else if(t instanceof gl)n={update:uc(e,t.key,t.data),updateMask:jc(t.fieldMask)};else{if(!(t instanceof wl))return hs(16599,{Vt:t.type});n={verify:sc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof $o)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rl)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw hs(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:hs(27497)}(e,t.precondition)),n}function hc(e,t){return{documents:[ic(e,t.path)]}}function mc(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ic(e,s);const a=function(e){if(0!==e.length)return wc(Ki.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:bc(e.field),direction:gc(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Yl(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function pc(e){let t=oc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ps(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=fc(e);return t instanceof Ki&&Qi(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map(e=>function(e){return new qi(xc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ma(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Vi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Vi(n,t)}(n.endAt)),fo(t,s,i,a,o,"F",l,c)}function fc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xc(e.unaryFilter.field);return Wi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=xc(e.unaryFilter.field);return Wi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xc(e.unaryFilter.field);return Wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xc(e.unaryFilter.field);return Wi.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return hs(61313);default:return hs(60726)}}(e):void 0!==e.fieldFilter?function(e){return Wi.create(xc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return hs(58110);default:return hs(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ki.create(e.compositeFilter.filters.map(e=>fc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return hs(1026)}}(e.compositeFilter.op))}(e):hs(30097,{filter:e})}function gc(e){return Wl[e]}function vc(e){return Kl[e]}function yc(e){return Jl[e]}function bc(e){return{fieldPath:e.canonicalString()}}function xc(e){return Us.fromServerFormat(e.fieldPath)}function wc(e){return e instanceof Wi?function(e){if("=="===e.op){if(Pi(e.value))return{unaryFilter:{field:bc(e.field),op:"IS_NAN"}};if(Ai(e.value))return{unaryFilter:{field:bc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pi(e.value))return{unaryFilter:{field:bc(e.field),op:"IS_NOT_NAN"}};if(Ai(e.value))return{unaryFilter:{field:bc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(e.field),op:vc(e.op),value:e.value}}}(e):e instanceof Ki?function(e){const t=e.getFilters().map(e=>wc(e));return 1===t.length?t[0]:{compositeFilter:{op:yc(e.op),filters:t}}}(e):hs(54877,{filter:e})}function jc(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Nc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Sc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$s.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$s.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Za.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=i,this.expectedCount=o}withSequenceNumber(e){return new Sc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ec{constructor(e){this.yt=e}}function kc(e){const t=pc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?No(t,t.limit,"L"):t}class Cc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ni(e.integerValue));else if("doubleValue"in e){const n=ni(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),pa(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=ti(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ri(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Oi(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ri(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):hs(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const s=yi,a=(null===(n=r[s].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(ni(a)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Vs.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Cc.Kt=new Cc;class Tc{constructor(){this.Cn=new Ic}addToCollectionParentIndex(e,t){return this.Cn.add(t),la.resolve()}getCollectionParents(e,t){return la.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return la.resolve()}deleteFieldIndex(e,t){return la.resolve()}deleteAllFieldIndexes(e){return la.resolve()}createTargetIndexes(e,t){return la.resolve()}getDocumentsMatchingTarget(e,t){return la.resolve(null)}getIndexType(e,t){return la.resolve(0)}getFieldIndexes(e,t){return la.resolve([])}getNextCollectionGroupToUpdate(e){return la.resolve(null)}getMinOffset(e,t){return la.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return la.resolve(ra.min())}updateCollectionGroup(e,t,n){return la.resolve()}updateIndexEntries(e,t){return la.resolve()}}class Ic{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qa(Ms.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Qa(Ms.comparator)).toArray()}}new Uint8Array(0);const _c={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ac=41943040;class Pc{static withCacheSize(e){return new Pc(e,Pc.DEFAULT_COLLECTION_PERCENTILE,Pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Pc.DEFAULT_COLLECTION_PERCENTILE=10,Pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pc.DEFAULT=new Pc(Ac,Pc.DEFAULT_COLLECTION_PERCENTILE,Pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pc.DISABLED=new Pc(-1,0,0);class Dc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dc(0)}static cr(){return new Dc(-1)}}const Rc="LruGarbageCollector",Lc=1048576;function Oc(e,t){let[n,r]=e,[s,a]=t;const i=Is(n,s);return 0===i?Is(r,a):i}class Mc{constructor(e){this.Ir=e,this.buffer=new Qa(Oc),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Oc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fc{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){ls(Rc,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ua(e)?ls(Rc,"Ignoring IndexedDB error during garbage collection: ",e):await oa(e)}await this.Vr(3e5)})}}class Uc{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return la.resolve(da.ce);const n=new Mc(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ls("LruGarbageCollector","Garbage collection skipped; disabled"),la.resolve(_c)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ls("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),_c):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,a,i,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ls("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,i=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),os()<=bn.DEBUG&&ls("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(i-a)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-i)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),la.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Vc(e,t){return new Uc(e,t)}class zc{constructor(){this.changes=new Ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ui.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?la.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&hl(n.mutation,e,Xa.empty(),Xs.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Bo()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bo();const r=Mo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Lo();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Mo();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Bo()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Do();const a=Uo(),i=Uo();return t.forEach((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof gl)?s=s.insert(t.key,t):void 0!==i?(a.set(t.key,i.mutation.getFieldMask()),hl(i.mutation,t,i.mutation.getFieldMask(),Xs.now())):a.set(t.key,Xa.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>{var n;return i.set(e,new Bc(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),i))}recalculateAndSaveOverlays(e,t){const n=Uo();let r=new Wa((e,t)=>e-t),s=Bo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const a=t.get(e);if(null===a)return;let i=n.get(e)||Xa.empty();i=s.applyToLocalView(a,i),n.set(e,i);const o=(r.get(s.batchId)||Bo()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const a=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),o=r.key,l=r.value,c=Fo();l.forEach(e=>{if(!s.has(e)){const r=ul(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return la.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Vs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yo(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):la.resolve(Mo());let i=Zs,o=s;return a.next(t=>la.forEach(t,(t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?la.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Bo())).next(e=>({batchId:i,changes:Oo(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Vs(t)).next(e=>{let t=Lo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let a=Lo();return this.indexManager.getCollectionParents(e,s).next(i=>la.forEach(i,i=>{const o=function(e,t){return new po(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{a=a.insert(e,t)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ui.newInvalidDocument(r)))});let n=Lo();return e.forEach((e,r)=>{const a=s.get(e);void 0!==a&&hl(a.mutation,r,Xa.empty(),Xs.now()),Co(t,r)&&(n=n.insert(e,r))}),n})}}class Gc{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return la.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ec(e.createTime)}}(t)),la.resolve()}getNamedQuery(e,t){return la.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:kc(e.bundledQuery),readTime:ec(e.readTime)}}(t)),la.resolve()}}class Hc{constructor(){this.overlays=new Wa(Vs.comparator),this.qr=new Map}getOverlay(e,t){return la.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Mo();return la.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),la.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),la.resolve()}getOverlaysForCollection(e,t,n){const r=Mo(),s=t.length+1,a=new Vs(t.child("")),i=this.overlays.getIteratorFrom(a);for(;i.hasNext();){const e=i.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return la.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Wa((e,t)=>e-t);const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Mo(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Mo(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>i.set(e,t)),!(i.size()>=r)););return la.resolve(i)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Sl(t,n));let s=this.qr.get(t);void 0===s&&(s=Bo(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class Wc{constructor(){this.sessionToken=Za.EMPTY_BYTE_STRING}getSessionToken(e){return la.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,la.resolve()}}class Kc{constructor(){this.Qr=new Qa(Jc.$r),this.Ur=new Qa(Jc.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Jc(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Jc(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Vs(new Ms([])),n=new Jc(t,e),r=new Jc(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Vs(new Ms([])),n=new Jc(t,e),r=new Jc(t,e+1);let s=Bo();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Jc(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Jc{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Vs.comparator(e.key,t.key)||Is(e.Yr,t.Yr)}static Kr(e,t){return Is(e.Yr,t.Yr)||Vs.comparator(e.key,t.key)}}class Qc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qa(Jc.$r)}checkEmpty(e){return la.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jl(s,t,n,r);this.mutationQueue.push(a);for(const i of r)this.Zr=this.Zr.add(new Jc(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return la.resolve(a)}lookupMutationBatch(e,t){return la.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return la.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return la.resolve(0===this.mutationQueue.length?ha:this.tr-1)}getAllMutationBatches(e){return la.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Jc(t,0),r=new Jc(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),la.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Qa(Is);return t.forEach(e=>{const t=new Jc(e,0),r=new Jc(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),la.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Vs.isDocumentKey(s)||(s=s.child(""));const a=new Jc(new Vs(s),0);let i=new Qa(Is);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.Yr)),!0)},a),la.resolve(this.ti(i))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ps(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return la.forEach(t.mutations,r=>{const s=new Jc(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Jc(t,0),r=this.Zr.firstAfterOrEqual(n);return la.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,la.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Yc{constructor(e){this.ri=e,this.docs=new Wa(Vs.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return la.resolve(n?n.document.mutableCopy():Ui.newInvalidDocument(t))}getEntries(e,t){let n=Do();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ui.newInvalidDocument(e))}),la.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Do();const a=t.path,i=new Vs(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||sa(na(i),n)<=0||(r.has(i.key)||Co(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return la.resolve(s)}getAllFromCollectionGroup(e,t,n,r){hs(9500)}ii(e,t){return la.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Xc(this)}getSize(e){return la.resolve(this.size)}}class Xc extends zc{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),la.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class $c{constructor(e){this.persistence=e,this.si=new Ao(e=>uo(e),ho),this.lastRemoteSnapshotVersion=$s.min(),this.highestTargetId=0,this.oi=0,this._i=new Kc,this.targetCount=0,this.ai=Dc.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),la.resolve()}getLastRemoteSnapshotVersion(e){return la.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return la.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),la.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),la.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Dc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,la.resolve()}updateTargetData(e,t){return this.Pr(t),la.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,la.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((a,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)}),la.waitFor(s).next(()=>r)}getTargetCount(e){return la.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return la.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),la.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),la.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),la.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return la.resolve(n)}containsKey(e,t){return la.resolve(this._i.containsKey(t))}}class Zc{constructor(e,t){this.ui={},this.overlays={},this.ci=new da(0),this.li=!1,this.li=!0,this.hi=new Wc,this.referenceDelegate=e(this),this.Pi=new $c(this),this.indexManager=new Tc,this.remoteDocumentCache=function(e){return new Yc(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Ec(t),this.Ii=new Gc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Qc(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ls("MemoryPersistence","Starting transaction:",e);const r=new eu(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return la.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class eu extends ia{constructor(e){super(),this.currentSequenceNumber=e}}class tu{constructor(e){this.persistence=e,this.Ri=new Kc,this.Vi=null}static mi(e){return new tu(e)}get fi(){if(this.Vi)return this.Vi;throw hs(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),la.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),la.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),la.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return la.forEach(this.fi,n=>{const r=Vs.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,$s.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return la.or([()=>la.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class nu{constructor(e,t){this.persistence=e,this.pi=new Ao(e=>va(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Vc(this,t)}static mi(e,t){return new nu(e,t)}Ei(){}di(e){return la.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return la.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?la.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,$s.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),la.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),la.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),la.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),la.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ci(e.data.value)),t}br(e,t,n){return la.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return la.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ru{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Bo(),r=Bo();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ru(e,t.fromCache,n,r)}}class su{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class au{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=en()?8:ca($t())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new su;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(os()<=bn.DEBUG&&ls("QueryEngine","SDK will not create cache indexes for query:",ko(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),la.resolve()):(os()<=bn.DEBUG&&ls("QueryEngine","Query:",ko(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(os()<=bn.DEBUG&&ls("QueryEngine","The SDK decides to create cache indexes for query:",ko(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xo(t))):la.resolve())}ys(e,t){if(vo(t))return la.resolve(null);let n=xo(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=No(t,null,"F"),n=xo(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Bo(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const a=this.Ds(t,r);return this.Cs(t,a,s,n.readTime)?this.ys(e,No(t,null,"F")):this.vs(e,a,t,n)}))})))}ws(e,t,n,r){return vo(t)||r.isEqual($s.min())?la.resolve(null):this.ps.getDocuments(e,n).next(s=>{const a=this.Ds(t,s);return this.Cs(t,a,n,r)?la.resolve(null):(os()<=bn.DEBUG&&ls("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ko(t)),this.vs(e,a,t,ta(r,Zs)).next(e=>e))})}Ds(e,t){let n=new Qa(Io(e));return t.forEach((t,r)=>{Co(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return os()<=bn.DEBUG&&ls("QueryEngine","Using full collection scan to execute query:",ko(t)),this.ps.getDocumentsMatchingQuery(e,t,ra.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const iu="LocalStore";class ou{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Wa(Is),this.xs=new Ao(e=>uo(e),ho),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qc(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function lu(e,t,n,r){return new ou(e,t,n,r)}async function cu(e,t){const n=fs(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],a=[];let i=Bo();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:a}))})})}function uu(e){const t=fs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function du(e,t,n){let r=Bo(),s=Bo();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Do();return n.forEach((n,a)=>{const i=e.get(n);a.isFoundDocument()!==i.isFoundDocument()&&(s=s.add(n)),a.isNoDocument()&&a.version.isEqual($s.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ls(iu,"Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)}),{ks:r,qs:s}})}function hu(e,t){const n=fs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=ha),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function mu(e,t){const n=fs(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,la.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new Sc(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function pu(e,t,n){const r=fs(e),s=r.Ms.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!ua(e))throw e;ls(iu,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function fu(e,t,n){const r=fs(e);let s=$s.min(),a=Bo();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=fs(e),s=r.xs.get(n);return void 0!==s?la.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,xo(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{a=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:$s.min(),n?a:Bo())).next(e=>(gu(r,To(t),e),{documents:e,Qs:a})))}function gu(e,t,n){let r=e.Os.get(t)||$s.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class vu{constructor(){this.activeTargetIds=Go()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yu{constructor(){this.Mo=new vu,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bu{Oo(e){}shutdown(){}}const xu="ConnectivityMonitor";class wu{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ls(xu,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ls(xu,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ju=null;function Nu(){return null===ju?ju=268435456+Math.round(2147483648*Math.random()):ju++,"0x"+ju.toString(16)}const Su="RestConnection",Eu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ku{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===hi?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,s){const a=Nu(),i=this.zo(e,t.toUriEncodedString());ls(Su,"Sending RPC '".concat(e,"' ").concat(a,":"),i,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,s);const{host:l}=new URL(i),c=Kt(l);return this.Jo(e,i,o,n,c).then(t=>(ls(Su,"Received RPC '".concat(e,"' ").concat(a,": "),t),t),t=>{throw us(Su,"RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",i,"request:",n),t})}Ho(e,t,n,r,s,a){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+as,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Eu[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Cu{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Tu="WebChannelConnection";class Iu extends ku{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const a=Nu();return new Promise((s,i)=>{const o=new Wr;o.setWithCredentials(!0),o.listenOnce(Jr.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Qr.NO_ERROR:const n=o.getResponseJson();ls(Tu,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(n)),s(n);break;case Qr.TIMEOUT:ls(Tu,"RPC '".concat(e,"' ").concat(a," timed out")),i(new vs(gs.DEADLINE_EXCEEDED,"Request time out"));break;case Qr.HTTP_ERROR:const r=o.getStatus();if(ls(Tu,"RPC '".concat(e,"' ").concat(a," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(gs).indexOf(t)>=0?t:gs.UNKNOWN}(n.status);i(new vs(e,n.message))}else i(new vs(gs.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new vs(gs.UNAVAILABLE,"Connection failed."));break;default:hs(9055,{l_:e,streamId:a,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{ls(Tu,"RPC '".concat(e,"' ").concat(a," completed."))}});const l=JSON.stringify(r);ls(Tu,"RPC '".concat(e,"' ").concat(a," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Nu(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Zr(),i=$r(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");ls(Tu,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=a.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const m=new Cu({Yo:t=>{h?ls(Tu,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(ls(Tu,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),ls(Tu,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Kr.EventType.OPEN,()=>{h||(ls(Tu,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.o_())}),p(u,Kr.EventType.CLOSE,()=>{h||(h=!0,ls(Tu,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.a_(),this.E_(u))}),p(u,Kr.EventType.ERROR,t=>{h||(h=!0,us(Tu,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),m.a_(new vs(gs.UNAVAILABLE,"The operation could not be completed")))}),p(u,Kr.EventType.MESSAGE,t=>{if(!h){var n;const s=t.data[0];ps(!!s,16349);const a=s,i=(null===a||void 0===a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(i){ls(Tu,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=kl[e];if(void 0!==t)return Il(t)}(t),s=i.message;void 0===n&&(n=gs.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),h=!0,m.a_(new vs(n,s)),u.close()}else ls(Tu,"RPC '".concat(e,"' stream ").concat(r," received:"),s),m.u_(s)}}),p(i,Xr.STAT_EVENT,t=>{t.stat===Yr.PROXY?ls(Tu,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Yr.NOPROXY&&ls(Tu,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function _u(){return"undefined"!=typeof document?document:null}function Au(e){return new Ql(e,!0)}class Pu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ls("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Du="PersistentStream";class Ru{constructor(e,t,n,r,s,a,i,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=i,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pu(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===gs.RESOURCE_EXHAUSTED?(cs(t.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===gs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new vs(gs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ls(Du,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ls(Du,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lu extends Ru{constructor(e,t,n,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:hs(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(ps(void 0===t||"string"==typeof t,58123),Za.fromBase64String(t||"")):(ps(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Za.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(e){const t=void 0===e.code?gs.UNKNOWN:Il(e.code);return new vs(t,e.message||"")}(i);n=new zl(r,s,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ac(e,r.document.name),a=ec(r.document.updateTime),i=r.document.createTime?ec(r.document.createTime):$s.min(),o=new Mi({mapValue:{fields:r.document.fields}}),l=Ui.newFoundDocument(s,a,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ul(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ac(e,r.document),a=r.readTime?ec(r.readTime):$s.min(),i=Ui.newNoDocument(s,a),o=r.removedTargetIds||[];n=new Ul([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ac(e,r.document),a=r.removedTargetIds||[];n=new Ul([],a,s,null)}else{if(!("filter"in t))return hs(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,a=new El(r,s),i=e.targetId;n=new Vl(i,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return $s.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?$s.min():t.readTime?ec(t.readTime):$s.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=lc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=mo(r)?{documents:hc(e,r)}:{query:mc(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=$l(e,t.resumeToken);const r=Yl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo($s.min())>0){n.readTime=Xl(e,t.snapshotVersion.toTimestamp());const r=Yl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hs(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=lc(this.serializer),t.removeTarget=e,this.q_(t)}}class Ou extends Ru{constructor(e,t,n,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ps(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ps(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){ps(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(ps(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ec(e.updateTime):ec(t);return n.isEqual($s.min())&&(n=ec(t)),new il(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ec(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=lc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>dc(this.serializer,e))};this.q_(t)}}class Mu{}class Fu extends Mu{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new vs(gs.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,i]=s;return this.connection.Go(e,nc(t,n),r,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===gs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vs(gs.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[i,o]=a;return this.connection.Ho(e,nc(t,n),r,i,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===gs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vs(gs.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Uu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(cs(t),this.aa=!1):ls("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Vu="RemoteStore";class zu{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Yu(this)&&(ls(Vu,"Restarting streams for network reachability change."),await async function(e){const t=fs(e);t.Ea.add(4),await qu(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Bu(t)}(this))})}),this.Ra=new Uu(n,r)}}async function Bu(e){if(Yu(e))for(const t of e.da)await t(!0)}async function qu(e){for(const t of e.da)await t(!1)}function Gu(e,t){const n=fs(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Qu(n)?Ju(n):fd(n).O_()&&Wu(n,t))}function Hu(e,t){const n=fs(e),r=fd(n);n.Ia.delete(t),r.O_()&&Ku(n,t),0===n.Ia.size&&(r.O_()?r.L_():Yu(n)&&n.Ra.set("Unknown"))}function Wu(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($s.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fd(e).Y_(t)}function Ku(e,t){e.Va.Ue(t),fd(e).Z_(t)}function Ju(e){e.Va=new ql({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),fd(e).start(),e.Ra.ua()}function Qu(e){return Yu(e)&&!fd(e).x_()&&e.Ia.size>0}function Yu(e){return 0===fs(e).Ea.size}function Xu(e){e.Va=void 0}async function $u(e){e.Ra.set("Online")}async function Zu(e){e.Ia.forEach((t,n)=>{Wu(e,t)})}async function ed(e,t){Xu(e),Qu(e)?(e.Ra.ha(t),Ju(e)):e.Ra.set("Unknown")}async function td(e,t,n){if(e.Ra.set("Online"),t instanceof zl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){ls(Vu,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await nd(e,n)}else if(t instanceof Ul?e.Va.Ze(t):t instanceof Vl?e.Va.st(t):e.Va.tt(t),!n.isEqual($s.min()))try{const t=await uu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Za.EMPTY_BYTE_STRING,r.snapshotVersion)),Ku(e,t);const s=new Sc(r.target,t,n,r.sequenceNumber);Wu(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ls(Vu,"Failed to raise snapshot:",t),await nd(e,t)}}async function nd(e,t,n){if(!ua(t))throw t;e.Ea.add(1),await qu(e),e.Ra.set("Offline"),n||(n=()=>uu(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ls(Vu,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Bu(e)})}function rd(e,t){return t().catch(n=>nd(e,n,t))}async function sd(e){const t=fs(e),n=gd(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ha;for(;ad(t);)try{const e=await hu(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,id(t,e)}catch(e){await nd(t,e)}od(t)&&ld(t)}function ad(e){return Yu(e)&&e.Ta.length<10}function id(e,t){e.Ta.push(t);const n=gd(e);n.O_()&&n.X_&&n.ea(t.mutations)}function od(e){return Yu(e)&&!gd(e).x_()&&e.Ta.length>0}function ld(e){gd(e).start()}async function cd(e){gd(e).ra()}async function ud(e){const t=gd(e);for(const n of e.Ta)t.ea(n.mutations)}async function dd(e,t,n){const r=e.Ta.shift(),s=Nl.from(r,t,n);await rd(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await sd(e)}async function hd(e,t){t&&gd(e).X_&&await async function(e,t){if(function(e){return Tl(e)&&e!==gs.ABORTED}(t.code)){const n=e.Ta.shift();gd(e).B_(),await rd(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await sd(e)}}(e,t),od(e)&&ld(e)}async function md(e,t){const n=fs(e);n.asyncQueue.verifyOperationInProgress(),ls(Vu,"RemoteStore received new credentials");const r=Yu(n);n.Ea.add(3),await qu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Bu(n)}async function pd(e,t){const n=fs(e);t?(n.Ea.delete(2),await Bu(n)):t||(n.Ea.add(2),await qu(n),n.Ra.set("Unknown"))}function fd(e){return e.ma||(e.ma=function(e,t,n){const r=fs(e);return r.sa(),new Lu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:$u.bind(null,e),t_:Zu.bind(null,e),r_:ed.bind(null,e),H_:td.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Qu(e)?Ju(e):e.Ra.set("Unknown")):(await e.ma.stop(),Xu(e))})),e.ma}function gd(e){return e.fa||(e.fa=function(e,t,n){const r=fs(e);return r.sa(),new Ou(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:cd.bind(null,e),r_:hd.bind(null,e),ta:ud.bind(null,e),na:dd.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await sd(e)):(await e.fa.stop(),e.Ta.length>0&&(ls(Vu,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class vd{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const a=Date.now()+n,i=new vd(e,t,a,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vs(gs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yd(e,t){if(cs("AsyncQueue","".concat(t,": ").concat(e)),ua(e))return new vs(gs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class bd{static emptySet(e){return new bd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Vs.comparator(t.key,n.key):(e,t)=>Vs.comparator(e.key,t.key),this.keyedMap=Lo(),this.sortedSet=new Wa(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new bd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class xd{constructor(){this.ga=new Wa(Vs.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):hs(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class wd{constructor(e,t,n,r,s,a,i,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=i,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const a=[];return t.forEach(e=>{a.push({type:0,doc:e})}),new wd(e,t,bd.emptySet(t),a,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&So(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class jd{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Nd{constructor(){this.queries=Sd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=fs(e),r=n.queries;n.queries=Sd(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new vs(gs.ABORTED,"Firestore shutting down"))}}function Sd(){return new Ao(e=>Eo(e),So)}async function Ed(e,t){const n=fs(e);let r=3;const s=t.query;let a=n.queries.get(s);a?!a.ba()&&t.Da()&&(r=2):(a=new jd,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=yd(e,"Initialization of query '".concat(ko(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&Id(n)}async function kd(e,t){const n=fs(e),r=t.query;let s=3;const a=n.queries.get(r);if(a){const e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),0===a.Sa.length?s=t.Da()?0:1:!a.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Cd(e,t){const n=fs(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&Id(n)}function Td(e,t,n){const r=fs(e),s=r.queries.get(t);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(t)}function Id(e){e.Ca.forEach(e=>{e.next()})}var _d,Ad;(Ad=_d||(_d={})).Ma="default",Ad.Cache="cache";class Pd{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new wd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=wd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_d.Cache}}class Dd{constructor(e){this.key=e}}class Rd{constructor(e){this.key=e}}class Ld{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bo(),this.mutatedKeys=Bo(),this.eu=Io(e),this.tu=new bd(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new xd,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=r,i=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Co(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let m=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),m=!0):this.su(c,u)||(n.track({type:2,doc:u}),m=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(i=!0)):!c&&u?(n.track({type:0,doc:u}),m=!0):c&&!u&&(n.track({type:1,doc:c}),m=!0,(o||l)&&(i=!0)),m&&(u?(a=a.add(u),s=h?s.add(e):s.delete(e)):(a=a.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:i,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hs(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const i=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==a.length||l?{snapshot:new wd(this.query,e.tu,s,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:i}:{au:i}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Bo(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Rd(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Dd(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Bo();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Od="SyncEngine";class Md{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Fd{constructor(e){this.key=e,this.hu=!1}}class Ud{constructor(e,t,n,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ao(e=>Eo(e),So),this.Iu=new Map,this.Eu=new Set,this.du=new Wa(Vs.comparator),this.Au=new Map,this.Ru=new Kc,this.Vu={},this.mu=new Map,this.fu=Dc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Vd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=oh(e);let s;const a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await Bd(r,t,n,!0),s}async function zd(e,t){const n=oh(e);await Bd(n,t,!0,!1)}async function Bd(e,t,n,r){const s=await mu(e.localStore,xo(t)),a=s.targetId,i=e.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await qd(e,t,a,"current"===i,s.resumeToken)),e.isPrimaryClient&&n&&Gu(e.remoteStore,s),o}async function qd(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await fu(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const a=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,a,i);return th(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const a=await fu(e.localStore,t,!0),i=new Ld(t,a.Qs),o=i.ru(a.documents),l=Fl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=i.applyChanges(o,e.isPrimaryClient,l);th(e,n,c.au);const u=new Md(t,n,i);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Gd(e,t,n){const r=fs(e),s=r.Tu.get(t),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(e=>!So(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await pu(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hu(r.remoteStore,s.targetId),Zd(r,s.targetId)}).catch(oa)):(Zd(r,s.targetId),await pu(r.localStore,s.targetId,!0))}async function Hd(e,t){const n=fs(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hu(n.remoteStore,r.targetId))}async function Wd(e,t){const n=fs(e);try{const e=await function(e,t){const n=fs(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const i=[];t.targetChanges.forEach((a,o)=>{const l=s.get(o);if(!l)return;i.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,a.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Za.EMPTY_BYTE_STRING,$s.min()).withLastLimboFreeSnapshotVersion($s.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,a)&&i.push(n.Pi.updateTargetData(e,c))});let o=Do(),l=Bo();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),i.push(du(e,a,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual($s.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));i.push(t)}return la.waitFor(i).next(()=>a.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(ps(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?ps(r.hu,14607):e.removedDocuments.size>0&&(ps(r.hu,42227),r.hu=!1))}),await sh(n,e,t)}catch(e){await oa(e)}}function Kd(e,t,n){const r=fs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=fs(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Id(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Jd(e,t,n){const r=fs(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),a=s&&s.key;if(a){let e=new Wa(Vs.comparator);e=e.insert(a,Ui.newNoDocument(a,$s.min()));const n=Bo().add(a),s=new Ml($s.min(),new Map,new Wa(Is),e,n);await Wd(r,s),r.du=r.du.remove(a),r.Au.delete(t),rh(r)}else await pu(r.localStore,t,!1).then(()=>Zd(r,t,n)).catch(oa)}async function Qd(e,t){const n=fs(e),r=t.batch.batchId;try{const e=await function(e,t){const n=fs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,a=s.keys();let i=la.resolve();return a.forEach(e=>{i=i.next(()=>r.getEntry(t,e)).next(t=>{const a=n.docVersions.get(e);ps(null!==a,48541),t.version.compareTo(a)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),i.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Bo();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);$d(n,r,null),Xd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sh(n,e)}catch(e){await oa(e)}}async function Yd(e,t,n){const r=fs(e);try{const e=await function(e,t){const n=fs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(ps(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);$d(r,t,n),Xd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await sh(r,e)}catch(n){await oa(n)}}function Xd(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function $d(e,t,n){const r=fs(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Zd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||eh(e,t)})}function eh(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Hu(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),rh(e))}function th(e,t,n){for(const r of n)r instanceof Dd?(e.Ru.addReference(r.key,t),nh(e,r)):r instanceof Rd?(ls(Od,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||eh(e,r.key)):hs(19791,{wu:r})}function nh(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(ls(Od,"New document in limbo: "+n),e.Eu.add(r),rh(e))}function rh(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Vs(Ms.fromString(t)),r=e.fu.next();e.Au.set(r,new Fd(n)),e.du=e.du.insert(n,r),Gu(e.remoteStore,new Sc(xo(go(n.path)),r,"TargetPurposeLimboResolution",da.ce))}}async function sh(e,t,n){const r=fs(e),s=[],a=[],i=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{i.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const s=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=ru.As(o.targetId,e);a.push(t)}}))}),await Promise.all(i),r.Pu.H_(s),await async function(e,t){const n=fs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>la.forEach(t,t=>la.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>la.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ua(e))throw e;ls(iu,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,a))}async function ah(e,t){const n=fs(e);if(!n.currentUser.isEqual(t)){ls(Od,"User change. New user:",t.toKey());const e=await cu(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new vs(gs.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await sh(n,e.Ls)}}function ih(e,t){const n=fs(e),r=n.Au.get(t);if(r&&r.hu)return Bo().add(r.key);{let e=Bo();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function oh(e){const t=fs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Wd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ih.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jd.bind(null,t),t.Pu.H_=Cd.bind(null,t.eventManager),t.Pu.yu=Td.bind(null,t.eventManager),t}function lh(e){const t=fs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Yd.bind(null,t),t}class ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Au(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lu(this.persistence,new au,e.initialUser,this.serializer)}Cu(e){return new Zc(tu.mi,this.serializer)}Du(e){return new yu}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ch.provider={build:()=>new ch};class uh extends ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ps(this.persistence.referenceDelegate instanceof nu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Fc(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Pc.withCacheSize(this.cacheSizeBytes):Pc.DEFAULT;return new Zc(e=>nu.mi(e,t),this.serializer)}}class dh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Kd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ah.bind(null,this.syncEngine),await pd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Nd}createDatastore(e){const t=Au(e.databaseInfo.databaseId),n=function(e){return new Iu(e)}(e.databaseInfo);return function(e,t,n,r){return new Fu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new zu(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Kd(this.syncEngine,e,0),wu.v()?new wu:new bu)}createSyncEngine(e,t){return function(e,t,n,r,s,a,i){const o=new Ud(e,t,n,r,s,a);return i&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=fs(e);ls(Vu,"RemoteStore shutting down."),t.Ea.add(5),await qu(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}dh.provider={build:()=>new dh};class hh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const mh="FirestoreClient";class ph{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ss.UNAUTHENTICATED,this.clientId=Ts.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{ls(mh,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ls(mh,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=yd(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function fh(e,t){e.asyncQueue.verifyOperationInProgress(),ls(mh,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await cu(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function gh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vh(e);ls(mh,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>md(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>md(t.remoteStore,n)),e._onlineComponents=t}async function vh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ls(mh,"Using user provided OfflineComponentProvider");try{await fh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===gs.FAILED_PRECONDITION||e.code===gs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;us("Error using user provided cache. Falling back to memory cache: "+n),await fh(e,new ch)}}else ls(mh,"Using default OfflineComponentProvider"),await fh(e,new uh(void 0));return e._offlineComponents}async function yh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ls(mh,"Using user provided OnlineComponentProvider"),await gh(e,e._uninitializedComponentsProvider._online)):(ls(mh,"Using default OnlineComponentProvider"),await gh(e,new dh))),e._onlineComponents}function bh(e){return yh(e).then(e=>e.syncEngine)}async function xh(e){const t=await yh(e),n=t.eventManager;return n.onListen=Vd.bind(null,t.syncEngine),n.onUnlisten=Gd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=zd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Hd.bind(null,t.syncEngine),n}function wh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ys;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const a=new hh({next:o=>{a.Nu(),t.enqueueAndForget(()=>kd(e,i));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new vs(gs.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new vs(gs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),i=new Pd(go(n.path),a,{includeMetadataChanges:!0,qa:!0});return Ed(e,i)}(await xh(e),e.asyncQueue,t,n,r)),r.promise}function jh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ys;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const a=new hh({next:n=>{a.Nu(),t.enqueueAndForget(()=>kd(e,i)),n.fromCache&&"server"===r.source?s.reject(new vs(gs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),i=new Pd(n,a,{includeMetadataChanges:!0,qa:!0});return Ed(e,i)}(await xh(e),e.asyncQueue,t,n,r)),r.promise}function Nh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Sh=new Map,Eh="firestore.googleapis.com",kh=!0;class Ch{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new vs(gs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Eh,this.ssl=kh}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:kh;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ac;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Lc)throw new vs(gs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new vs(gs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new vs(gs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new vs(gs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new vs(gs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ch({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vs(gs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vs(gs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ch(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xs;switch(e.type){case"firstParty":return new Ss(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new vs(gs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sh.get(e);t&&(ls("ComponentProvider","Removing Datastore"),Sh.delete(e),t.terminate())}(this),Promise.resolve()}}function Ih(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Ws(e,Th);const s=Kt(t),a=e._getSettings(),i=d(d({},a),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);s&&(Jt("https://".concat(o)),Xt("Firestore",!0)),a.host!==Eh&&a.host!==o&&us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=d(d({},a),{},{host:o,ssl:s,emulatorOptions:r});if(!an(l,i)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ss.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=d({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ut(JSON.stringify({alg:"none",type:"JWT"})),Ut(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new vs(gs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ss(s)}e._authCredentials=new ws(new bs(t,n))}}class _h{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _h(this.firestore,e,this._query)}}class Ah{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ph(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ah(this.firestore,e,this._key)}toJSON(){return{type:Ah._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Js(t,Ah._jsonSchema))return new Ah(e,n||null,new Vs(Ms.fromString(t.referencePath)))}}Ah._jsonSchemaVersion="firestore/documentReference/1.0",Ah._jsonSchema={type:Ks("string",Ah._jsonSchemaVersion),referencePath:Ks("string")};class Ph extends _h{constructor(e,t,n){super(e,t,go(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ah(this.firestore,null,new Vs(e))}withConverter(e){return new Ph(this.firestore,e,this._path)}}function Dh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=mn(e),zs("collection","path",t),e instanceof Th){const n=Ms.fromString(t,...r);return qs(n),new Ph(e,null,n)}{if(!(e instanceof Ah||e instanceof Ph))throw new vs(gs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ms.fromString(t,...r));return qs(n),new Ph(e.firestore,null,n)}}function Rh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=mn(e),1===arguments.length&&(t=Ts.newId()),zs("doc","path",t),e instanceof Th){const n=Ms.fromString(t,...r);return Bs(n),new Ah(e,null,new Vs(n))}{if(!(e instanceof Ah||e instanceof Ph))throw new vs(gs.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ms.fromString(t,...r));return Bs(n),new Ah(e.firestore,e instanceof Ph?e.converter:null,new Vs(n))}}const Lh="AsyncQueue";class Oh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pu(this,"async_queue_retry"),this._c=()=>{const e=_u();e&&ls(Lh,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=_u();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_u();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new ys;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(xy){if(!ua(xy))throw xy;ls(Lh,"Operation failed with retryable error: "+xy)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,cs("INTERNAL UNHANDLED ERROR: ",Mh(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=vd.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&hs(47125,{Pc:Mh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Mh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Fh extends Th{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Oh,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Oh(e),this._firestoreClient=void 0,await e}}}function Uh(e){if(e._terminated)throw new vs(gs.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Vh(e),e._firestoreClient}function Vh(e){var t,n,r;const s=e._freezeSettings(),a=function(e,t,n,r){return new di(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Nh(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||null!==(n=s.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new ph(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class zh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zh(Za.fromBase64String(e))}catch(e){throw new vs(gs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new zh(Za.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Js(e,zh._jsonSchema))return zh.fromBase64String(e.bytes)}}zh._jsonSchemaVersion="firestore/bytes/1.0",zh._jsonSchema={type:Ks("string",zh._jsonSchemaVersion),bytes:Ks("string")};class Bh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new vs(gs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Us(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qh{constructor(e){this._methodName=e}}class Gh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vs(gs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vs(gs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Is(this._lat,e._lat)||Is(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gh._jsonSchemaVersion}}static fromJSON(e){if(Js(e,Gh._jsonSchema))return new Gh(e.latitude,e.longitude)}}Gh._jsonSchemaVersion="firestore/geoPoint/1.0",Gh._jsonSchema={type:Ks("string",Gh._jsonSchemaVersion),latitude:Ks("number"),longitude:Ks("number")};class Hh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Js(e,Hh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Hh(e.vectorValues);throw new vs(gs.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hh._jsonSchemaVersion="firestore/vectorValue/1.0",Hh._jsonSchema={type:Ks("string",Hh._jsonSchemaVersion),vectorValues:Ks("object")};const Wh=/^__.*__$/;class Kh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new gl(e,this.data,this.fieldMask,t,this.fieldTransforms):new fl(e,this.data,t,this.fieldTransforms)}}class Jh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new gl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hs(40011,{Ac:e})}}class Yh{constructor(e,t,n,r,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yh(d(d({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Qh(this.Ac)&&Wh.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Xh{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Au(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Yh({Ac:e,methodName:t,Dc:n,path:Us.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(e){const t=e._freezeSettings(),n=Au(e._databaseId);return new Xh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zh(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.Cc(a.merge||a.mergeFields?2:0,t,n,s);om("Data must be an object, but it was:",i,r);const o=am(r,i);let l,c;if(a.merge)l=new Xa(i.fieldMask),c=i.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const s=lm(t,r,n);if(!i.contains(s))throw new vs(gs.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));hm(e,s)||e.push(s)}l=new Xa(e),c=i.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=i.fieldTransforms;return new Kh(new Mi(o),l,c)}class em extends qh{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof em}}function tm(e,t,n,r){const s=e.Cc(1,t,n);om("Data must be an object, but it was:",s,r);const a=[],i=Mi.empty();Ga(r,(e,r)=>{const o=um(t,e,n);r=mn(r);const l=s.yc(o);if(r instanceof em)a.push(o);else{const e=sm(r,l);null!=e&&(a.push(o),i.set(o,e))}});const o=new Xa(a);return new Jh(i,o,s.fieldTransforms)}function nm(e,t,n,r,s,a){const i=e.Cc(1,t,n),o=[lm(t,r,n)],l=[s];if(a.length%2!=0)throw new vs(gs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<a.length;h+=2)o.push(lm(t,a[h])),l.push(a[h+1]);const c=[],u=Mi.empty();for(let h=o.length-1;h>=0;--h)if(!hm(c,o[h])){const e=o[h];let t=l[h];t=mn(t);const n=i.yc(e);if(t instanceof em)c.push(e);else{const r=sm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Xa(c);return new Jh(u,d,i.fieldTransforms)}function rm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return sm(n,e.Cc(r?4:3,t))}function sm(e,t){if(im(e=mn(e)))return om("Unsupported field value:",t,e),am(e,t);if(e instanceof qh)return function(e,t){if(!Qh(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=sm(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=mn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ko(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Xs.fromDate(e);return{timestampValue:Xl(t.serializer,n)}}if(e instanceof Xs){const n=new Xs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xl(t.serializer,n)}}if(e instanceof Gh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zh)return{bytesValue:$l(t.serializer,e._byteString)};if(e instanceof Ah){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:tc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Hh)return function(e,t){return{mapValue:{fields:{[pi]:{stringValue:vi},[yi]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ho(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Hs(e)))}(e,t)}function am(e,t){const n={};return Ha(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ga(e,(e,r)=>{const s=sm(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function im(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xs||e instanceof Gh||e instanceof zh||e instanceof Ah||e instanceof qh||e instanceof Hh)}function om(e,t,n){if(!im(n)||!Gs(n)){const r=Hs(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function lm(e,t,n){if((t=mn(t))instanceof Bh)return t._internalPath;if("string"==typeof t)return um(e,t);throw dm("Field path arguments must be of type string or ",e,!1,void 0,n)}const cm=new RegExp("[~\\*/\\[\\]]");function um(e,t,n){if(t.search(cm)>=0)throw dm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Bh(...t.split("."))._internalPath}catch(r){throw dm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dm(e,t,n,r,s){const a=r&&!r.isEmpty(),i=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=" in field ".concat(r)),i&&(l+=" in document ".concat(s)),l+=")"),new vs(gs.INVALID_ARGUMENT,o+e+l)}function hm(e,t){return e.some(e=>e.isEqual(t))}class mm{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ah(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pm extends mm{data(){return super.data()}}function fm(e,t){return"string"==typeof t?um(e,t):t instanceof Bh?t._internalPath:t._delegate._internalPath}function gm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new vs(gs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vm{}class ym extends vm{}function bm(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];t instanceof vm&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof jm).length,n=e.filter(e=>e instanceof xm).length;if(t>1||t>0&&n>0)throw new vs(gs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)e=i._apply(e);return e}class xm extends ym{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new xm(e,t,n)}_apply(e){const t=this._parse(e);return Cm(e._query,t),new _h(e.firestore,e.converter,jo(e._query,t))}_parse(e){const t=$h(e.firestore),n=function(e,t,n,r,s,a,i){let o;if(s.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new vs(gs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){km(i,a);const t=[];for(const n of i)t.push(Em(r,e,n));o={arrayValue:{values:t}}}else o=Em(r,e,i)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||km(i,a),o=rm(n,t,i,"in"===a||"not-in"===a);return Wi.create(s,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function wm(e,t,n){const r=t,s=fm("where",e);return xm._create(s,r,n)}class jm extends vm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ki.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Cm(n,s),n=jo(n,s)}(e._query,t),new _h(e.firestore,e.converter,jo(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Nm extends ym{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Nm(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new vs(gs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new vs(gs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qi(t,n)}(e._query,this._field,this._direction);return new _h(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new po(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Sm(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=fm("orderBy",e);return Nm._create(n,t)}function Em(e,t,n){if("string"==typeof(n=mn(n))){if(""===n)throw new vs(gs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yo(t)&&-1!==n.indexOf("/"))throw new vs(gs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ms.fromString(n));if(!Vs.isDocumentKey(r))throw new vs(gs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ti(e,new Vs(r))}if(n instanceof Ah)return Ti(e,n._key);throw new vs(gs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Hs(n),"."))}function km(e,t){if(!Array.isArray(e)||0===e.length)throw new vs(gs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Cm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new vs(gs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new vs(gs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Tm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw hs(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ga(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[yi].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>ni(e.doubleValue));return new Hh(n)}convertGeoPoint(e){return new Gh(ni(e.latitude),ni(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ci(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ui(e));default:return null}}convertTimestamp(e){const t=ti(e);return new Xs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ms.fromString(e);ps(Nc(n),9688,{name:e});const r=new mi(n.get(1),n.get(3)),s=new Vs(n.popFirst(5));return r.isEqual(t)||cs("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Im(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class _m{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Am extends mm{constructor(e,t,n,r,s,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(fm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new vs(gs.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Am._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Am._jsonSchemaVersion="firestore/documentSnapshot/1.0",Am._jsonSchema={type:Ks("string",Am._jsonSchemaVersion),bundleSource:Ks("string","DocumentSnapshot"),bundleName:Ks("string"),bundle:Ks("string")};class Pm extends Am{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Dm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new _m(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Pm(this._firestore,this._userDataWriter,n.key,n,new _m(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vs(gs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Pm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new _m(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Pm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _m(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,a=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Rm(t.type),doc:r,oldIndex:s,newIndex:a}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new vs(gs.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Dm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ts.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Rm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hs(61501,{type:e})}}function Lm(e){e=Ws(e,Ah);const t=Ws(e.firestore,Fh);return wh(Uh(t),e._key).then(n=>qm(t,e,n))}Dm._jsonSchemaVersion="firestore/querySnapshot/1.0",Dm._jsonSchema={type:Ks("string",Dm._jsonSchemaVersion),bundleSource:Ks("string","QuerySnapshot"),bundleName:Ks("string"),bundle:Ks("string")};class Om extends Tm{constructor(e){super(),this.firestore=e}convertBytes(e){return new zh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ah(this.firestore,null,t)}}function Mm(e){e=Ws(e,_h);const t=Ws(e.firestore,Fh),n=Uh(t),r=new Om(t);return gm(e._query),jh(n,e._query).then(n=>new Dm(t,r,e,n))}function Fm(e,t,n){e=Ws(e,Ah);const r=Ws(e.firestore,Fh),s=Im(e.converter,t,n);return Bm(r,[Zh($h(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,ol.none())])}function Um(e,t,n){e=Ws(e,Ah);const r=Ws(e.firestore,Fh),s=$h(r);let a;for(var i=arguments.length,o=new Array(i>3?i-3:0),l=3;l<i;l++)o[l-3]=arguments[l];return a="string"==typeof(t=mn(t))||t instanceof Bh?nm(s,"updateDoc",e._key,t,n,o):tm(s,"updateDoc",e._key,t),Bm(r,[a.toMutation(e._key,ol.exists(!0))])}function Vm(e){return Bm(Ws(e.firestore,Fh),[new xl(e._key,ol.none())])}function zm(e,t){const n=Ws(e.firestore,Fh),r=Rh(e),s=Im(e.converter,t);return Bm(n,[Zh($h(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,ol.exists(!1))]).then(()=>r)}function Bm(e,t){return function(e,t){const n=new ys;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=lh(e);try{const e=await function(e,t){const n=fs(e),r=Xs.now(),s=t.reduce((e,t)=>e.add(t.key),Bo());let a,i;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Do(),l=Bo();return n.Ns.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{a=s;const i=[];for(const e of t){const t=ml(e,a.get(e.key).overlayedDocument);null!=t&&i.push(new gl(e.key,t,Fi(t.value.mapValue),ol.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)}).next(t=>{i=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:i.batchId,changes:Oo(a)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Wa(Is)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await sh(r,e.changes),await sd(r.remoteStore)}catch(e){const t=yd(e,"Failed to persist write");n.reject(t)}}(await bh(e),t,n)),n.promise}(Uh(e),t)}function qm(e,t,n){const r=n.docs.get(t._key),s=new Om(e);return new Am(e,s,t._key,r,new _m(n.hasPendingWrites,n.fromCache),t.converter)}class Gm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$h(e)}set(e,t,n){this._verifyNotCommitted();const r=Hm(e,this._firestore),s=Im(r.converter,t,n),a=Zh(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ol.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Hm(e,this._firestore);let s;for(var a=arguments.length,i=new Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];return s="string"==typeof(t=mn(t))||t instanceof Bh?nm(this._dataReader,"WriteBatch.update",r._key,t,n,i):tm(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,ol.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hm(e,this._firestore);return this._mutations=this._mutations.concat(new xl(t._key,ol.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vs(gs.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hm(e,t){if((e=mn(e)).firestore!==t)throw new vs(gs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Wm(e){return Uh(e=Ws(e,Fh)),new Gm(e,t=>Bm(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){as=e}(Tr),Nr(new pn("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const a=e.getProvider("app").getImmediate(),i=new Fh(new js(e.getProvider("auth-internal")),new ks(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new vs(gs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mi(e.options.projectId,t)}(a,r),a);return s=d({useFetchStreams:t},s),i._setSettings(s),i},"PUBLIC").setMultipleInstances(!0)),Ar(ns,rs,e),Ar(ns,rs,"esm2020")}();const Km=["providerId"],Jm=["uid","auth","stsTokenManager"],Qm=["providerId","signInMethod"];function Ym(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xm=Ym,$m=new rn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Zm=new Sn("@firebase/auth");function ep(e){if(Zm.logLevel<=bn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Zm.error("Auth (".concat(Tr,"): ").concat(e),...n)}}function tp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ap(e,...n)}function np(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ap(e,...n)}function rp(e,t,n){const r=d(d({},Xm()),{},{[t]:n});return new rn("auth","Firebase",r).create(t,{appName:e.name})}function sp(e){return rp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ap(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return $m.create(e,...n)}function ip(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw ap(t,...r)}}function op(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ep(t),new Error(t)}function lp(e,t){e||op(t)}function cp(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function up(){return"http:"===dp()||"https:"===dp()}function dp(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function hp(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(up()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class mp{constructor(e,t){this.shortDelay=e,this.longDelay=t,lp(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return hp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pp(e,t){lp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class fp{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void op("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void op("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void op("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},vp=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yp=new mp(3e4,6e4);function bp(e,t){return e.tenantId&&!t.tenantId?d(d({},t),{},{tenantId:e.tenantId}):t}async function xp(e,t,n,r){return wp(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},a={};r&&("GET"===t?a=r:s={body:JSON.stringify(r)});const i=ln(d({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=d({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Kt(e.emulatorConfig.host)&&(l.credentials="include"),fp.fetch()(await Np(e,e.config.apiHost,n,i),l)})}async function wp(e,t,n){e._canInitEmulator=!1;const r=d(d({},gp),t);try{const t=new Ep(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw kp(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const t=s.ok?a.errorMessage:a.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw kp(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw kp(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw kp(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw rp(e,o,i);tp(e,o)}}catch(xy){if(xy instanceof nn)throw xy;tp(e,"network-request-failed",{message:String(xy)})}}async function jp(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await xp(e,t,n,r,s);return"mfaPendingCredential"in a&&tp(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function Np(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),a=e,i=a.config.emulator?pp(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(vp.includes(n)&&(await a._persistenceManagerAvailable,"COOKIE"===a._getPersistenceType())){return a._getPersistence()._getFinalTarget(i).toString()}return i}function Sp(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ep{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(np(this.auth,"network-request-failed")),yp.get())})}}function kp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=np(e,t,r);return s.customData._tokenResponse=n,s}function Cp(e){return void 0!==e&&void 0!==e.enterprise}class Tp{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Sp(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ip(e,t){return xp(e,"GET","/v2/recaptchaConfig",bp(e,t))}async function _p(e,t){return xp(e,"POST","/v1/accounts:lookup",t)}function Ap(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(xy){}}function Pp(e){return 1e3*Number(e)}function Dp(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ep("JWT malformed, contained fewer than 3 sections"),null;try{const e=Vt(n);return e?JSON.parse(e):(ep("Failed to decode base64 JWT payload"),null)}catch(xy){return ep("Caught error parsing JWT payload as JSON",null===xy||void 0===xy?void 0:xy.toString()),null}}function Rp(e){const t=Dp(e);return ip(t,"internal-error"),ip("undefined"!==typeof t.exp,"internal-error"),ip("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Lp(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(xy){throw xy instanceof nn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(xy)&&e.auth.currentUser===e&&await e.auth.signOut(),xy}}class Op{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(xy){return void((null===xy||void 0===xy?void 0:xy.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Mp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ap(this.lastLoginAt),this.creationTime=Ap(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fp(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Lp(e,_p(n,{idToken:r}));ip(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const a=s.users[0];e._notifyReloadListener(a);const i=null!==(t=a.providerUserInfo)&&void 0!==t&&t.length?Up(a.providerUserInfo):[],o=(l=e.providerData,c=i,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&a.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Mp(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(e,m)}function Up(e){return e.map(e=>{let{providerId:t}=e,n=i(e,Km);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Vp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ip(e.idToken,"internal-error"),ip("undefined"!==typeof e.idToken,"internal-error"),ip("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Rp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ip(0!==e.length,"internal-error");const t=Rp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ip(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await wp(e,{},async()=>{const n=ln({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await Np(e,r,"/v1/token","key=".concat(s)),i=await e._getAdditionalHeaders();i["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:i,body:n};return e.emulatorConfig&&Kt(e.emulatorConfig.host)&&(o.credentials="include"),fp.fetch()(a,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,a=new Vp;return n&&(ip("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(ip("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),s&&(ip("number"===typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vp,this.toJSON())}_performRefresh(){return op("not implemented")}}function zp(e,t){ip("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Bp{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,Jm);this.providerId="firebase",this.proactiveRefresh=new Op(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Lp(this,this.stsTokenManager.getToken(this.auth,e));return ip(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=mn(e),r=await n.getIdToken(t),s=Dp(r);ip(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a="object"===typeof s.firebase?s.firebase:void 0,i=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Ap(Pp(s.auth_time)),issuedAtTime:Ap(Pp(s.iat)),expirationTime:Ap(Pp(s.exp)),signInProvider:i||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=mn(e);await Fp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ip(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>d({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bp(d(d({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ip(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Fp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(sp(this.auth));const e=await this.getIdToken();return await Lp(this,async function(e,t){return xp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return d(d({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>d({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,i,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,m=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,f=null!==(i=t.tenantId)&&void 0!==i?i:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:j,stsTokenManager:N}=t;ip(b&&N,e,"internal-error");const S=Vp.fromJSON(this.name,N);ip("string"===typeof b,e,"internal-error"),zp(u,e.name),zp(h,e.name),ip("boolean"===typeof x,e,"internal-error"),ip("boolean"===typeof w,e,"internal-error"),zp(m,e.name),zp(p,e.name),zp(f,e.name),zp(g,e.name),zp(v,e.name),zp(y,e.name);const E=new Bp({uid:b,auth:e,email:h,emailVerified:x,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:m,tenantId:f,stsTokenManager:S,createdAt:v,lastLoginAt:y});return j&&Array.isArray(j)&&(E.providerData=j.map(e=>d({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Vp;r.updateFromServerResponse(t);const s=new Bp({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Fp(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ip(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Up(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length),i=new Vp;i.updateFromIdToken(n);const o=new Bp({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Mp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length)};return Object.assign(o,l),o}}const qp=new Map;function Gp(e){lp(e instanceof Function,"Expected a class definition");let t=qp.get(e);return t?(lp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qp.set(e,t),t)}class Hp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Hp.type="NONE";const Wp=Hp;function Kp(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Jp{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Kp(this.userKey,r.apiKey,s),this.fullPersistenceKey=Kp("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await _p(this.auth,{idToken:e}).catch(()=>{});return t?Bp._fromGetAccountInfoResponse(this.auth,t,e):null}return Bp._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Jp(Gp(Wp),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Gp(Wp);const a=Kp(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(a);if(t){let n;if("string"===typeof t){const r=await _p(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Bp._fromGetAccountInfoResponse(e,r,t)}else n=Bp._fromJSON(e,t);c!==s&&(i=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],i&&await s._set(a,i.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(a)}catch(t){}})),new Jp(s,e,n)):new Jp(s,e,n)}}function Qp(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Zp(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tf(t))return"Blackberry";if(nf(t))return"Webos";if(Xp(t))return"Safari";if((t.includes("chrome/")||$p(t))&&!t.includes("edge/"))return"Chrome";if(ef(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Yp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/firefox\//i.test(e)}function Xp(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/crios\//i.test(e)}function Zp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/iemobile/i.test(e)}function ef(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/android/i.test(e)}function tf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/blackberry/i.test(e)}function nf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/webos/i.test(e)}function rf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sf(){return function(){const e=$t();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function af(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return rf(e)||ef(e)||nf(e)||tf(e)||/windows phone/i.test(e)||Zp(e)}function of(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qp($t());break;case"Worker":t="".concat(Qp($t()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Tr,"/").concat(r)}class lf{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(xy){r(xy)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(xy){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===xy||void 0===xy?void 0:xy.message})}}}class cf{constructor(e){var t,n,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,a,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class uf{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hf(this),this.idTokenSubscription=new hf(this),this.beforeStateQueue=new lf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$m,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gp(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await Jp.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(xy){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await _p(this,{idToken:e}),n=await Bp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Er(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var s,a;await this.getOrInitRedirectPersistenceManager();const t=null===(s=this.redirectUser)||void 0===s?void 0:s._redirectEventId,i=null===(a=n)||void 0===a?void 0:a._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==i||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(xy){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(xy))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ip(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(xy){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fp(e)}catch(xy){if((null===xy||void 0===xy?void 0:xy.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(sp(this));const t=e?mn(e):null;return t&&ip(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ip(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(sp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(sp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gp(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return xp(e,"GET","/v2/passwordPolicy",bp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new cf(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return xp(e,"POST","/v2/accounts:revokeToken",bp(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gp(e)||this._popupRedirectResolver;ip(t,this,"argument-error"),this.redirectPersistenceManager=await Jp.create(this,[Gp(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let a=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(ip(i,this,"internal-error"),i.then(()=>{a||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{a=!0,s()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ip(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=of(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Zm.logLevel<=bn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Zm.warn("Auth (".concat(Tr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function df(e){return mn(e)}class hf{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new dn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ip(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pf(e){return mf.loadJS(e)}function ff(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class gf{constructor(){this.enterprise=new vf}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vf{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yf="NO_RECAPTCHA";class bf{constructor(e){this.type="recaptcha-enterprise",this.auth=df(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Cp(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(yf)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new gf).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ip(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Tp(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Cp(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=mf.recaptchaEnterpriseScript;0!==t.length&&(t+=s),pf(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function xf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new bf(e);let i;if(s)i=yf;else try{i=await a.verify(n)}catch(l){i=await a.verify(n,!0)}const o=d({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wf(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await xf(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await xf(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("PHONE_PROVIDER")){const s=await xf(e,t,n);return r(e,s).catch(async s=>{var a;if("AUDIT"===(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await xf(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await xf(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function jf(e){const t=df(e),n=await Ip(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Tp(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new bf(t).verify()}}function Nf(e,t,n){const r=df(e);ip(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!(null===n||void 0===n||!n.disableWarnings),a=Sf(t),{host:i,port:o}=function(e){const t=Sf(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ef(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ef(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(a,"//").concat(i).concat(l,"/")},u=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return ip(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void ip(an(c,r.config.emulator)&&an(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Kt(i)?(Jt("".concat(a,"//").concat(i).concat(l)),Xt("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Sf(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ef(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class kf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return op("not implemented")}_getIdTokenResponse(e){return op("not implemented")}_linkToIdToken(e,t){return op("not implemented")}_getReauthenticationResolver(e){return op("not implemented")}}async function Cf(e,t){return xp(e,"POST","/v1/accounts:signUp",t)}async function Tf(e,t){return jp(e,"POST","/v1/accounts:signInWithPassword",bp(e,t))}class If extends kf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new If(e,t,"password")}static _fromEmailAndCode(e,t){return new If(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return wf(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Tf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return jp(e,"POST","/v1/accounts:signInWithEmailLink",bp(e,t))}(e,{email:this._email,oobCode:this._password});default:tp(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return wf(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Cf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return jp(e,"POST","/v1/accounts:signInWithEmailLink",bp(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:tp(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _f(e,t){return jp(e,"POST","/v1/accounts:signInWithIdp",bp(e,t))}class Af extends kf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Af(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tp("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,Qm);if(!n||!r)return null;const a=new Af(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return _f(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_f(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_f(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ln(t)}return e}}async function Pf(e,t){return xp(e,"POST","/v1/accounts:sendVerificationCode",bp(e,t))}const Df={USER_NOT_FOUND:"user-not-found"};class Rf extends kf{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Rf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Rf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return jp(e,"POST","/v1/accounts:signInWithPhoneNumber",bp(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await jp(e,"POST","/v1/accounts:signInWithPhoneNumber",bp(e,t));if(n.temporaryProof)throw kp(e,"account-exists-with-different-credential",n);return n}(e,d({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return jp(e,"POST","/v1/accounts:signInWithPhoneNumber",bp(e,d(d({},t),{},{operation:"REAUTH"})),Df)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Rf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Lf{constructor(e){var t,n,r,s,a,i;const o=cn(un(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);ip(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(a=o.lang)&&void 0!==a?a:null,this.tenantId=null!==(i=o.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=cn(un(e)).link,n=t?cn(un(t)).deep_link_id:null,r=cn(un(e)).deep_link_id;return(r?cn(un(r)).link:null)||r||n||t||e}(e);try{return new Lf(t)}catch(n){return null}}}class Of{constructor(){this.providerId=Of.PROVIDER_ID}static credential(e,t){return If._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Lf.parseLink(t);return ip(n,"argument-error"),If._fromEmailAndCode(e,n.code,n.tenantId)}}Of.PROVIDER_ID="password",Of.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Of.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Mf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ff extends Mf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Uf extends Ff{constructor(){super("facebook.com")}static credential(e){return Af._fromParams({providerId:Uf.PROVIDER_ID,signInMethod:Uf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uf.credentialFromTaggedObject(e)}static credentialFromError(e){return Uf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Uf.credential(t.oauthAccessToken)}catch(n){return null}}}Uf.FACEBOOK_SIGN_IN_METHOD="facebook.com",Uf.PROVIDER_ID="facebook.com";class Vf extends Ff{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Af._fromParams({providerId:Vf.PROVIDER_ID,signInMethod:Vf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vf.credentialFromTaggedObject(e)}static credentialFromError(e){return Vf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Vf.credential(n,r)}catch(s){return null}}}Vf.GOOGLE_SIGN_IN_METHOD="google.com",Vf.PROVIDER_ID="google.com";class zf extends Ff{constructor(){super("github.com")}static credential(e){return Af._fromParams({providerId:zf.PROVIDER_ID,signInMethod:zf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zf.credentialFromTaggedObject(e)}static credentialFromError(e){return zf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zf.credential(t.oauthAccessToken)}catch(n){return null}}}zf.GITHUB_SIGN_IN_METHOD="github.com",zf.PROVIDER_ID="github.com";class Bf extends Ff{constructor(){super("twitter.com")}static credential(e,t){return Af._fromParams({providerId:Bf.PROVIDER_ID,signInMethod:Bf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bf.credentialFromTaggedObject(e)}static credentialFromError(e){return Bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Bf.credential(n,r)}catch(s){return null}}}Bf.TWITTER_SIGN_IN_METHOD="twitter.com",Bf.PROVIDER_ID="twitter.com";class qf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Bp._fromIdTokenResponse(e,n,r),a=Gf(n);return new qf({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Gf(n);return new qf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Gf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Hf extends nn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Hf.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Hf(e,t,n,r)}}function Wf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Hf._fromErrorAndOperation(e,n,t,r);throw n})}async function Kf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Lp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return qf._forOperation(e,"link",r)}async function Jf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Er(r.app))return Promise.reject(sp(r));const s="reauthenticate";try{const a=await Lp(e,Wf(r,s,t,e),n);ip(a.idToken,r,"internal-error");const i=Dp(a.idToken);ip(i,r,"internal-error");const{sub:o}=i;return ip(e.uid===o,r,"user-mismatch"),qf._forOperation(e,s,a)}catch(xy){throw(null===xy||void 0===xy?void 0:xy.code)==="auth/".concat("user-not-found")&&tp(r,"user-mismatch"),xy}}async function Qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Er(e.app))return Promise.reject(sp(e));const r="signIn",s=await Wf(e,r,t),a=await qf._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(a.user),a}function Yf(e,t){return xp(e,"POST","/v2/accounts/mfaEnrollment:start",bp(e,t))}new WeakMap;const Xf="__sak";class $f{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xf,"1"),this.storage.removeItem(Xf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Zf extends $f{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=af(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);sf()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zf.type="LOCAL";const eg=Zf;function tg(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(s))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function ng(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class rg{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=ng(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return tg(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=ng(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=ng(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=tg(n);const s=setInterval(()=>{const e=tg(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}rg.type="COOKIE";class sg extends $f{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sg.type="SESSION";const ag=sg;class ig{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ig(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,a=this.handlersMap[r];if(null===a||void 0===a||!a.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(a).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function og(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ig.receivers=[];class lg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((i,o)=>{const l=og("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),i(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function cg(){return window}function ug(){return"undefined"!==typeof cg().WorkerGlobalScope&&"function"===typeof cg().importScripts}const dg="firebaseLocalStorageDb",hg="firebaseLocalStorage",mg="fbase_key";class pg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fg(e,t){return e.transaction([hg],t?"readwrite":"readonly").objectStore(hg)}function gg(){const e=indexedDB.open(dg,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(hg,{keyPath:mg})}catch(xy){n(xy)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(hg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(dg);return new pg(e).toPromise()}(),t(await gg()))})})}async function vg(e,t,n){const r=fg(e,!0).put({[mg]:t,value:n});return new pg(r).toPromise()}function yg(e,t){const n=fg(e,!0).delete(t);return new pg(n).toPromise()}class bg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await gg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(xy){if(t++>3)throw xy;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ug()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ig._getInstance(ug()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new lg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gg();return await vg(e,Xf,"1"),await yg(e,Xf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vg(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=fg(e,!1).get(t),r=await new pg(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=fg(e,!1).getAll();return new pg(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}bg.type="LOCAL";const xg=bg;function wg(e,t){return xp(e,"POST","/v2/accounts/mfaSignIn:start",bp(e,t))}ff("rcb"),new mp(3e4,6e4);const jg="recaptcha";async function Ng(e,t,n){if(!e._getRecaptchaConfig())try{await jf(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ip("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=wf(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===yf){ip((null===n||void 0===n?void 0:n.type)===jg,e,"argument-error");return Yf(e,await Sg(e,t,n))}return Yf(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;ip("signin"===t.type,e,"internal-error");const a=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ip(a,e,"missing-multi-factor-info");const i={mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=wf(e,i,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===yf){ip((null===n||void 0===n?void 0:n.type)===jg,e,"argument-error");return wg(e,await Sg(e,t,n))}return wg(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=wf(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===yf){ip((null===n||void 0===n?void 0:n.type)===jg,e,"argument-error");return Pf(e,await Sg(e,t,n))}return Pf(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Sg(e,t,n){ip(n.type===jg,e,"argument-error");const r=await n.verify();ip("string"===typeof r,e,"argument-error");const s=d({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,a=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Eg{constructor(e){this.providerId=Eg.PROVIDER_ID,this.auth=df(e)}verifyPhoneNumber(e,t){return Ng(this.auth,e,mn(t))}static credential(e,t){return Rf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Eg.credentialFromTaggedObject(t)}static credentialFromError(e){return Eg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Rf._fromTokenResponse(n,r):null}}function kg(e,t){return t?Gp(t):(ip(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Eg.PROVIDER_ID="phone",Eg.PHONE_SIGN_IN_METHOD="phone";class Cg extends kf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _f(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _f(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _f(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Tg(e){return Qf(e.auth,new Cg(e),e.bypassAuthState)}function Ig(e){const{auth:t,user:n}=e;return ip(n,t,"internal-error"),Jf(n,new Cg(e),e.bypassAuthState)}async function _g(e){const{auth:t,user:n}=e;return ip(n,t,"internal-error"),Kf(n,new Cg(e),e.bypassAuthState)}class Ag{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(xy){this.reject(xy)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:a,type:i}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(xy){this.reject(xy)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tg;case"linkViaPopup":case"linkViaRedirect":return _g;case"reauthViaPopup":case"reauthViaRedirect":return Ig;default:tp(this.auth,"internal-error")}}resolve(e){lp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pg=new mp(2e3,1e4);class Dg extends Ag{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Dg.currentPopupAction&&Dg.currentPopupAction.cancel(),Dg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ip(e,this.auth,"internal-error"),e}async onExecution(){lp(1===this.filter.length,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(np(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(np(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(np(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Pg.get())};e()}}Dg.currentPopupAction=null;const Rg=new Map;class Lg extends Ag{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Rg.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Fg(t),r=Mg(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(xy){e=()=>Promise.reject(xy)}Rg.set(this.auth._key(),e)}return this.bypassAuthState||Rg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Og(e,t){Rg.set(e._key(),t)}function Mg(e){return Gp(e._redirectPersistence)}function Fg(e){return Kp("pendingRedirect",e.config.apiKey,e.name)}async function Ug(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Er(e.app))return Promise.reject(sp(e));const r=df(e),s=kg(r,t),a=new Lg(r,s,n),i=await a.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class Vg{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bg(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Bg(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(np(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zg(e))}saveEventToCache(e){this.cachedEventUids.add(zg(e)),this.lastProcessedEventTime=Date.now()}}function zg(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Bg(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const qg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gg=/^https?/;async function Hg(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return xp(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Wg(r))return}catch(n){}tp(e,"unauthorized-domain")}function Wg(e){const t=cp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Gg.test(n))return!1;if(qg.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Kg=new mp(3e4,6e4);function Jg(){const e=cg().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Qg(e){return new Promise((t,n)=>{var r,s;function a(){Jg(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Jg(),n(np(e,"network-request-failed"))},timeout:Kg.get()})}if(null!==(r=cg().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=cg().gapi)||void 0===s||!s.load){const t=ff("iframefcb");return cg()[t]=()=>{gapi.load?a():n(np(e,"network-request-failed"))},pf("".concat(mf.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Yg=null,e})}let Yg=null;const Xg=new mp(5e3,15e3),$g={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ev(e){const t=e.config;ip(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?pp(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Tr},s=Zg.get(e.config.apiHost);s&&(r.eid=s);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ln(r).slice(1))}async function tv(e){const t=await function(e){return Yg=Yg||Qg(e),Yg}(e),n=cg().gapi;return ip(n,e,"internal-error"),t.open({where:document.body,url:ev(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$g,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=np(e,"network-request-failed"),a=cg().setTimeout(()=>{r(s)},Xg.get());function i(){cg().clearTimeout(a),n(t)}t.ping(i).then(i,()=>{r(s)})}))}const nv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(xy){}}}function sv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=d(d({},nv),{},{width:r.toString(),height:s.toString(),top:a,left:i}),c=$t().toLowerCase();n&&(o=$p(c)?"_blank":n),Yp(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return rf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new rv(null);const h=window.open(t||"",o,u);ip(h,e,"popup-blocked");try{h.focus()}catch(xy){}return new rv(h)}const av="__/auth/handler",iv="emulator/auth/handler",ov=encodeURIComponent("fac");async function lv(e,t,n,r,s,a){ip(e.config.authDomain,e,"auth-domain-config-required"),ip(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Tr,eventId:s};if(t instanceof Mf){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))i[e]=t}if(t instanceof Ff){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ov,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(av);return pp(t,iv)}(e),"?").concat(ln(o).slice(1)).concat(c)}const cv="webStorageSupport";const uv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ag,this._completeRedirectFn=Ug,this._overrideRedirectResult=Og}async _openPopup(e,t,n,r){var s;lp(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return sv(e,await lv(e,t,n,cp(),r),og())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){cg().location.href=e}(await lv(e,t,n,cp(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(lp(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await tv(e),n=new Vg(e);return t.register("authEvent",t=>{ip(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cv,{type:cv},n=>{var r;const s=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[cv];void 0!==s&&t(!!s),tp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Hg(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return af()||Xp()||rf()}};var dv="@firebase/auth",hv="1.12.0";class mv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ip(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const pv=Ht("authIdTokenMaxAge")||300;let fv=null;var gv;mf={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=np("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},gv="Browser",Nr(new pn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;ip(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:gv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:of(gv)},c=new uf(r,s,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gp);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Nr(new pn("auth-internal",e=>(e=>new mv(e))(df(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(dv,hv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(gv)),Ar(dv,hv,"esm2020");const vv=Ir({apiKey:"AIzaSyAuRvDyTlGQY7pF0tZSjNL40ht7d94lBB0",authDomain:"bga-cs-talent-test-app.firebaseapp.com",projectId:"bga-cs-talent-test-app",storageBucket:"bga-cs-talent-test-app.firebasestorage.app",messagingSenderId:"588423733482",appId:"1:588423733482:web:c62cd3acf645875f77f793",measurementId:"G-2X6ZPX2Q5N"}),yv=function(e,t){const n="object"==typeof e?e:_r(),r="string"==typeof e?e:t||hi,s=Sr(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(e=>{const t=qt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Ih(s,...e)}return s}(vv);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r();const t=Sr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Sr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(an(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;tp(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:uv,persistence:[xg,eg,ag]}),r=Ht("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>pv)return;const r=null===t||void 0===t?void 0:t.token;fv!==r&&(fv=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){mn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){mn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const a=qt("auth");a&&Nf(n,"http://".concat(a))}(vv);let bv=null;const xv=e=>new Proxy(e,{get(e,t){const n=e[t];return"function"===typeof n&&"constructor"!==t?function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const a=n.apply(e,r);return a&&"function"===typeof a.then?(i=()=>a,async function(){bv&&bv.showLoading();try{return await i(...arguments)}finally{bv&&setTimeout(()=>{bv.hideLoading()},100)}})():a;var i}:n}}),wv={participants:[],events:[],groupEvents:[],groupTeams:[],sections:[],judges:[],scores:[],talentTestEvents:[],pointsConfig:{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}},declaredResults:[],judgeLocks:[],groupEventLocks:[],adminCredentials:{username:"admin",password:"admin123"},judgeCredentials:[{username:"judge1",password:"judge123"},{username:"judge2",password:"judge123"},{username:"judge3",password:"judge123"}],sectionCredentials:[{username:"pathanapuram",password:"pathanapuram123",section:"Pathanapuram"},{username:"kollam",password:"kollam123",section:"Kollam"},{username:"alappuzha",password:"alappuzha123",section:"Alappuzha"},{username:"kottayam",password:"kottayam123",section:"Kottayam"}]};let jv=1,Nv=1,Sv=1,Ev=1,kv=1,Cv=1;const Tv=new class{async getParticipants(){return Promise.resolve([...wv.participants])}async addParticipant(e){const t=d({id:String(jv++)},e);return wv.participants.push(t),Promise.resolve(t)}async updateParticipant(e,t){const n=wv.participants.findIndex(t=>t.id===e);return-1!==n?(wv.participants[n]=d(d({},wv.participants[n]),t),Promise.resolve(wv.participants[n])):Promise.reject(new Error("Participant not found"))}async deleteParticipant(e){const t=wv.participants.findIndex(t=>t.id===e);return-1!==t?(wv.participants.splice(t,1),Promise.resolve(!0)):Promise.resolve(!1)}async getEvents(){return Promise.resolve([...wv.events])}async addEvent(e){const t=d({id:String(Nv++)},e);return wv.events.push(t),Promise.resolve(t)}async updateEvent(e,t){const n=wv.events.findIndex(t=>t.id===e);return-1!==n?(wv.events[n]=d(d({},wv.events[n]),t),Promise.resolve(wv.events[n])):Promise.reject(new Error("Event not found"))}async deleteEvent(e){const t=wv.events.findIndex(t=>t.id===e);return-1!==t?(wv.events.splice(t,1),Promise.resolve(!0)):Promise.resolve(!1)}async getGroupEvents(){return Promise.resolve([...wv.groupEvents])}async getGroupTeams(){return Promise.resolve([...wv.groupTeams])}async addGroupTeam(e){const t=d({id:kv++},e);return wv.groupTeams.push(t),Promise.resolve(t)}async updateGroupTeam(e,t){const n=wv.groupTeams.findIndex(t=>t.id===e);return-1!==n?(wv.groupTeams[n]=d(d({},wv.groupTeams[n]),t),Promise.resolve(wv.groupTeams[n])):Promise.reject(new Error("Team not found"))}async deleteGroupTeam(e){const t=wv.groupTeams.findIndex(t=>t.id===e);return-1!==t?(wv.groupTeams.splice(t,1),Promise.resolve(!0)):Promise.resolve(!1)}async getSections(){return Promise.resolve([...wv.sections])}async addSection(e){const t=d({id:Sv++},e);return wv.sections.push(t),Promise.resolve(t)}async updateSection(e,t){const n=wv.sections.findIndex(t=>t.id===e);return-1!==n?(wv.sections[n]=d(d({},wv.sections[n]),t),Promise.resolve(wv.sections[n])):Promise.reject(new Error("Section not found"))}async deleteSection(e){const t=wv.sections.findIndex(t=>t.id===e);return-1!==t?(wv.sections.splice(t,1),Promise.resolve(!0)):Promise.resolve(!1)}async getChurchesBySection(e){const t=wv.sections.find(t=>t.name===e);return Promise.resolve(t?t.churches:[])}async getParticipantsBySection(e){const t=wv.participants.filter(t=>t.section===e);return Promise.resolve(t)}async getTalentTestEvents(){return Promise.resolve([...wv.talentTestEvents])}async addTalentTestEvent(e){const t=d(d({id:String(Cv++)},e),{},{createdAt:(new Date).toISOString()});return wv.talentTestEvents.push(t),Promise.resolve(t)}async updateTalentTestEvent(e,t){const n=wv.talentTestEvents.findIndex(t=>t.id===e);return-1!==n?(wv.talentTestEvents[n]=d(d(d({},wv.talentTestEvents[n]),t),{},{updatedAt:(new Date).toISOString()}),Promise.resolve(wv.talentTestEvents[n])):Promise.reject(new Error("Talent test event not found"))}async deleteTalentTestEvent(e){const t=wv.talentTestEvents.findIndex(t=>t.id===e);return-1!==t?(wv.talentTestEvents.splice(t,1),Promise.resolve(!0)):Promise.resolve(!1)}async getActiveTalentTestEvent(){const e=new Date,t=wv.talentTestEvents.find(t=>{if(!t.startDate||!t.registrationOpen)return!1;const n=new Date(t.startDate),r=t.endDate?new Date(t.endDate):new Date("2099-12-31");return e>=n&&e<=r&&t.registrationOpen});return Promise.resolve(t||null)}async getJudges(){return Promise.resolve([...wv.judges])}async addJudge(e){const t=d({id:String(Ev++)},e);return wv.judges.push(t),Promise.resolve(t)}async updateJudge(e,t){const n=wv.judges.findIndex(t=>t.id===e);return-1!==n?(wv.judges[n]=d(d({},wv.judges[n]),t),Promise.resolve(wv.judges[n])):Promise.reject(new Error("Judge not found"))}async deleteJudge(e){const t=wv.judges.findIndex(t=>t.id===e);return-1!==t?(wv.judges.splice(t,1),Promise.resolve(!0)):Promise.resolve(!1)}async getScores(){return Promise.resolve([...wv.scores])}async addScore(e){const t="".concat(e.participantId,"-").concat(e.eventId,"-").concat(e.judgeName),n=d({id:t},e),r=wv.scores.findIndex(e=>e.id===t);return-1!==r?wv.scores[r]=n:wv.scores.push(n),Promise.resolve(n)}async updateScore(e,t,n,r){const s="".concat(e,"-").concat(t,"-").concat(n),a=wv.scores.findIndex(e=>e.id===s);return-1!==a?(wv.scores[a]=d(d({},wv.scores[a]),r),Promise.resolve(wv.scores[a])):this.addScore(d({participantId:e,eventId:t,judgeName:n},r))}async getScoresByParticipant(e){const t=wv.scores.filter(t=>t.participantId===e);return Promise.resolve(t)}async getScoresByEvent(e){const t=wv.scores.filter(t=>t.eventId===e);return Promise.resolve(t)}async getScoresByJudge(e){const t=wv.scores.filter(t=>t.judgeName===e);return Promise.resolve(t)}async getScoresByParticipantAndEvent(e,t){const n=wv.scores.filter(n=>n.participantId===e&&n.eventId===t);return Promise.resolve(n)}async saveResult(e){return this.addScore(e)}async getResults(){return this.getScores()}async getResultsByEvent(e){return this.getScoresByEvent(e)}async getPointsConfig(){return Promise.resolve(d({},wv.pointsConfig))}async savePointsConfig(e){return wv.pointsConfig=d({},e),Promise.resolve(e)}getAgeCategory(e){return e>=6&&e<=10?"Junior":e>=11&&e<=15?"Intermediate":e>=16&&e<=20?"Senior":e>=21&&e<=25?"Super Senior":null}async assignChestNumber(e){const t=wv.participants.find(t=>t.id===e);if(!t)return null;if(t.chestNumber)return t.chestNumber;const n=t.ageCategory,r=this.getCategoryPrefix(n),s=wv.participants.filter(e=>e.ageCategory===n&&e.chestNumber&&e.chestNumber.startsWith(r));let a=0;s.forEach(e=>{const t=e.chestNumber.match(/\d+$/);if(t){const e=parseInt(t[0]);e>a&&(a=e)}});const i="".concat(r,"-").concat(String(a+1).padStart(3,"0"));return await this.updateParticipant(e,{chestNumber:i}),i}async removeChestNumber(e){const t=wv.participants.find(t=>t.id===e);return!!t&&(delete t.chestNumber,Promise.resolve(!0))}async assignAllChestNumbers(){const e=wv.participants.filter(e=>!e.chestNumber);let t=0;for(const n of e)await this.assignChestNumber(n.id),t++;return Promise.resolve(t)}getCategoryPrefix(e){return{Junior:"J",Intermediate:"I",Senior:"S","Super Senior":"SS"}[e]||"X"}async validateAdmin(e,t){return Promise.resolve(wv.adminCredentials.username===e&&wv.adminCredentials.password===t)}async validateJudge(e,t){return Promise.resolve(wv.judgeCredentials.some(n=>n.username===e&&n.password===t))}async validateSection(e,t){const n=wv.sectionCredentials.find(n=>n.username===e&&n.password===t);return Promise.resolve(n?{valid:!0,section:n.section}:{valid:!1})}async getJudgeLocks(){return Promise.resolve([...wv.judgeLocks])}async lockScores(e,t,n){const r=wv.judgeLocks.findIndex(r=>r.judgeName===e&&r.eventId===t&&r.category===n);return-1!==r?(wv.judgeLocks[r].locked=!0,wv.judgeLocks[r].lockedDate=(new Date).toISOString()):wv.judgeLocks.push({judgeName:e,eventId:t,category:n,locked:!0,lockedDate:(new Date).toISOString()}),Promise.resolve(!0)}async unlockScores(e,t,n){const r=wv.judgeLocks.findIndex(r=>r.judgeName===e&&r.eventId===t&&r.category===n);return-1!==r&&(wv.judgeLocks[r].locked=!1),Promise.resolve(!0)}async isScoreLocked(e,t,n){const r=wv.judgeLocks.find(r=>r.judgeName===e&&r.eventId===t&&r.category===n);return Promise.resolve(!!r&&r.locked)}async areAllJudgesLocked(e,t){const n=wv.events.find(t=>t.id===e);if(n&&"single-judge"===n.scoringType){const n=wv.judgeLocks.filter(n=>n.eventId===e&&n.category===t&&n.locked);return Promise.resolve(n.length>0)}const r=wv.judgeCredentials.length,s=wv.judgeLocks.filter(n=>n.eventId===e&&n.category===t&&n.locked);return Promise.resolve(s.length===r)}async getData(){return Promise.resolve({participants:[...wv.participants],events:[...wv.events],groupEvents:[...wv.groupEvents],groupTeams:[...wv.groupTeams],sections:[...wv.sections],judges:[...wv.judges],scores:[...wv.scores],pointsConfig:d({},wv.pointsConfig),declaredResults:[...wv.declaredResults],judgeLocks:[...wv.judgeLocks],groupEventLocks:[...wv.groupEventLocks],adminCredentials:d({},wv.adminCredentials),judgeCredentials:[...wv.judgeCredentials],sectionCredentials:[...wv.sectionCredentials]})}async saveData(e){return e.groupTeams&&(wv.groupTeams=[...e.groupTeams]),e.pointsConfig&&(wv.pointsConfig=d({},e.pointsConfig)),e.declaredResults&&(wv.declaredResults=[...e.declaredResults]),e.judgeLocks&&(wv.judgeLocks=[...e.judgeLocks]),e.groupEventLocks&&(wv.groupEventLocks=[...e.groupEventLocks]),Promise.resolve(!0)}async getDeclaredResults(){return Promise.resolve([...wv.declaredResults])}async declareResult(e,t){return wv.declaredResults.some(n=>n.eventId===e&&n.category===t)?Promise.resolve({success:!1,message:"Result already declared"}):(wv.declaredResults.push({eventId:e,category:t,declaredAt:(new Date).toISOString(),declaredBy:"admin"}),Promise.resolve({success:!0,message:"Result declared successfully"}))}async declareGroupResult(e){return wv.declaredResults.some(t=>t.groupEventId===e)?Promise.resolve({success:!1,message:"Group result already declared"}):(wv.declaredResults.push({groupEventId:e,declaredAt:(new Date).toISOString(),declaredBy:"admin"}),Promise.resolve({success:!0,message:"Group result declared successfully"}))}async revertDeclaration(e,t){const n=wv.declaredResults.filter(n=>!(n.eventId===e&&n.category===t));return n.length<wv.declaredResults.length?(wv.declaredResults=n,Promise.resolve({success:!0,message:"Declaration reverted successfully"})):Promise.resolve({success:!1,message:"Declaration not found"})}async revertGroupDeclaration(e){const t=wv.declaredResults.filter(t=>t.groupEventId!==e);return t.length<wv.declaredResults.length?(wv.declaredResults=t,Promise.resolve({success:!0,message:"Group declaration reverted successfully"})):Promise.resolve({success:!1,message:"Group declaration not found"})}async declareAllResults(){const e=["Junior","Intermediate","Senior","Super Senior"];let t=0,n=0;for(const r of wv.events)for(const s of e){wv.declaredResults.some(e=>e.eventId===r.id&&e.category===s)?n++:(wv.declaredResults.push({eventId:r.id,category:s,declaredAt:(new Date).toISOString(),declaredBy:"admin"}),t++)}return t>0?Promise.resolve({success:!0,message:"Successfully declared ".concat(t," result(s). ").concat(n," already declared."),declaredCount:t,alreadyDeclaredCount:n}):Promise.resolve({success:!1,message:n>0?"All locked results (".concat(n,") are already declared."):"No locked results available to declare.",declaredCount:0,alreadyDeclaredCount:n})}async revertAllDeclarations(){const e=wv.declaredResults.filter(e=>e.eventId),t=wv.declaredResults.filter(e=>e.groupEventId),n=e.length;return n>0?(wv.declaredResults=t,Promise.resolve({success:!0,message:"Successfully reverted ".concat(n," declaration(s)."),revertedCount:n})):Promise.resolve({success:!1,message:"No declared results to revert.",revertedCount:0})}async isResultDeclared(e,t){return Promise.resolve(wv.declaredResults.some(n=>n.eventId===e&&n.category===t))}async isGroupResultDeclared(e){return Promise.resolve(wv.declaredResults.some(t=>t.groupEventId===e))}async getChampionsStatus(){return Promise.resolve({championsDeclared:!1})}async declareChampions(e){return Promise.resolve({success:!0})}async revertChampions(){return Promise.resolve({success:!0})}async migrateMockData(e){return e.events&&(wv.events=[...e.events]),e.groupEvents&&(wv.groupEvents=[...e.groupEvents]),e.sections&&(wv.sections=[...e.sections]),e.participants&&(wv.participants=[...e.participants]),e.groupTeams&&(wv.groupTeams=[...e.groupTeams]),e.judges&&(wv.judges=[...e.judges]),e.results&&(wv.scores=[...e.results]),e.pointsConfig&&(wv.pointsConfig=d({},e.pointsConfig)),Promise.resolve(!0)}};xv(Tv);const Iv=new class{constructor(){this.collections={participants:"participants",events:"events",groupEvents:"groupEvents",groupTeams:"groupTeams",sections:"sections",judges:"judges",results:"results",config:"config",talentTestEvents:"talentTestEvents",categories:"categories"}}async getParticipants(){try{return(await Mm(Dh(yv,this.collections.participants))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching participants:",e),[]}}async addParticipant(e){try{const t=await zm(Dh(yv,this.collections.participants),d(d({},e),{},{createdAt:(new Date).toISOString()}));return d({id:t.id},e)}catch(t){throw console.error("Error adding participant:",t),t}}async updateParticipant(e,t){try{const n=Rh(yv,this.collections.participants,String(e));return await Um(n,d(d({},t),{},{updatedAt:(new Date).toISOString()})),d({id:e},t)}catch(n){throw console.error("Error updating participant:",n),n}}async deleteParticipant(e){try{return await Vm(Rh(yv,this.collections.participants,e)),!0}catch(t){throw console.error("Error deleting participant:",t),t}}async getEvents(){try{return(await Mm(Dh(yv,this.collections.events))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching events:",e),[]}}async addEvent(e){try{return d({id:(await zm(Dh(yv,this.collections.events),e)).id},e)}catch(t){throw console.error("Error adding event:",t),t}}async updateEvent(e,t){try{const n=Rh(yv,this.collections.events,e);return await Um(n,t),d({id:e},t)}catch(n){throw console.error("Error updating event:",n),n}}async deleteEvent(e){try{return await Vm(Rh(yv,this.collections.events,e)),!0}catch(t){throw console.error("Error deleting event:",t),t}}async getGroupEvents(){try{return(await Mm(Dh(yv,this.collections.groupEvents))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching group events:",e),[]}}async addGroupEvent(e){try{const t=await zm(Dh(yv,this.collections.groupEvents),d(d({},e),{},{createdAt:(new Date).toISOString()}));return d({id:t.id},e)}catch(t){throw console.error("Error adding group event:",t),t}}async updateGroupEvent(e,t){try{const n=Rh(yv,this.collections.groupEvents,String(e));return await Um(n,d(d({},t),{},{updatedAt:(new Date).toISOString()})),d({id:e},t)}catch(n){throw console.error("Error updating group event:",n),n}}async deleteGroupEvent(e){try{return await Vm(Rh(yv,this.collections.groupEvents,String(e))),!0}catch(t){throw console.error("Error deleting group event:",t),t}}async getGroupTeams(){try{return(await Mm(Dh(yv,this.collections.groupTeams))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching group teams:",e),[]}}async addGroupTeam(e){try{const t=await zm(Dh(yv,this.collections.groupTeams),d(d({},e),{},{createdAt:(new Date).toISOString()}));return d({id:t.id},e)}catch(t){throw console.error("Error adding group team:",t),t}}async updateGroupTeam(e,t){try{const n=Rh(yv,this.collections.groupTeams,String(e));return await Um(n,d(d({},t),{},{updatedAt:(new Date).toISOString()})),d({id:e},t)}catch(n){throw console.error("Error updating group team:",n),n}}async deleteGroupTeam(e){try{return await Vm(Rh(yv,this.collections.groupTeams,e)),!0}catch(t){throw console.error("Error deleting group team:",t),t}}async getSections(){try{return(await Mm(Dh(yv,this.collections.sections))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching sections:",e),[]}}async addSection(e){try{return d({id:(await zm(Dh(yv,this.collections.sections),e)).id},e)}catch(t){throw console.error("Error adding section:",t),t}}async updateSection(e,t){try{const n=Rh(yv,this.collections.sections,e);return await Um(n,t),d({id:e},t)}catch(n){throw console.error("Error updating section:",n),n}}async deleteSection(e){try{return await Vm(Rh(yv,this.collections.sections,e)),!0}catch(t){throw console.error("Error deleting section:",t),t}}async getChurchesBySection(e){try{const t=(await this.getSections()).find(t=>t.name===e);return t?t.churches:[]}catch(t){return console.error("Error fetching churches:",t),[]}}async getCategories(){try{return(await Mm(Dh(yv,this.collections.categories))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching categories:",e),[]}}async addCategory(e){try{const t=await zm(Dh(yv,this.collections.categories),d(d({},e),{},{createdAt:(new Date).toISOString()}));return d({id:t.id},e)}catch(t){throw console.error("Error adding category:",t),t}}async updateCategory(e,t){try{const n=Rh(yv,this.collections.categories,e);return await Um(n,d(d({},t),{},{updatedAt:(new Date).toISOString()})),d({id:e},t)}catch(n){throw console.error("Error updating category:",n),n}}async deleteCategory(e){try{return await Vm(Rh(yv,this.collections.categories,e)),!0}catch(t){throw console.error("Error deleting category:",t),t}}async getChurchesBySection(e){try{const t=(await this.getSections()).find(t=>t.name===e);return t?t.churches:[]}catch(t){return console.error("Error fetching churches by section:",t),[]}}async getParticipantsBySection(e){try{return(await this.getParticipants()).filter(t=>t.section===e)}catch(t){return console.error("Error fetching participants by section:",t),[]}}async getTalentTestEvents(){try{return(await Mm(Dh(yv,this.collections.talentTestEvents))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching talent test events:",e),[]}}async getTalentTestEventById(e){try{const t=Rh(yv,this.collections.talentTestEvents,String(e)),n=await Lm(t);return n.exists()?d({id:n.id},n.data()):null}catch(t){return console.error("Error fetching talent test event:",t),null}}async addTalentTestEvent(e){try{const t=await zm(Dh(yv,this.collections.talentTestEvents),d(d({},e),{},{createdAt:(new Date).toISOString()}));return d({id:t.id},e)}catch(t){throw console.error("Error adding talent test event:",t),t}}async updateTalentTestEvent(e,t){try{const n=Rh(yv,this.collections.talentTestEvents,e);return await Um(n,d(d({},t),{},{updatedAt:(new Date).toISOString()})),d({id:e},t)}catch(n){throw console.error("Error updating talent test event:",n),n}}async deleteTalentTestEvent(e){try{return await Vm(Rh(yv,this.collections.talentTestEvents,e)),!0}catch(t){throw console.error("Error deleting talent test event:",t),t}}async getActiveTalentTestEvent(){try{const e=await this.getTalentTestEvents(),t=new Date;return e.find(e=>{if(!e.startDate||!e.registrationOpen)return!1;const n=new Date(e.startDate),r=e.endDate?new Date(e.endDate):new Date("2099-12-31");return t>=n&&t<=r&&e.registrationOpen})}catch(e){return console.error("Error fetching active talent test event:",e),null}}async getJudges(){try{const e=(await Mm(Dh(yv,this.collections.judges))).docs.map(e=>d({id:e.id},e.data()));if(0===e.length){const e=Rh(yv,this.collections.config,"judgeCredentials"),t=await Lm(e);if(t.exists()){return(t.data().judges||[]).map(e=>({username:e.username,password:e.password}))}}return e}catch(e){return console.error("Error fetching judges:",e),[]}}async addJudge(e){try{return d({id:(await zm(Dh(yv,this.collections.judges),e)).id},e)}catch(t){throw console.error("Error adding judge:",t),t}}async updateJudge(e,t){try{const n=Rh(yv,this.collections.judges,e);return await Um(n,t),d({id:e},t)}catch(n){throw console.error("Error updating judge:",n),n}}async deleteJudge(e){try{return await Vm(Rh(yv,this.collections.judges,e)),!0}catch(t){throw console.error("Error deleting judge:",t),t}}async lockJudgeScores(e,t,n){try{const r=Rh(yv,this.collections.judges,e),s=await Lm(r);if(s.exists()){const e=s.data().lockedScores||[],a="".concat(t,"-").concat(n);e.includes(a)||(e.push(a),await Um(r,{lockedScores:e}))}return!0}catch(r){throw console.error("Error locking judge scores:",r),r}}async isJudgeScoresLocked(e,t,n){try{const r=Rh(yv,this.collections.judges,e),s=await Lm(r);if(s.exists()){const e=s.data().lockedScores||[],r="".concat(t,"-").concat(n);return e.includes(r)}return!1}catch(r){return console.error("Error checking lock status:",r),!1}}async getScores(){try{return(await Mm(Dh(yv,this.collections.results))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching scores:",e),[]}}async addScore(e){try{const t="".concat(e.participantId,"-").concat(e.eventId,"-").concat(e.judgeName),n=Rh(yv,this.collections.results,t),r=d(d({},e),{},{id:t,submittedDate:(new Date).toISOString()});return await Fm(n,r),r}catch(t){throw console.error("Error adding score:",t),t}}async updateScore(e,t,n,r){try{const s="".concat(e,"-").concat(t,"-").concat(n),a=Rh(yv,this.collections.results,s),i=await Lm(a);if(i.exists()){const e=d(d(d({},i.data()),r),{},{updatedDate:(new Date).toISOString()});return await Fm(a,e),e}return await this.addScore(d({participantId:e,eventId:t,judgeName:n},r))}catch(s){throw console.error("Error updating score:",s),s}}async getScoresByParticipant(e){try{const t=bm(Dh(yv,this.collections.results),wm("participantId","==",e));return(await Mm(t)).docs.map(e=>d({id:e.id},e.data()))}catch(t){return console.error("Error fetching scores by participant:",t),[]}}async getScoresByEvent(e){try{const t=bm(Dh(yv,this.collections.results),wm("eventId","==",e));return(await Mm(t)).docs.map(e=>d({id:e.id},e.data()))}catch(t){return console.error("Error fetching scores by event:",t),[]}}async getScoresByJudge(e){try{const t=bm(Dh(yv,this.collections.results),wm("judgeName","==",e));return(await Mm(t)).docs.map(e=>d({id:e.id},e.data()))}catch(t){return console.error("Error fetching scores by judge:",t),[]}}async getScoresByParticipantAndEvent(e,t){try{const n=bm(Dh(yv,this.collections.results),wm("participantId","==",e),wm("eventId","==",t));return(await Mm(n)).docs.map(e=>d({id:e.id},e.data()))}catch(n){return console.error("Error fetching scores by participant and event:",n),[]}}async deleteScoresByJudge(e){try{const t=await this.getScoresByJudge(e),n=Wm(yv);return t.forEach(e=>{const t=Rh(yv,this.collections.results,e.id);n.delete(t)}),await n.commit(),!0}catch(t){throw console.error("Error deleting scores by judge:",t),t}}async saveResult(e){try{const t="".concat(e.judgeId,"-").concat(e.participantId||e.teamId,"-").concat(e.eventId),n=Rh(yv,this.collections.results,t);return await Fm(n,d(d({},e),{},{updatedAt:(new Date).toISOString()})),d({id:t},e)}catch(t){throw console.error("Error saving result:",t),t}}async getResults(){try{return(await Mm(Dh(yv,this.collections.results))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching results:",e),[]}}async getResultsByEvent(e){try{const t=bm(Dh(yv,this.collections.results),wm("eventId","==",e));return(await Mm(t)).docs.map(e=>d({id:e.id},e.data()))}catch(t){return console.error("Error fetching results by event:",t),[]}}async getPointsConfig(){try{const e=Rh(yv,this.collections.config,"pointsConfig"),t=await Lm(e);return t.exists()?t.data():{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}}catch(e){return console.error("Error fetching points config:",e),{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}}}async savePointsConfig(e){try{const t=Rh(yv,this.collections.config,"pointsConfig");return await Fm(t,e),e}catch(t){throw console.error("Error saving points config:",t),t}}async getAgeCategory(e){try{const t=(await this.getCategories()).sort((e,t)=>(e.order||0)-(t.order||0));for(const n of t)if(e>=n.minAge&&e<=n.maxAge)return n.name;return null}catch(t){return console.error("Error getting age category:",t),null}}async getMinMaxAge(){try{const e=await this.getCategories();if(0===e.length)return{minAge:6,maxAge:25};const t=Math.min(...e.map(e=>e.minAge));return{minAge:t,maxAge:Math.max(...e.map(e=>e.maxAge))}}catch(e){return console.error("Error getting min/max age:",e),{minAge:6,maxAge:25}}}async getAdminDashboardData(){try{const[e,t,n]=await Promise.all([this.getEvents(),this.getCategories(),this.getParticipants()]);return{events:e,categories:t.sort((e,t)=>(e.order||0)-(t.order||0)),participants:n}}catch(e){return console.error("Error fetching admin dashboard data:",e),{events:[],categories:[],participants:[]}}}async getEventDashboardData(){try{const[e,t,n,r,s,a,i]=await Promise.all([this.getTalentTestEvents(),this.getCategories(),this.getParticipants(),this.getGroupTeams(),this.getEvents(),this.getGroupEvents(),this.getDeclaredResults()]);return{talentTestEvents:e,categories:t.sort((e,t)=>(e.order||0)-(t.order||0)),participants:n,groupTeams:r,events:s,groupEvents:a,declaredResults:i}}catch(e){return console.error("Error fetching event dashboard data:",e),{talentTestEvents:[],categories:[],participants:[],groupTeams:[],events:[],groupEvents:[],declaredResults:[]}}}async getJudgeDashboardData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const[t,n,r,s,a,i,o,l,c,u]=await Promise.all([this.getEvents(),this.getCategories(),this.getParticipants(),this.getScores(),this.getJudgeLocks(),this.getGroupEvents(),this.getGroupTeams(),this.getData(),this.getDeclaredResults(),this.getSections()]),d=e?r.filter(t=>t.talentTestEventId===e):r,h=e?o.filter(t=>t.talentTestEventId===e):o;return{events:t,categories:n.sort((e,t)=>(e.order||0)-(t.order||0)),participants:d,scores:s,judgeLocks:a,groupEvents:i,groupTeams:h,groupEventLocks:l.groupEventLocks||[],declaredResults:c,sections:u}}catch(t){return console.error("Error fetching judge dashboard data:",t),{events:[],categories:[],participants:[],scores:[],judgeLocks:[],groupEvents:[],groupTeams:[],groupEventLocks:[],declaredResults:[],sections:[]}}}async getSectionDashboardData(e){try{const[t,n,r,s,a,i]=await Promise.all([this.getEvents(),this.getCategories(),this.getTalentTestEvents(),this.getActiveTalentTestEvent(),this.getChurchesBySection(e),this.getParticipantsBySection(e)]);return{events:t,ageLimits:n.length>0?{minAge:Math.min(...n.map(e=>e.minAge)),maxAge:Math.max(...n.map(e=>e.maxAge))}:{minAge:6,maxAge:25},talentTestEvents:r,activeEvent:s,churches:a.map(e=>"string"===typeof e?e:e.name),participants:i}}catch(t){return console.error("Error fetching section dashboard data:",t),{events:[],ageLimits:{minAge:6,maxAge:25},talentTestEvents:[],activeEvent:null,churches:[],participants:[]}}}async getEventDetailViewData(e){try{const[t,n,r,s,a,i,o,l,c]=await Promise.all([this.getTalentTestEventById(e),this.getCategories(),this.getParticipants(),this.getGroupTeams(),this.getEvents(),this.getGroupEvents(),this.getDeclaredResults(),this.getJudges(),this.getGroupEventLocks()]);return{event:t,categories:n.sort((e,t)=>(e.order||0)-(t.order||0)),participants:r,groupTeams:s,events:a,groupEvents:i,declaredResults:o,judges:l,groupEventLocks:c}}catch(t){return console.error("Error fetching event detail view data:",t),{event:null,categories:[],participants:[],groupTeams:[],events:[],groupEvents:[],declaredResults:[],judges:[],groupEventLocks:[]}}}async getSectionEventDetailViewData(e,t){try{const[n,r]=await Promise.all([this.getTalentTestEventById(e),this.getParticipantsBySection(t)]);return{event:n,participants:r}}catch(n){return console.error("Error fetching section event detail view data:",n),{event:null,participants:[]}}}async getPresentationData(){try{const[e,t,n,r,s,a,i,o]=await Promise.all([this.getParticipants(),this.getScores(),this.getSections(),this.getDeclaredResults(),this.getGroupTeams(),this.getGroupEvents(),this.getData(),this.getJudges()]);return{participants:e,scores:t,sections:n,declaredResults:r,groupTeams:s,groupEvents:a,pointsConfig:i.pointsConfig||{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}},groupEventLocks:i.groupEventLocks||[],judges:o}}catch(e){return console.error("Error fetching presentation data:",e),{participants:[],scores:[],sections:[],declaredResults:[],groupTeams:[],groupEvents:[],pointsConfig:{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}},groupEventLocks:[],judges:[]}}}async getSectionEventDashboardData(e){try{const[t,n]=await Promise.all([this.getTalentTestEvents(),this.getParticipantsBySection(e)]);return{events:t,participants:n}}catch(t){return console.error("Error fetching section event dashboard data:",t),{events:[],participants:[]}}}async getGroupTeamsData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const[t,n,r,s,a,i]=await Promise.all([this.getGroupEvents(),this.getSections(),this.getTalentTestEvents(),this.getGroupTeams(),e?this.getTalentTestEventById(e):Promise.resolve(null),e?Promise.resolve(null):this.getActiveTalentTestEvent()]);return{groupEvents:t,sections:n,talentTestEvents:r,teams:s,currentEvent:a,activeEvent:i}}catch(t){return console.error("Error fetching group teams data:",t),{groupEvents:[],sections:[],talentTestEvents:[],teams:[],currentEvent:null,activeEvent:null}}}async getParticipantsData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const[n,r,s,a,i,o,l,c]=await Promise.all([this.getSections(),this.getEvents(),this.getMinMaxAge(),this.getTalentTestEvents(),t?this.getParticipantsBySection(t):this.getParticipants(),e?this.getTalentTestEventById(e):Promise.resolve(null),e?Promise.resolve(null):this.getActiveTalentTestEvent(),Promise.resolve([])]);return{sections:n,events:r,ageLimits:s,talentTestEvents:a,participants:i,currentEvent:o,activeEvent:l}}catch(n){return console.error("Error fetching participants data:",n),{sections:[],events:[],ageLimits:{minAge:6,maxAge:25},talentTestEvents:[],participants:[],currentEvent:null,activeEvent:null}}}async getGroupResultsData(){try{const[e,t,n,r]=await Promise.all([this.getGroupEvents(),this.getGroupTeams(),this.getSections(),this.getDeclaredResults()]);return{groupEvents:e,groupTeams:t,sections:n,declaredResults:r}}catch(e){return console.error("Error fetching group results data:",e),{groupEvents:[],groupTeams:[],sections:[],declaredResults:[]}}}async getLeaderboardData(){try{const[e,t,n,r,s,a,i]=await Promise.all([this.getEvents(),this.getSections(),this.getParticipants(),this.getScores(),this.getGroupTeams(),this.getGroupEvents(),this.getData()]);return{events:e,sections:t,participants:n,scores:r,groupTeams:s,groupEvents:a,championsDeclared:i.championsDeclared||!1,pointsConfig:i.pointsConfig||{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}}}catch(e){return console.error("Error fetching leaderboard data:",e),{events:[],sections:[],participants:[],scores:[],groupTeams:[],groupEvents:[],championsDeclared:!1,pointsConfig:{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}}}}async getResultsViewData(){try{const[e,t,n,r,s,a,i,o]=await Promise.all([this.getEvents(),this.getCategories(),this.getParticipants(),this.getSections(),this.getJudges(),this.getScores(),this.getDeclaredResults(),this.getData()]);return{events:e,categories:t.sort((e,t)=>(e.order||0)-(t.order||0)),participants:n,sections:r,judges:s,scores:a,declaredResults:i,pointsConfig:o.pointsConfig||{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}}}catch(e){return console.error("Error fetching results view data:",e),{events:[],categories:[],participants:[],sections:[],judges:[],scores:[],declaredResults:[],pointsConfig:{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}}}}async assignChestNumber(e){try{const t=await Lm(Rh(yv,this.collections.participants,e));if(!t.exists())return null;const n=t.data();if(n.chestNumber)return n.chestNumber;const r=n.ageCategory,s=await this.getCategoryPrefix(r),a=(await this.getParticipants()).filter(e=>e.ageCategory===r&&e.chestNumber&&e.chestNumber.startsWith(s));let i=0;a.forEach(e=>{const t=e.chestNumber.match(/\d+$/);if(t){const e=parseInt(t[0]);e>i&&(i=e)}});const o="".concat(s,"-").concat(String(i+1).padStart(3,"0"));return await this.updateParticipant(e,d(d({},n),{},{chestNumber:o})),o}catch(t){throw console.error("Error assigning chest number:",t),t}}async removeChestNumber(e){try{const t=Rh(yv,this.collections.participants,e);return!!(await Lm(t)).exists()&&(await Um(t,{chestNumber:new em("deleteField")}),!0)}catch(t){throw console.error("Error removing chest number:",t),t}}async assignAllChestNumbers(){try{const e=(await this.getParticipants()).filter(e=>!e.chestNumber);let t=0;for(const n of e)await this.assignChestNumber(n.id),t++;return t}catch(e){throw console.error("Error assigning all chest numbers:",e),e}}async getCategoryPrefix(e){try{const t=(await this.getCategories()).find(t=>t.name===e);if(!t)return"X";const n=t.name.trim().split(/\s+/);return n.map(e=>e.charAt(0).toUpperCase()).join("")}catch(t){return console.error("Error getting category prefix:",t),"X"}}async validateAdmin(e,t){try{const n=Rh(yv,this.collections.config,"adminCredentials"),r=await Lm(n);if(r.exists()){const n=r.data();return n.username===e&&n.password===t}return"admin"===e&&"admin123"===t}catch(n){return console.error("Error validating admin:",n),!1}}async getJudgeCredentials(){try{const e=Rh(yv,this.collections.config,"judgeCredentials"),t=await Lm(e);if(t.exists()){return t.data().judges||[]}return[]}catch(e){return console.error("Error fetching judge credentials:",e),[]}}async saveJudgeCredentials(e){try{const t=Rh(yv,this.collections.config,"judgeCredentials");return await Fm(t,{judges:e}),!0}catch(t){throw console.error("Error saving judge credentials:",t),t}}async validateJudge(e,t){try{const n=await this.getJudgeCredentials();let r=!1;if(n.length>0)r=n.some(n=>n.username===e&&n.password===t);else{r=[{username:"judge1",password:"judge123"},{username:"judge2",password:"judge123"},{username:"judge3",password:"judge123"}].some(n=>n.username===e&&n.password===t)}if(!r)return{valid:!1};const s=await Mm(Dh(yv,this.collections.talentTestEvents));let a=null;return s.forEach(t=>{const n=d({id:t.id},t.data());n.judges&&n.judges.includes(e)&&(a=n)}),a?{valid:!0,talentTestEventId:a.id,talentTestEventName:a.name}:{valid:!1,error:"Not assigned to any talent test event"}}catch(n){return console.error("Error validating judge:",n),{valid:!1,error:n.message}}}async getSectionCredentials(){try{const e=Rh(yv,this.collections.config,"sectionCredentials"),t=await Lm(e);if(t.exists()){return t.data().sections||[]}return[]}catch(e){return console.error("Error fetching section credentials:",e),[]}}async saveSectionCredentials(e){try{const t=Rh(yv,this.collections.config,"sectionCredentials");return await Fm(t,{sections:e}),!0}catch(t){throw console.error("Error saving section credentials:",t),t}}async validateSection(e,t){try{const n=await this.getSectionCredentials();if(n.length>0){const r=n.find(n=>n.username===e&&n.password===t);return r?{valid:!0,section:r.section}:{valid:!1}}const r=[{username:"pathanapuram",password:"pathanapuram123",section:"Pathanapuram"},{username:"kollam",password:"kollam123",section:"Kollam"},{username:"alappuzha",password:"alappuzha123",section:"Alappuzha"},{username:"kottayam",password:"kottayam123",section:"Kottayam"}].find(n=>n.username===e&&n.password===t);return r?{valid:!0,section:r.section}:{valid:!1}}catch(n){return console.error("Error validating section:",n),{valid:!1}}}async getJudgeLocks(){try{const e=Rh(yv,this.collections.config,"judgeLocks"),t=await Lm(e);return t.exists()&&t.data().locks||[]}catch(e){return console.error("Error fetching judge locks:",e),[]}}async saveJudgeLocks(e){try{return await Fm(Rh(yv,this.collections.config,"judgeLocks"),{locks:e}),!0}catch(t){throw console.error("Error saving judge locks:",t),t}}async deleteJudgeLocksByJudge(e){try{const t=(await this.getJudgeLocks()).filter(t=>t.judgeName!==e);return await this.saveJudgeLocks(t),!0}catch(t){throw console.error("Error deleting judge locks:",t),t}}async lockScores(e,t,n){try{const r=await this.getJudgeLocks(),s=r.findIndex(r=>r.judgeName===e&&r.eventId===t&&r.category===n);return-1!==s?(r[s].locked=!0,r[s].lockedDate=(new Date).toISOString()):r.push({judgeName:e,eventId:t,category:n,locked:!0,lockedDate:(new Date).toISOString()}),await Fm(Rh(yv,this.collections.config,"judgeLocks"),{locks:r}),!0}catch(r){throw console.error("Error locking scores:",r),r}}async unlockScores(e,t,n){try{const r=await this.getJudgeLocks(),s=r.findIndex(r=>r.judgeName===e&&r.eventId===t&&r.category===n);return-1!==s&&(r[s].locked=!1),await Fm(Rh(yv,this.collections.config,"judgeLocks"),{locks:r}),!0}catch(r){throw console.error("Error unlocking scores:",r),r}}async isScoreLocked(e,t,n){try{const r=(await this.getJudgeLocks()).find(r=>r.judgeName===e&&r.eventId===t&&r.category===n);return!!r&&r.locked}catch(r){return console.error("Error checking score lock:",r),!1}}async areAllJudgesLocked(e,t){try{const n=await this.getJudgeLocks(),r=(await this.getEvents()).find(t=>t.id===e);if(r&&"single-judge"===r.scoringType){return n.filter(n=>n.eventId===e&&n.category===t&&n.locked).length>0}const s=Rh(yv,this.collections.config,"judgeCredentials"),a=await Lm(s);let i=3;if(a.exists()){i=(a.data().judges||[]).length}return n.filter(n=>n.eventId===e&&n.category===t&&n.locked).length===i}catch(n){return console.error("Error checking all judges locked:",n),!1}}async getGroupEventLocks(){try{const e=Rh(yv,this.collections.config,"groupEventLocks"),t=await Lm(e);return t.exists()&&t.data().locks||[]}catch(e){return console.error("Error fetching group event locks:",e),[]}}async saveGroupEventLocks(e){try{return await Fm(Rh(yv,this.collections.config,"groupEventLocks"),{locks:e}),!0}catch(t){throw console.error("Error saving group event locks:",t),t}}async getData(){try{const[e,t,n,r,s,a,i,o,l,c,u]=await Promise.all([this.getParticipants(),this.getEvents(),this.getGroupEvents(),this.getGroupTeams(),this.getSections(),this.getJudges(),this.getScores(),this.getPointsConfig(),this.getDeclaredResults(),this.getJudgeLocks(),this.getGroupEventLocks()]);return{participants:e,events:t,groupEvents:n,groupTeams:r,sections:s,judges:a,scores:i,pointsConfig:o,declaredResults:l,judgeLocks:c,groupEventLocks:u,adminCredentials:{username:"admin",password:"admin123"},judgeCredentials:[{username:"judge1",password:"judge123"},{username:"judge2",password:"judge123"},{username:"judge3",password:"judge123"}],sectionCredentials:[{username:"pathanapuram",password:"pathanapuram123",section:"Pathanapuram"},{username:"kollam",password:"kollam123",section:"Kollam"},{username:"alappuzha",password:"alappuzha123",section:"Alappuzha"},{username:"kottayam",password:"kottayam123",section:"Kottayam"}]}}catch(e){return console.error("Error getting all data:",e),{participants:[],events:[],groupEvents:[],groupTeams:[],sections:[],judges:[],scores:[],pointsConfig:{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}},declaredResults:[],judgeLocks:[],groupEventLocks:[],adminCredentials:{username:"admin",password:"admin123"},judgeCredentials:[],sectionCredentials:[]}}}async saveData(e){console.warn("saveData is a legacy method. Data should be saved using specific Firebase methods.");try{if(e.groupTeams){const t=Wm(yv);e.groupTeams.forEach(e=>{if(e.id){const n=Rh(yv,this.collections.groupTeams,e.id.toString());t.set(n,e,{merge:!0})}}),await t.commit()}return e.pointsConfig&&await this.savePointsConfig(e.pointsConfig),e.declaredResults&&await Fm(Rh(yv,this.collections.config,"declaredResults"),{results:e.declaredResults}),e.judgeLocks&&await Fm(Rh(yv,this.collections.config,"judgeLocks"),{locks:e.judgeLocks}),e.groupEventLocks&&await Fm(Rh(yv,this.collections.config,"groupEventLocks"),{locks:e.groupEventLocks}),!0}catch(t){throw console.error("Error in saveData:",t),t}}async getDeclaredResults(){try{const e=await Lm(Rh(yv,this.collections.config,"declaredResults"));return e.exists()&&e.data().results||[]}catch(e){return console.error("Error fetching declared results:",e),[]}}async declareResult(e,t){try{const n=await this.getDeclaredResults();return-1===n.findIndex(n=>n.eventId===e&&n.category===t)?(n.push({eventId:e,category:t,declaredAt:(new Date).toISOString(),declaredBy:"admin"}),await Fm(Rh(yv,this.collections.config,"declaredResults"),{results:n}),{success:!0,message:"Result declared successfully"}):{success:!1,message:"Result already declared"}}catch(n){return console.error("Error declaring result:",n),{success:!1,message:n.message}}}async declareGroupResult(e){try{const t=await this.getDeclaredResults();return-1===t.findIndex(t=>String(t.groupEventId)===String(e))?(t.push({groupEventId:e,declaredAt:(new Date).toISOString(),declaredBy:"admin"}),await Fm(Rh(yv,this.collections.config,"declaredResults"),{results:t}),{success:!0,message:"Group result declared successfully"}):{success:!1,message:"Group result already declared"}}catch(t){return console.error("Error declaring group result:",t),{success:!1,message:t.message}}}async revertDeclaration(e,t){try{const n=await this.getDeclaredResults(),r=n.filter(n=>!(n.eventId===e&&n.category===t));return r.length<n.length?(await Fm(Rh(yv,this.collections.config,"declaredResults"),{results:r}),{success:!0,message:"Declaration reverted successfully"}):{success:!1,message:"Declaration not found"}}catch(n){return console.error("Error reverting declaration:",n),{success:!1,message:n.message}}}async revertGroupDeclaration(e){try{const t=await this.getDeclaredResults(),n=t.filter(t=>String(t.groupEventId)!==String(e));return n.length<t.length?(await Fm(Rh(yv,this.collections.config,"declaredResults"),{results:n}),{success:!0,message:"Group declaration reverted successfully"}):{success:!1,message:"Group declaration not found"}}catch(t){return console.error("Error reverting group declaration:",t),{success:!1,message:t.message}}}async declareAllResults(){try{const e=await this.getEvents(),t=(await this.getCategories()).map(e=>e.name),n=await this.getDeclaredResults();let r=0,s=0;for(const a of e)for(const e of t){n.some(t=>t.eventId===a.id&&t.category===e)?s++:(n.push({eventId:a.id,category:e,declaredAt:(new Date).toISOString(),declaredBy:"admin"}),r++)}return r>0?(await Fm(Rh(yv,this.collections.config,"declaredResults"),{results:n}),{success:!0,message:"Successfully declared ".concat(r," result(s). ").concat(s," already declared."),declaredCount:r,alreadyDeclaredCount:s}):{success:!1,message:s>0?"All locked results (".concat(s,") are already declared."):"No locked results available to declare.",declaredCount:0,alreadyDeclaredCount:s}}catch(e){return console.error("Error declaring all results:",e),{success:!1,message:e.message}}}async revertAllDeclarations(){try{const e=await this.getDeclaredResults(),t=e.filter(e=>e.eventId),n=e.filter(e=>e.groupEventId),r=t.length;return r>0?(await Fm(Rh(yv,this.collections.config,"declaredResults"),{results:n}),{success:!0,message:"Successfully reverted ".concat(r," declaration(s)."),revertedCount:r}):{success:!1,message:"No declared results to revert.",revertedCount:0}}catch(e){return console.error("Error reverting all declarations:",e),{success:!1,message:e.message}}}async isResultDeclared(e,t){try{return(await this.getDeclaredResults()).some(n=>n.eventId===e&&n.category===t)}catch(n){return console.error("Error checking result declaration:",n),!1}}async isGroupResultDeclared(e){try{const t=await this.getDeclaredResults();console.log("Debug - Checking isGroupResultDeclared for:",e),console.log("Debug - All declared results:",t);const n=t.some(t=>String(t.groupEventId)===String(e));return console.log("Debug - Result:",n),n}catch(t){return console.error("Error checking group result declaration:",t),!1}}async getChampionsStatus(){try{const e=await Lm(Rh(yv,this.collections.config,"champions"));return e.exists()?e.data():{championsDeclared:!1}}catch(e){return console.error("Error fetching champions status:",e),{championsDeclared:!1}}}async declareChampions(e){try{return await Fm(Rh(yv,this.collections.config,"champions"),{championsDeclared:!0,finalChampions:e,declaredAt:(new Date).toISOString()}),{success:!0}}catch(t){return console.error("Error declaring champions:",t),{success:!1,message:t.message}}}async revertChampions(){try{return await Fm(Rh(yv,this.collections.config,"champions"),{championsDeclared:!1}),{success:!0}}catch(e){return console.error("Error reverting champions:",e),{success:!1,message:e.message}}}async migrateMockData(e){try{const t=Wm(yv);if(e.events)for(const n of e.events){const e=Rh(Dh(yv,this.collections.events));t.set(e,n)}if(e.groupEvents)for(const n of e.groupEvents){const e=Rh(Dh(yv,this.collections.groupEvents));t.set(e,n)}if(e.sections)for(const n of e.sections){const e=Rh(Dh(yv,this.collections.sections));t.set(e,n)}return await t.commit(),e.participants&&await this.migrateLargeCollection(e.participants,this.collections.participants),e.groupTeams&&await this.migrateLargeCollection(e.groupTeams,this.collections.groupTeams),e.judges&&await this.migrateLargeCollection(e.judges,this.collections.judges),e.results&&await this.migrateLargeCollection(e.results,this.collections.results),e.pointsConfig&&await this.savePointsConfig(e.pointsConfig),!0}catch(t){throw console.error("Error migrating mock data:",t),t}}async migrateLargeCollection(e,t){for(let n=0;n<e.length;n+=500){const r=Wm(yv),s=e.slice(n,n+500);for(const e of s){const n=Rh(Dh(yv,t));r.set(n,e)}await r.commit()}}async getNews(){try{return(await Mm(bm(Dh(yv,"news"),Sm("date","desc")))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching news:",e),[]}}async addNews(e){try{const t=await zm(Dh(yv,"news"),d(d({},e),{},{createdAt:(new Date).toISOString()}));return d({id:t.id},e)}catch(t){throw console.error("Error adding news:",t),t}}async updateNews(e,t){try{const n=Rh(yv,"news",String(e));return await Um(n,d(d({},t),{},{updatedAt:(new Date).toISOString()})),d({id:e},t)}catch(n){throw console.error("Error updating news:",n),n}}async deleteNews(e){try{return await Vm(Rh(yv,"news",String(e))),!0}catch(t){throw console.error("Error deleting news:",t),t}}async getUpcomingEvents(){try{return(await Mm(bm(Dh(yv,"upcomingEvents"),Sm("startDate","asc")))).docs.map(e=>d({id:e.id},e.data()))}catch(e){return console.error("Error fetching upcoming events:",e),[]}}async addUpcomingEvent(e){try{const t=await zm(Dh(yv,"upcomingEvents"),d(d({},e),{},{createdAt:(new Date).toISOString()}));return d({id:t.id},e)}catch(t){throw console.error("Error adding upcoming event:",t),t}}async updateUpcomingEvent(e,t){try{const n=Rh(yv,"upcomingEvents",String(e));return await Um(n,d(d({},t),{},{updatedAt:(new Date).toISOString()})),d({id:e},t)}catch(n){throw console.error("Error updating upcoming event:",n),n}}async deleteUpcomingEvent(e){try{return await Vm(Rh(yv,"upcomingEvents",String(e))),!0}catch(t){throw console.error("Error deleting upcoming event:",t),t}}},_v=Iv,Av=xv(Iv);var Pv=n(579);const Dv=(0,r.createContext)(),Rv=()=>{const e=(0,r.useContext)(Dv);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Lv=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(null);r.useEffect(()=>{(()=>{const e=localStorage.getItem("currentUser");!!e&&s(JSON.parse(e))})()},[]);const a={user:n,loginAdmin:async(e,t)=>{if(await Av.validateAdmin(e,t)){const t={username:e,role:"admin"};return s(t),localStorage.setItem("currentUser",JSON.stringify(t)),{success:!0}}return{success:!1,error:"Invalid credentials"}},loginJudge:async(e,t)=>{const n=await Av.validateJudge(e,t);if(n.valid){const t={username:e,role:"judge",talentTestEventId:n.talentTestEventId,talentTestEventName:n.talentTestEventName};return s(t),localStorage.setItem("currentUser",JSON.stringify(t)),{success:!0}}return{success:!1,error:n.error||"Invalid credentials or not assigned to any event"}},loginSection:async(e,t)=>{const n=await Av.validateSection(e,t);if(n.valid){const t={username:e,role:"section",section:n.section};return s(t),localStorage.setItem("currentUser",JSON.stringify(t)),{success:!0}}return{success:!1,error:"Invalid credentials"}},logout:()=>{s(null),localStorage.removeItem("currentUser")},isAuthenticated:!!n,isAdmin:"admin"===(null===n||void 0===n?void 0:n.role),isJudge:"judge"===(null===n||void 0===n?void 0:n.role),isSection:"section"===(null===n||void 0===n?void 0:n.role)};return(0,Pv.jsx)(Dv.Provider,{value:a,children:t})},Ov=(0,r.createContext)(),Mv=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(0);return(0,Pv.jsx)(Ov.Provider,{value:{loading:n,showLoading:()=>{i(e=>{const t=e+1;return t>0&&s(!0),t})},hideLoading:()=>{i(e=>{const t=Math.max(0,e-1);return 0===t&&s(!1),t})}},children:t})},Fv=n.p+"static/media/cs-logo.8db3cf7a135885e653d5.png",Uv=n.p+"static/media/ss-logo.cf23606541c53ce1e0b4.png",Vv=()=>{const[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)(!1),a=je(),{user:i}=Rv();r.useEffect(()=>{const e=()=>{s(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const o=()=>{t(!1)},l=e=>a.pathname===e?"active":"";return(0,Pv.jsx)("nav",{className:"navbar ".concat(n?"scrolled":""),children:(0,Pv.jsxs)("div",{className:"navbar-container",children:[(0,Pv.jsxs)(It,{to:"/",className:"navbar-logo",onClick:o,children:[(0,Pv.jsx)("img",{src:Fv,alt:"Christ Soldiers",className:"navbar-logo-img"}),(0,Pv.jsx)("img",{src:Uv,alt:"Sunday School",className:"navbar-logo-img"}),(0,Pv.jsxs)("div",{className:"logo-text",children:[(0,Pv.jsx)("h2",{children:"Christ Soldiers"}),(0,Pv.jsx)("span",{className:"logo-subtitle",children:"BGA Youth Wing"})]})]}),(0,Pv.jsx)("div",{className:"menu-icon",onClick:()=>{t(!e)},children:(0,Pv.jsxs)("div",{className:e?"hamburger open":"hamburger",children:[(0,Pv.jsx)("span",{}),(0,Pv.jsx)("span",{}),(0,Pv.jsx)("span",{})]})}),(0,Pv.jsx)("ul",{className:e?"nav-menu active":"nav-menu",children:i?(0,Pv.jsxs)(Pv.Fragment,{children:[(0,Pv.jsx)("li",{className:"nav-item",children:(0,Pv.jsx)(It,{to:"admin"===i.role?"/admin/dashboard":"judge"===i.role?"/judge/dashboard":"/section/dashboard",className:"nav-link",onClick:o,children:"Dashboard"})}),(0,Pv.jsx)("li",{className:"nav-item",children:(0,Pv.jsxs)("span",{className:"nav-link user-info",children:["\ud83d\udc64 ",i.username," (",i.role,")"]})})]}):(0,Pv.jsxs)(Pv.Fragment,{children:[(0,Pv.jsx)("li",{className:"nav-item",children:(0,Pv.jsx)(It,{to:"/",className:"nav-link ".concat(l("/")),onClick:o,children:"Home"})}),(0,Pv.jsx)("li",{className:"nav-item",children:(0,Pv.jsx)(It,{to:"/about",className:"nav-link ".concat(l("/about")),onClick:o,children:"About Us"})}),(0,Pv.jsx)("li",{className:"nav-item",children:(0,Pv.jsx)(It,{to:"/events",className:"nav-link ".concat(l("/events")),onClick:o,children:"Events"})}),(0,Pv.jsx)("li",{className:"nav-item",children:(0,Pv.jsx)(It,{to:"/gallery",className:"nav-link ".concat(l("/gallery")),onClick:o,children:"Gallery"})}),(0,Pv.jsx)("li",{className:"nav-item",children:(0,Pv.jsx)(It,{to:"/presentation",className:"nav-link ".concat(l("/presentation")),onClick:o,children:"Leaderboard"})}),(0,Pv.jsx)("li",{className:"nav-item",children:(0,Pv.jsx)(It,{to:"/contact",className:"nav-link ".concat(l("/contact")),onClick:o,children:"Contact Us"})})]})})]})})},zv=()=>(0,Pv.jsx)("div",{className:"loading-overlay",children:(0,Pv.jsxs)("div",{className:"loading-spinner-container",children:[(0,Pv.jsx)("div",{className:"loading-spinner"}),(0,Pv.jsx)("div",{className:"loading-text",children:"Loading..."})]})}),Bv=()=>{const[e,t]=(0,r.useState)({sectionChampions:[],churchChampions:[],individualChampions:[]}),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{f()},[]);const f=async()=>{try{const e=localStorage.getItem("home_news"),t=localStorage.getItem("home_events");e&&t&&(i(JSON.parse(e)),l(JSON.parse(t)),u(!1));const[n,r]=await Promise.all([_v.getNews(),_v.getUpcomingEvents()]),s=n.slice(0,2),a=r.slice(0,3);i(s),l(a),localStorage.setItem("home_news",JSON.stringify(s)),localStorage.setItem("home_events",JSON.stringify(a)),localStorage.setItem("home_cache_timestamp",Date.now().toString()),u(!1)}catch(e){console.error("Error loading news and events:",e),u(!1)}},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120;return e.length<=t?e:e.substring(0,t)+"..."},v=()=>{h(null),document.body.style.overflow="auto"},y=()=>{p(null),document.body.style.overflow="auto"},b=e=>{if(!e.startDate)return"";const t=new Date(e.startDate),n=e.endDate?new Date(e.endDate):null;if(!n||t.getTime()===n.getTime())return t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});const r=t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),s=n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()?"".concat(t.toLocaleDateString("en-US",{month:"long"})," ").concat(t.getDate()," - ").concat(n.getDate(),", ").concat(t.getFullYear()):"".concat(r," - ").concat(s)};return(0,Pv.jsxs)("div",{className:"home-page",children:[(0,Pv.jsx)("section",{className:"hero-section",children:(0,Pv.jsxs)("div",{className:"hero-content",children:[(0,Pv.jsxs)("div",{className:"hero-logos-container",children:[(0,Pv.jsx)("img",{src:Fv,alt:"Christ Soldiers Logo",className:"hero-logo"}),(0,Pv.jsx)("img",{src:Uv,alt:"Sunday School Logo",className:"hero-logo"})]}),(0,Pv.jsx)("div",{className:"hero-icon",children:"\u2728\ud83d\udd4a\ufe0f\u2728"}),(0,Pv.jsx)("h1",{children:"Welcome to Christ Soldiers and Sunday School Association"}),(0,Pv.jsx)("p",{className:"hero-subtitle",children:"\u26ea Youth Wing of Bethel Gospel Assembly Church"}),(0,Pv.jsx)("p",{className:"hero-description",children:"Empowering young believers to serve Christ with passion and purpose"}),(0,Pv.jsxs)("div",{className:"hero-stats",children:[(0,Pv.jsxs)("div",{className:"stat-item",children:[(0,Pv.jsx)("span",{className:"stat-icon",children:"\ud83d\udc65"}),(0,Pv.jsx)("span",{className:"stat-number",children:"500+"}),(0,Pv.jsx)("span",{className:"stat-label",children:"Active Members"})]}),(0,Pv.jsxs)("div",{className:"stat-item",children:[(0,Pv.jsx)("span",{className:"stat-icon",children:"\ud83c\udfaf"}),(0,Pv.jsx)("span",{className:"stat-number",children:"50+"}),(0,Pv.jsx)("span",{className:"stat-label",children:"Events Annually"})]}),(0,Pv.jsxs)("div",{className:"stat-item",children:[(0,Pv.jsx)("span",{className:"stat-icon",children:"\ud83c\udfc6"}),(0,Pv.jsx)("span",{className:"stat-number",children:"15+"}),(0,Pv.jsx)("span",{className:"stat-label",children:"Sections"})]})]})]})}),(0,Pv.jsxs)("section",{className:"info-section",children:[(0,Pv.jsxs)("div",{className:"info-logos-container",children:[(0,Pv.jsx)("img",{src:Fv,alt:"Christ Soldiers",className:"info-logo"}),(0,Pv.jsx)("img",{src:Uv,alt:"Sunday School",className:"info-logo"})]}),(0,Pv.jsx)("h2",{className:"section-title",children:"\ud83c\udf1f About Christ Soldiers & Sunday School"}),(0,Pv.jsxs)("div",{className:"info-grid",children:[(0,Pv.jsxs)("div",{className:"info-card mission-card",children:[(0,Pv.jsx)("div",{className:"card-icon",children:"\ud83c\udfaf"}),(0,Pv.jsx)("h3",{children:"Our Mission"}),(0,Pv.jsx)("p",{children:"To nurture and equip young people to become passionate followers of Christ, dedicated to serving God and their community."})]}),(0,Pv.jsxs)("div",{className:"info-card vision-card",children:[(0,Pv.jsx)("div",{className:"card-icon",children:"\ud83d\udd2d"}),(0,Pv.jsx)("h3",{children:"Our Vision"}),(0,Pv.jsx)("p",{children:"To raise a generation of Christ-centered youth who will impact the world through faith, love, and service."})]}),(0,Pv.jsxs)("div",{className:"info-card involved-card",children:[(0,Pv.jsx)("div",{className:"card-icon",children:"\ud83e\udd1d"}),(0,Pv.jsx)("h3",{children:"Get Involved"}),(0,Pv.jsx)("p",{children:"Join us in our various programs, events, and activities designed to strengthen your faith and develop your talents."})]})]})]}),(0,Pv.jsxs)("section",{className:"upcoming-events",children:[(0,Pv.jsx)("h2",{children:"\ud83d\udcc5 Upcoming Events"}),c?(0,Pv.jsx)("div",{className:"loading-placeholder",children:"Loading events..."}):o.length>0?(0,Pv.jsx)("div",{className:"events-grid",children:o.map(e=>{e.startDate?new Date(e.startDate):e.date&&new Date(e.date);return(0,Pv.jsx)("div",{className:"event-card ".concat(e.type||"talent-event"),children:(0,Pv.jsxs)("div",{className:"event-details",children:[(0,Pv.jsx)("div",{className:"event-icon",children:e.icon||"\ud83d\udcc5"}),(0,Pv.jsx)("h4",{children:e.title}),(0,Pv.jsx)("p",{className:"event-description",children:g(e.description,100)}),(0,Pv.jsxs)("p",{className:"event-date-range",children:["\ud83d\udcc5 ",b(e)]}),e.time&&(0,Pv.jsxs)("span",{className:"event-time",children:["\u23f0 ",e.time]}),e.location&&(0,Pv.jsxs)("span",{className:"event-location",children:["\ud83d\udccd ",e.location]}),(0,Pv.jsx)("button",{className:"event-learn-more",onClick:()=>(e=>{p(e),document.body.style.overflow="hidden"})(e),children:"Learn More"})]})},e.id)})}):(0,Pv.jsx)("div",{className:"empty-state",children:(0,Pv.jsx)("p",{children:"No upcoming events at the moment. Check back soon!"})})]}),(0,Pv.jsxs)("section",{className:"news-section",children:[(0,Pv.jsx)("h2",{children:"\ud83d\udcf0 Recent News & Updates"}),c?(0,Pv.jsx)("div",{className:"loading-placeholder",children:"Loading news..."}):a.length>0?(0,Pv.jsx)("div",{className:"news-grid",children:a.map(e=>(0,Pv.jsxs)("article",{className:"news-item ".concat(e.isFeatured?"featured-news":""),children:[e.isFeatured&&(0,Pv.jsx)("div",{className:"news-badge",children:"\ud83d\udd25 Featured"}),!e.isFeatured&&e.badge&&(0,Pv.jsx)("div",{className:"news-badge",children:e.badge}),(0,Pv.jsx)("div",{className:"news-icon",children:e.icon||"\ud83d\udcdd"}),(0,Pv.jsx)("h4",{children:e.title}),(0,Pv.jsxs)("p",{className:"news-date",children:["\ud83d\udcc5 ",new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),(0,Pv.jsx)("p",{className:"news-preview",children:g(e.content)}),(0,Pv.jsx)("button",{className:"news-read-more",onClick:()=>(e=>{h(e),document.body.style.overflow="hidden"})(e),children:"Read More \u2192"})]},e.id))}):(0,Pv.jsx)("div",{className:"empty-state",children:(0,Pv.jsx)("p",{children:"No news available at the moment. Check back soon!"})})]}),(0,Pv.jsx)("section",{className:"cta-section",children:(0,Pv.jsxs)("div",{className:"cta-content",children:[(0,Pv.jsx)("h2",{children:"\ud83c\udf1f Join Our Community Today!"}),(0,Pv.jsx)("p",{children:"Be part of a vibrant community of young believers making a difference"}),(0,Pv.jsxs)("div",{className:"cta-buttons",children:[(0,Pv.jsx)("button",{className:"cta-button primary",children:"Get Started"}),(0,Pv.jsx)("button",{className:"cta-button secondary",children:"Learn More"})]})]})}),(0,Pv.jsxs)("section",{className:"testimonials-section",children:[(0,Pv.jsx)("h2",{children:"\ud83d\udcac What Our Members Say"}),(0,Pv.jsxs)("div",{className:"testimonials-grid",children:[(0,Pv.jsxs)("div",{className:"testimonial-card",children:[(0,Pv.jsx)("div",{className:"quote-icon",children:"\u275d"}),(0,Pv.jsx)("p",{className:"testimonial-text",children:'"Christ Soldiers has been a blessing in my life. The talent test helped me discover and develop my God-given gifts!"'}),(0,Pv.jsxs)("div",{className:"testimonial-author",children:[(0,Pv.jsx)("div",{className:"author-avatar",children:"\ud83d\udc64"}),(0,Pv.jsxs)("div",{className:"author-info",children:[(0,Pv.jsx)("strong",{children:"Sarah Johnson"}),(0,Pv.jsx)("span",{children:"Active Member Since 2023"})]})]})]}),(0,Pv.jsxs)("div",{className:"testimonial-card",children:[(0,Pv.jsx)("div",{className:"quote-icon",children:"\u275d"}),(0,Pv.jsx)("p",{className:"testimonial-text",children:'"The fellowship and spiritual growth I\'ve experienced here is amazing. This ministry truly makes an impact!"'}),(0,Pv.jsxs)("div",{className:"testimonial-author",children:[(0,Pv.jsx)("div",{className:"author-avatar",children:"\ud83d\udc64"}),(0,Pv.jsxs)("div",{className:"author-info",children:[(0,Pv.jsx)("strong",{children:"David Martin"}),(0,Pv.jsx)("span",{children:"Youth Leader"})]})]})]}),(0,Pv.jsxs)("div",{className:"testimonial-card",children:[(0,Pv.jsx)("div",{className:"quote-icon",children:"\u275d"}),(0,Pv.jsx)("p",{className:"testimonial-text",children:'"From worship sessions to community outreach, every event is filled with purpose and joy. Highly recommend!"'}),(0,Pv.jsxs)("div",{className:"testimonial-author",children:[(0,Pv.jsx)("div",{className:"author-avatar",children:"\ud83d\udc64"}),(0,Pv.jsxs)("div",{className:"author-info",children:[(0,Pv.jsx)("strong",{children:"Emily Thomas"}),(0,Pv.jsx)("span",{children:"Volunteer Coordinator"})]})]})]})]})]}),d&&(0,Pv.jsx)("div",{className:"news-modal-overlay",onClick:v,children:(0,Pv.jsxs)("div",{className:"news-modal-paper",onClick:e=>e.stopPropagation(),children:[(0,Pv.jsxs)("div",{className:"modal-watermark",children:[(0,Pv.jsx)("img",{src:Fv,alt:"",className:"watermark-logo"}),(0,Pv.jsx)("img",{src:Uv,alt:"",className:"watermark-logo"})]}),(0,Pv.jsx)("button",{className:"modal-close",onClick:v,children:"\u2715"}),(0,Pv.jsxs)("div",{className:"paper-header",children:[(0,Pv.jsx)("div",{className:"paper-icon",children:d.icon||"\ud83d\udcdd"}),(0,Pv.jsx)("h2",{className:"paper-title",children:d.title}),d.isFeatured&&(0,Pv.jsx)("div",{className:"paper-badge featured",children:"\ud83d\udd25 Featured"}),!d.isFeatured&&d.badge&&(0,Pv.jsx)("div",{className:"paper-badge",children:d.badge}),(0,Pv.jsxs)("p",{className:"paper-date",children:["\ud83d\udcc5 ",new Date(d.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),(0,Pv.jsx)("div",{className:"paper-divider"}),(0,Pv.jsx)("div",{className:"paper-content",children:(0,Pv.jsx)("div",{className:"preserve-whitespace",children:d.content})}),(0,Pv.jsx)("div",{className:"paper-footer",children:(0,Pv.jsx)("span",{children:"\ud83d\udcf0 Christ Soldiers News"})})]})}),m&&(0,Pv.jsx)("div",{className:"event-modal-overlay",onClick:y,children:(0,Pv.jsxs)("div",{className:"event-modal-card",onClick:e=>e.stopPropagation(),children:[(0,Pv.jsxs)("div",{className:"modal-watermark",children:[(0,Pv.jsx)("img",{src:Fv,alt:"",className:"watermark-logo"}),(0,Pv.jsx)("img",{src:Uv,alt:"",className:"watermark-logo"})]}),(0,Pv.jsx)("button",{className:"modal-close",onClick:y,children:"\u2715"}),(0,Pv.jsxs)("div",{className:"event-modal-header",children:[(0,Pv.jsx)("div",{className:"event-modal-icon",children:m.icon||"\ud83d\udcc5"}),(0,Pv.jsx)("h2",{className:"event-modal-title",children:m.title}),(0,Pv.jsx)("div",{className:"event-modal-type-badge",children:m.type})]}),(0,Pv.jsx)("div",{className:"event-modal-divider"}),(0,Pv.jsxs)("div",{className:"event-modal-details",children:[(0,Pv.jsxs)("div",{className:"event-modal-info-row",children:[(0,Pv.jsx)("span",{className:"event-info-label",children:"\ud83d\udcc5 Date"}),(0,Pv.jsx)("span",{className:"event-info-value",children:b(m)})]}),m.time&&(0,Pv.jsxs)("div",{className:"event-modal-info-row",children:[(0,Pv.jsx)("span",{className:"event-info-label",children:"\u23f0 Time"}),(0,Pv.jsx)("span",{className:"event-info-value",children:m.time})]}),m.location&&(0,Pv.jsxs)("div",{className:"event-modal-info-row",children:[(0,Pv.jsx)("span",{className:"event-info-label",children:"\ud83d\udccd Location"}),(0,Pv.jsx)("span",{className:"event-info-value",children:m.googleMapsUrl?(0,Pv.jsxs)("a",{href:m.googleMapsUrl,target:"_blank",rel:"noopener noreferrer",className:"location-link",children:[m.location," ",(0,Pv.jsx)("span",{className:"external-link-icon",children:"\u2197"})]}):m.location})]}),(0,Pv.jsxs)("div",{className:"event-modal-description",children:[(0,Pv.jsx)("h3",{children:"About This Event"}),(0,Pv.jsx)("div",{className:"preserve-whitespace",children:m.description})]})]}),(0,Pv.jsxs)("div",{className:"event-modal-footer",children:[(0,Pv.jsx)("button",{className:"event-modal-register-btn",children:"Register Now"}),(0,Pv.jsx)("button",{className:"event-modal-close-btn",onClick:y,children:"Close"})]})]})}),(0,Pv.jsxs)("footer",{className:"home-footer",children:[(0,Pv.jsxs)("div",{className:"footer-content",children:[(0,Pv.jsxs)("div",{className:"footer-section",children:[(0,Pv.jsxs)("div",{className:"footer-logos",children:[(0,Pv.jsx)("img",{src:Fv,alt:"Christ Soldiers",className:"footer-logo"}),(0,Pv.jsx)("img",{src:Uv,alt:"Sunday School",className:"footer-logo"})]}),(0,Pv.jsx)("h3",{children:"\ud83d\udd4a\ufe0f Christ Soldiers & Sunday School Association"}),(0,Pv.jsx)("p",{children:"BGA Youth Wing - Empowering youth through faith and fellowship"})]}),(0,Pv.jsxs)("div",{className:"footer-section",children:[(0,Pv.jsx)("h4",{children:"Quick Links"}),(0,Pv.jsxs)("ul",{children:[(0,Pv.jsx)("li",{children:(0,Pv.jsx)(It,{to:"/about",children:"About Us"})}),(0,Pv.jsx)("li",{children:(0,Pv.jsx)(It,{to:"/events",children:"Events"})}),(0,Pv.jsx)("li",{children:(0,Pv.jsx)(It,{to:"/gallery",children:"Gallery"})}),(0,Pv.jsx)("li",{children:(0,Pv.jsx)(It,{to:"/contact",children:"Contact"})})]})]}),(0,Pv.jsxs)("div",{className:"footer-section",children:[(0,Pv.jsx)("h4",{children:"Admin"}),(0,Pv.jsx)(It,{to:"/admin/login",className:"admin-portal-link",children:"\ud83d\udd10 Admin Portal"})]})]}),(0,Pv.jsx)("div",{className:"footer-bottom",children:(0,Pv.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," Christ Soldiers & Sunday School Association. All rights reserved."]})})]})]})},qv=()=>(0,Pv.jsxs)("div",{className:"about-page",children:[(0,Pv.jsxs)("div",{className:"about-header",children:[(0,Pv.jsx)("h1",{children:"About Christ Soldiers"}),(0,Pv.jsx)("p",{children:"Youth Wing of Bethel Gospel Assembly Church"})]}),(0,Pv.jsx)("section",{className:"about-section",children:(0,Pv.jsxs)("div",{className:"about-content",children:[(0,Pv.jsxs)("div",{className:"about-card",children:[(0,Pv.jsx)("h2",{children:"Our Mission"}),(0,Pv.jsx)("p",{children:"Christ Soldiers is dedicated to nurturing and equipping young believers to become passionate followers of Christ. We strive to create an environment where youth can grow spiritually, develop their God-given talents, and learn to serve Christ with dedication and purpose."}),(0,Pv.jsx)("p",{children:"Through various programs, events, and activities, we aim to empower the next generation to impact their communities and the world with the Gospel of Jesus Christ."})]}),(0,Pv.jsxs)("div",{className:"about-card",children:[(0,Pv.jsx)("h2",{children:"Our Vision"}),(0,Pv.jsx)("p",{children:"We envision a generation of Christ-centered youth who are:"}),(0,Pv.jsxs)("ul",{children:[(0,Pv.jsx)("li",{children:"Firmly rooted in their faith and Biblical knowledge"}),(0,Pv.jsx)("li",{children:"Passionate about worship and prayer"}),(0,Pv.jsx)("li",{children:"Committed to serving God and their community"}),(0,Pv.jsx)("li",{children:"Equipped with skills and talents for Kingdom work"}),(0,Pv.jsx)("li",{children:"Leaders who will transform their world through Christ's love"})]})]}),(0,Pv.jsxs)("div",{className:"about-card",children:[(0,Pv.jsx)("h2",{children:"Our History"}),(0,Pv.jsx)("p",{children:"Christ Soldiers was established as the youth wing of Bethel Gospel Assembly Church with the purpose of bringing together young people from different backgrounds to worship, learn, and grow together in Christ."}),(0,Pv.jsx)("p",{children:"Over the years, we have witnessed countless young lives transformed by the power of God's Word and the fellowship of believers. Our ministry has grown to include various programs such as:"}),(0,Pv.jsxs)("ul",{children:[(0,Pv.jsx)("li",{children:"Weekly youth meetings and Bible studies"}),(0,Pv.jsx)("li",{children:"Annual talent competitions and cultural events"}),(0,Pv.jsx)("li",{children:"Community outreach and service projects"}),(0,Pv.jsx)("li",{children:"Leadership training and mentorship programs"}),(0,Pv.jsx)("li",{children:"Worship nights and prayer gatherings"})]})]}),(0,Pv.jsxs)("div",{className:"about-card",children:[(0,Pv.jsx)("h2",{children:"What We Believe"}),(0,Pv.jsxs)("ul",{children:[(0,Pv.jsx)("li",{children:"The Bible is the inspired and infallible Word of God"}),(0,Pv.jsx)("li",{children:"Jesus Christ is the Son of God and the only way to salvation"}),(0,Pv.jsx)("li",{children:"The Holy Spirit empowers believers for service and witness"}),(0,Pv.jsx)("li",{children:"Every believer is called to be a disciple and make disciples"}),(0,Pv.jsx)("li",{children:"The Church is the body of Christ, united in love and purpose"})]})]}),(0,Pv.jsxs)("div",{className:"about-card",children:[(0,Pv.jsx)("h2",{children:"Age Categories"}),(0,Pv.jsx)("p",{children:"We organize our participants into age-appropriate groups to ensure relevant and engaging activities:"}),(0,Pv.jsxs)("div",{className:"categories-grid",children:[(0,Pv.jsxs)("div",{className:"category-item",children:[(0,Pv.jsx)("h3",{children:"Junior"}),(0,Pv.jsx)("p",{children:"6-10 years"})]}),(0,Pv.jsxs)("div",{className:"category-item",children:[(0,Pv.jsx)("h3",{children:"Intermediate"}),(0,Pv.jsx)("p",{children:"11-15 years"})]}),(0,Pv.jsxs)("div",{className:"category-item",children:[(0,Pv.jsx)("h3",{children:"Senior"}),(0,Pv.jsx)("p",{children:"16-20 years"})]}),(0,Pv.jsxs)("div",{className:"category-item",children:[(0,Pv.jsx)("h3",{children:"Super Senior"}),(0,Pv.jsx)("p",{children:"21-25 years"})]})]})]}),(0,Pv.jsxs)("div",{className:"about-card",children:[(0,Pv.jsx)("h2",{children:"Join Us"}),(0,Pv.jsx)("p",{children:"We invite all young people to join us in this exciting journey of faith, fellowship, and service. Whether you're looking to grow spiritually, develop your talents, or make a difference in your community, Christ Soldiers is the place for you!"}),(0,Pv.jsx)("p",{children:"Contact us today to learn more about our programs and how you can get involved."})]})]})})]}),Gv=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{d()},[]);const d=async()=>{l(!0);try{const[e,n,r]=await Promise.all([Av.getUpcomingEvents(),Av.getEvents(),Av.getCategories()]);t(e),s(n),i(r.sort((e,t)=>e.order-t.order))}catch(e){console.error("Error loading events data:",e)}finally{l(!1)}},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return e?e.length<=t?e:e.substring(0,t).trim()+"...":""},m=()=>{u(null)},p=e=>{if(!e.startDate)return"Date TBA";const t=new Date(e.startDate),n=e.endDate?new Date(e.endDate):null;return n&&t.getTime()!==n.getTime()?t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()?"".concat(t.toLocaleDateString("en-US",{month:"long"})," ").concat(t.getDate()," - ").concat(n.getDate(),", ").concat(t.getFullYear()):"".concat(t.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})):t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})};return(0,Pv.jsxs)("div",{className:"events-page",children:[(0,Pv.jsxs)("div",{className:"events-header",children:[(0,Pv.jsx)("h1",{children:"Events"}),(0,Pv.jsx)("p",{children:"Join us in our exciting programs and activities"})]}),(0,Pv.jsxs)("section",{className:"events-section",children:[(0,Pv.jsx)("h2",{children:"Upcoming Events"}),o?(0,Pv.jsx)("div",{className:"loading-placeholder",children:"Loading events..."}):e.length>0?(0,Pv.jsx)("div",{className:"events-list",children:e.map(e=>(0,Pv.jsxs)("div",{className:"event-item",children:[(0,Pv.jsx)("h3",{children:e.title}),(0,Pv.jsxs)("div",{className:"event-info",children:[(0,Pv.jsxs)("div",{className:"event-info-item",children:[(0,Pv.jsx)("span",{className:"icon",children:"\ud83d\udcc5"}),(0,Pv.jsx)("span",{children:p(e)})]}),e.time&&(0,Pv.jsxs)("div",{className:"event-info-item",children:[(0,Pv.jsx)("span",{className:"icon",children:"\u23f0"}),(0,Pv.jsx)("span",{children:e.time})]}),e.location&&(0,Pv.jsxs)("div",{className:"event-info-item",children:[(0,Pv.jsx)("span",{className:"icon",children:"\ud83d\udccd"}),(0,Pv.jsx)("span",{children:e.location})]})]}),(0,Pv.jsx)("p",{className:"event-description",children:h(e.description)}),(0,Pv.jsx)("button",{className:"event-details-btn",onClick:()=>(e=>{u(e)})(e),children:"View Details \u2192"})]},e.id))}):(0,Pv.jsx)("div",{className:"empty-state",children:(0,Pv.jsx)("p",{children:"No upcoming events at the moment. Check back soon!"})})]}),(0,Pv.jsxs)("section",{className:"talent-test-section",children:[(0,Pv.jsx)("h2",{children:"Talent Test Event Categories"}),(0,Pv.jsx)("p",{className:"section-description",children:"Our annual talent test features the following categories across all age groups:"}),o?(0,Pv.jsx)("div",{className:"loading-placeholder",children:"Loading categories..."}):n.length>0?(0,Pv.jsx)("div",{className:"talent-test-grid",children:n.map((e,t)=>(0,Pv.jsxs)("div",{className:"talent-event-card",children:[(0,Pv.jsx)("h4",{children:e.name}),(0,Pv.jsx)("p",{children:e.description}),a.length>0&&(0,Pv.jsxs)("div",{className:"age-groups",children:[(0,Pv.jsx)("strong",{children:"Age Categories:"}),(0,Pv.jsx)("div",{className:"age-badges",children:a.map(e=>(0,Pv.jsxs)("span",{className:"age-badge",children:[e.name," (",e.minAge,"-",e.maxAge,")"]},e.id))})]})]},e.id||t))}):(0,Pv.jsx)("div",{className:"empty-state",children:(0,Pv.jsx)("p",{children:"Talent test categories will be announced soon."})})]}),(0,Pv.jsx)("section",{className:"info-section",children:(0,Pv.jsxs)("div",{className:"info-box",children:[(0,Pv.jsx)("h3",{children:"Want to Participate?"}),(0,Pv.jsx)("p",{children:"Registration for our events is managed through our admin portal. Contact your group leader or church administrator to register for upcoming events."})]})}),c&&(0,Pv.jsx)("div",{className:"event-modal-overlay",onClick:m,children:(0,Pv.jsxs)("div",{className:"event-modal",onClick:e=>e.stopPropagation(),children:[(0,Pv.jsx)("button",{className:"modal-close",onClick:m,children:"\u2715"}),(0,Pv.jsx)("div",{className:"modal-header",children:(0,Pv.jsx)("h2",{children:c.title})}),(0,Pv.jsxs)("div",{className:"modal-body",children:[(0,Pv.jsxs)("div",{className:"modal-info-grid",children:[(0,Pv.jsxs)("div",{className:"modal-info-item",children:[(0,Pv.jsx)("span",{className:"icon",children:"\ud83d\udcc5"}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("strong",{children:"Date"}),(0,Pv.jsx)("p",{children:p(c)})]})]}),c.time&&(0,Pv.jsxs)("div",{className:"modal-info-item",children:[(0,Pv.jsx)("span",{className:"icon",children:"\u23f0"}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("strong",{children:"Time"}),(0,Pv.jsx)("p",{children:c.time})]})]}),c.location&&(0,Pv.jsxs)("div",{className:"modal-info-item",children:[(0,Pv.jsx)("span",{className:"icon",children:"\ud83d\udccd"}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("strong",{children:"Location"}),(0,Pv.jsx)("p",{children:c.googleMapsUrl?(0,Pv.jsxs)("a",{href:c.googleMapsUrl,target:"_blank",rel:"noopener noreferrer",className:"location-link",children:[c.location," \u2197"]}):c.location})]})]})]}),(0,Pv.jsxs)("div",{className:"modal-description",children:[(0,Pv.jsx)("h3",{children:"Event Details"}),(0,Pv.jsx)("div",{className:"preserve-formatting",children:c.description})]})]})]})})]})},Hv=()=>{const e=[{id:1,title:"Christmas Celebration 2024",description:"Youth gathering for Christmas celebration with worship and fellowship",category:"Events"},{id:2,title:"Talent Test 2024",description:"Participants showcasing their talents in music and writing",category:"Talent Test"},{id:3,title:"Youth Retreat",description:"Mountain retreat with worship, teaching, and outdoor activities",category:"Retreat"},{id:4,title:"Community Outreach",description:"Serving the community with love and compassion",category:"Outreach"},{id:5,title:"Worship Night",description:"Evening of praise and worship with live music",category:"Worship"},{id:6,title:"Bible Study Session",description:"Youth gathering for in-depth Bible study and discussion",category:"Bible Study"},{id:7,title:"Solo Music Performance",description:"Participants performing in the solo music category",category:"Talent Test"},{id:8,title:"Award Ceremony",description:"Recognizing and celebrating talented youth",category:"Events"},{id:9,title:"Prayer Meeting",description:"Youth united in prayer and intercession",category:"Prayer"}],[t,n]=r.useState("All"),s="All"===t?e:e.filter(e=>e.category===t);return(0,Pv.jsxs)("div",{className:"gallery-page",children:[(0,Pv.jsxs)("div",{className:"gallery-header",children:[(0,Pv.jsx)("h1",{children:"Gallery"}),(0,Pv.jsx)("p",{children:"Memories from our events and activities"})]}),(0,Pv.jsxs)("section",{className:"gallery-section",children:[(0,Pv.jsxs)("div",{className:"filter-section",children:[(0,Pv.jsx)("h3",{children:"Filter by Category:"}),(0,Pv.jsx)("div",{className:"filter-buttons",children:["All","Events","Talent Test","Retreat","Outreach","Worship","Bible Study","Prayer"].map(e=>(0,Pv.jsx)("button",{className:"filter-btn ".concat(t===e?"active":""),onClick:()=>n(e),children:e},e))})]}),(0,Pv.jsx)("div",{className:"gallery-grid",children:s.map(e=>(0,Pv.jsx)("div",{className:"gallery-item",children:(0,Pv.jsxs)("div",{className:"image-placeholder",children:[(0,Pv.jsx)("span",{className:"placeholder-icon",children:"\ud83d\uddbc\ufe0f"}),(0,Pv.jsxs)("div",{className:"image-overlay",children:[(0,Pv.jsx)("h4",{children:e.title}),(0,Pv.jsx)("p",{children:e.description}),(0,Pv.jsx)("span",{className:"image-category",children:e.category})]})]})},e.id))}),0===s.length&&(0,Pv.jsx)("div",{className:"no-results",children:(0,Pv.jsx)("p",{children:"No images found in this category."})})]}),(0,Pv.jsx)("section",{className:"upload-info",children:(0,Pv.jsxs)("div",{className:"info-card",children:[(0,Pv.jsx)("h3",{children:"Want to Share Your Photos?"}),(0,Pv.jsx)("p",{children:"If you have photos from our events that you'd like to share, please contact our admin team. We'd love to feature them in our gallery!"})]})})]})},Wv=()=>{const[e,t]=(0,r.useState)({username:"",password:""}),[n,s]=(0,r.useState)(""),{loginAdmin:a}=Rv(),i=Ee(),o=n=>{t(d(d({},e),{},{[n.target.name]:n.target.value}))};return(0,Pv.jsx)("div",{className:"login-page",children:(0,Pv.jsxs)("div",{className:"login-container",children:[(0,Pv.jsxs)("div",{className:"login-header",children:[(0,Pv.jsx)("h1",{children:"\ud83d\udd10 Admin Portal"}),(0,Pv.jsx)("p",{children:"Christ Soldiers Talent Test - Admin Login"})]}),(0,Pv.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s("");const n=await a(e.username,e.password);n.success?i("/admin/dashboard"):s(n.error)},className:"login-form",children:[n&&(0,Pv.jsx)("div",{className:"error-message",children:n}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"username",children:"Username"}),(0,Pv.jsx)("input",{type:"text",id:"username",name:"username",value:e.username,onChange:o,required:!0,placeholder:"Enter your username",autoFocus:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Pv.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:o,required:!0,placeholder:"Enter your password"})]}),(0,Pv.jsx)("button",{type:"submit",className:"login-btn",children:"Login as Admin"}),(0,Pv.jsxs)("div",{className:"other-logins",children:[(0,Pv.jsx)("p",{children:"Other Portals:"}),(0,Pv.jsx)(It,{to:"/judge/login",children:"Judge Login"}),(0,Pv.jsx)("span",{children:"\u2022"}),(0,Pv.jsx)(It,{to:"/section/login",children:"Section Login"})]})]})]})})},Kv=()=>{const[e,t]=(0,r.useState)({username:"",password:""}),[n,s]=(0,r.useState)(""),{loginJudge:a}=Rv(),i=Ee(),o=n=>{t(d(d({},e),{},{[n.target.name]:n.target.value}))};return(0,Pv.jsx)("div",{className:"login-page",children:(0,Pv.jsxs)("div",{className:"login-container",children:[(0,Pv.jsxs)("div",{className:"login-header",children:[(0,Pv.jsx)("h1",{children:"\ud83d\udc68\u200d\u2696\ufe0f Judge Portal"}),(0,Pv.jsx)("p",{children:"Christ Soldiers Talent Test - Judge Login"})]}),(0,Pv.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s("");const n=await a(e.username,e.password);n.success?i("/judge/dashboard"):s(n.error)},className:"login-form",children:[n&&(0,Pv.jsx)("div",{className:"error-message",children:n}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"username",children:"Username"}),(0,Pv.jsx)("input",{type:"text",id:"username",name:"username",value:e.username,onChange:o,required:!0,placeholder:"Enter your username",autoFocus:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Pv.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:o,required:!0,placeholder:"Enter your password"})]}),(0,Pv.jsx)("button",{type:"submit",className:"login-btn",children:"Login as Judge"}),(0,Pv.jsxs)("div",{className:"other-logins",children:[(0,Pv.jsx)("p",{children:"Other Portals:"}),(0,Pv.jsx)(It,{to:"/admin/login",children:"Admin Login"}),(0,Pv.jsx)("span",{children:"\u2022"}),(0,Pv.jsx)(It,{to:"/section/login",children:"Section Login"})]})]})]})})},Jv=()=>{const[e,t]=(0,r.useState)({username:"",password:""}),[n,s]=(0,r.useState)(""),{loginSection:a}=Rv(),i=Ee(),o=n=>{t(d(d({},e),{},{[n.target.name]:n.target.value}))};return(0,Pv.jsx)("div",{className:"login-page",children:(0,Pv.jsxs)("div",{className:"login-container",children:[(0,Pv.jsxs)("div",{className:"login-header",children:[(0,Pv.jsx)("h1",{children:"\ud83d\udccd Section Portal"}),(0,Pv.jsx)("p",{children:"Christ Soldiers Talent Test - Section Login"})]}),(0,Pv.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s("");const n=await a(e.username,e.password);n.success?i("/section/dashboard"):s(n.error)},className:"login-form",children:[n&&(0,Pv.jsx)("div",{className:"error-message",children:n}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"username",children:"Username"}),(0,Pv.jsx)("input",{type:"text",id:"username",name:"username",value:e.username,onChange:o,required:!0,placeholder:"Enter your username",autoFocus:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Pv.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:o,required:!0,placeholder:"Enter your password"})]}),(0,Pv.jsx)("button",{type:"submit",className:"login-btn",children:"Login as Section"}),(0,Pv.jsxs)("div",{className:"other-logins",children:[(0,Pv.jsx)("p",{children:"Other Portals:"}),(0,Pv.jsx)(It,{to:"/admin/login",children:"Admin Login"}),(0,Pv.jsx)("span",{children:"\u2022"}),(0,Pv.jsx)(It,{to:"/judge/login",children:"Judge Login"})]})]})]})})},Qv=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)({}),[o,l]=(0,r.useState)({}),[c,u]=(0,r.useState)({}),[d,h]=(0,r.useState)({}),{user:m,logout:p}=Rv(),f=Ee();(0,r.useEffect)(()=>{m&&"admin"===m.role?g():f("/admin/login")},[m,f]);const g=async()=>{const{talentTestEvents:e,categories:n,participants:r,groupTeams:a,events:o,groupEvents:c,declaredResults:d}=await Av.getEventDashboardData();t(e);const m=n;s(m);const p={};m.forEach((e,t)=>{p[e.name.toLowerCase()]=t+1});const f=e=>[...e].sort((e,t)=>{const n=e.match(/\(([^)]+)\)/g),r=t.match(/\(([^)]+)\)/g),s=n?n[n.length-1].replace(/[()]/g,"").toLowerCase().trim():"",a=r?r[r.length-1].replace(/[()]/g,"").toLowerCase().trim():"",i=p[s]||999,o=p[a]||999;return i!==o?i-o:e.localeCompare(t)}),g={},v={},y={},b={},x=new Map,w=new Map,j=new Map,N=new Map;for(const t of e){const e=r.filter(e=>e.talentTestEventId===t.id),n=a.filter(e=>e.talentTestEventId===t.id);g[t.id]={participants:e.length,teams:n.length,total:e.length+n.length};const s=new Set;for(const t of e){const e=t.eventIds||(t.eventId?[t.eventId]:[]);for(const n of e){const e="".concat(n,"-").concat(t.ageCategory);s.add(e)}}j.set(t.id,s);const i=new Set;for(const t of n)t.groupEventId&&i.add(String(t.groupEventId));N.set(t.id,i)}const S=new Set;for(const t of j.values())for(const e of t)S.add(e);const E=Array.from(S).map(async e=>{const[t,n]=e.split("-"),r=await Av.areAllJudgesLocked(t,n),s=d.some(e=>e.eventId===t&&e.category===n);x.set(e,{isLocked:r,isDeclared:s})});await Promise.all(E);const k=new Set;for(const t of N.values())for(const e of t)k.add(e);const C=await Av.getJudges(),T=await Av.getGroupEventLocks();console.log("Debug - Group Event Locks:",T),console.log("Debug - Declared Results:",d),console.log("Debug - All Group Combos:",Array.from(k));const I=Array.from(k).map(async e=>{const t=c.find(t=>String(t.id)===String(e));if(!t)return void console.log("Debug - Group event not found for ID: ".concat(e));let n=!1;n="quiz"===t.scoringType?T.some(t=>String(t.groupEventId)===String(e)&&t.locked):C.length>0&&C.every(t=>T.some(n=>n.judgeName===t.username&&String(n.groupEventId)===String(e)&&n.locked));const r=d.some(t=>String(t.groupEventId)===String(e));console.log("Debug - Group Event ".concat(t.name," (ID: ").concat(e,"): locked=").concat(n,", declared=").concat(r)),w.set(e,{isLocked:n,isDeclared:r})});await Promise.all(I);for(const t of e){const e=j.get(t.id),n=N.get(t.id),r=new Set,s=new Set,a=new Set;for(const t of e){const e=x.get(t);if(e){const[n,i]=t.split("-"),l=o.find(e=>e.id===n);if(l){const t="".concat(l.name," (").concat(i,")");e.isDeclared?s.add(t):e.isLocked?r.add(t):a.add(t)}}}for(const t of n){const e=w.get(t),n=c.find(e=>String(e.id)===String(t));if(e&&n){const t="".concat(n.name," (Group)");e.isDeclared?s.add(t):e.isLocked?r.add(t):a.add(t)}}v[t.id]=f(Array.from(r)),y[t.id]=f(Array.from(s)),b[t.id]=f(Array.from(a))}i(g),l(v),u(y),h(b)},v=()=>{f("/admin/talent-test-events")},y=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set";return(0,Pv.jsxs)("div",{className:"event-dashboard-container",children:[(0,Pv.jsxs)("div",{className:"header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"\ud83c\udfad Talent Test Events"}),(0,Pv.jsxs)("p",{children:["Admin: ",null===m||void 0===m?void 0:m.username]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{f("/admin/master-data")},className:"btn btn-secondary",children:"\ud83d\udcca Master Data"}),(0,Pv.jsx)("button",{onClick:()=>f("/admin/news-events"),className:"btn btn-secondary",children:"\ud83d\udcf0 News & Events"}),(0,Pv.jsx)("button",{onClick:v,className:"btn btn-primary",children:"\u2699\ufe0f Manage Events"}),(0,Pv.jsx)("button",{onClick:()=>{p(),(0,r.startTransition)(()=>{f("/admin/login")})},className:"btn btn-logout",children:"Logout"})]})]}),0===e.length?(0,Pv.jsxs)("div",{className:"empty-state",children:[(0,Pv.jsx)("div",{className:"empty-icon",children:"\ud83c\udfad"}),(0,Pv.jsx)("h2",{children:"No Talent Test Events"}),(0,Pv.jsx)("p",{children:"Create your first talent test event to get started"}),(0,Pv.jsx)("button",{onClick:v,className:"btn btn-primary btn-large",children:"+ Create Event"})]}):(0,Pv.jsx)("div",{className:"events-grid",children:e.map(e=>{const t=(e=>{if(!e.startDate||!e.endDate)return"draft";const t=new Date,n=new Date(e.startDate),r=new Date(e.endDate);return t<n?"upcoming":t>r?"completed":"active"})(e),n=(e=>{const t={active:{text:"Active",className:"status-active"},upcoming:{text:"Upcoming",className:"status-upcoming"},completed:{text:"Completed",className:"status-completed"},draft:{text:"Draft",className:"status-draft"}};return t[e]||t.draft})(t),r=a[e.id]||{participants:0,teams:0,total:0},s=o[e.id]||[],i=c[e.id]||[],l=d[e.id]||[];return(0,Pv.jsxs)("div",{className:"event-card",onClick:()=>{return t=e.id,void f("/admin/event/".concat(t));var t},children:[(0,Pv.jsxs)("div",{className:"event-header",children:[(0,Pv.jsx)("h3",{children:e.name}),(0,Pv.jsxs)("div",{className:"event-badges",children:[(0,Pv.jsx)("span",{className:"status-badge ".concat(n.className),children:n.text}),e.registrationOpen&&"completed"!==t&&(0,Pv.jsx)("span",{className:"status-badge registration-open",children:"Registration Open"})]})]}),e.description&&(0,Pv.jsx)("p",{className:"event-description",children:e.description}),(0,Pv.jsxs)("div",{className:"event-details",children:[(0,Pv.jsxs)("div",{className:"detail-row",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83d\udcc5 Start:"}),(0,Pv.jsx)("span",{className:"detail-value",children:y(e.startDate)})]}),(0,Pv.jsxs)("div",{className:"detail-row",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83d\udcc5 End:"}),(0,Pv.jsx)("span",{className:"detail-value",children:y(e.endDate)})]}),e.venue&&(0,Pv.jsxs)("div",{className:"detail-row",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83d\udccd Venue:"}),(0,Pv.jsx)("span",{className:"detail-value",children:e.venue})]})]}),(0,Pv.jsxs)("div",{className:"event-stats",children:[(0,Pv.jsxs)("div",{className:"stat-item",children:[(0,Pv.jsx)("span",{className:"stat-number",children:r.participants}),(0,Pv.jsx)("span",{className:"stat-label",children:"Participants"})]}),(0,Pv.jsxs)("div",{className:"stat-item",children:[(0,Pv.jsx)("span",{className:"stat-number",children:r.teams}),(0,Pv.jsx)("span",{className:"stat-label",children:"Teams"})]}),(0,Pv.jsxs)("div",{className:"stat-item",children:[(0,Pv.jsx)("span",{className:"stat-number",children:r.total}),(0,Pv.jsx)("span",{className:"stat-label",children:"Total"})]})]}),(l.length>0||s.length>0||i.length>0)&&(0,Pv.jsxs)("div",{className:"notifications-grid",children:[l.length>0&&(0,Pv.jsxs)("div",{className:"pending-notification",children:[(0,Pv.jsx)("div",{className:"notification-icon",children:"\u23f3"}),(0,Pv.jsxs)("div",{className:"notification-content",children:[(0,Pv.jsx)("strong",{children:l.length}),(0,Pv.jsx)("p",{className:"notification-text",children:"Pending"})]})]}),s.length>0&&(0,Pv.jsxs)("div",{className:"locked-notification",children:[(0,Pv.jsx)("div",{className:"notification-icon",children:"\ud83d\udd12"}),(0,Pv.jsxs)("div",{className:"notification-content",children:[(0,Pv.jsx)("strong",{children:s.length}),(0,Pv.jsx)("p",{className:"notification-text",children:"Locked"})]})]}),i.length>0&&(0,Pv.jsxs)("div",{className:"declared-notification",children:[(0,Pv.jsx)("div",{className:"notification-icon",children:"\u2705"}),(0,Pv.jsxs)("div",{className:"notification-content",children:[(0,Pv.jsx)("strong",{children:i.length}),(0,Pv.jsx)("p",{className:"notification-text",children:"Declared"})]})]})]}),(0,Pv.jsx)("div",{className:"event-footer",children:(0,Pv.jsx)("button",{className:"btn-view",children:"View Details \u2192"})})]},e.id)})})]})},Yv=()=>{const{eventId:e}=ke(),[t,n]=(0,r.useState)(null),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)({participants:0,teams:0,totalParticipants:0,totalTeams:0}),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),{user:p,logout:f}=Rv(),g=Ee();(0,r.useEffect)(()=>{p&&"admin"===p.role?v():g("/admin/login")},[p,g,e]);const v=async()=>{const{event:t,categories:r,participants:s,groupTeams:i,events:l,groupEvents:u,declaredResults:h,judges:p,groupEventLocks:f}=await Av.getEventDetailViewData(e);n(t);const g=r;a(g);const v={};g.forEach((e,t)=>{v[e.name.toLowerCase()]=t+1});const y=e=>[...e].sort((e,t)=>{const n=e.match(/\(([^)]+)\)/g),r=t.match(/\(([^)]+)\)/g),s=n?n[n.length-1].replace(/[()]/g,"").toLowerCase().trim():"",a=r?r[r.length-1].replace(/[()]/g,"").toLowerCase().trim():"",i=v[s]||999,o=v[a]||999;return i!==o?i-o:e.localeCompare(t)}),b=s.filter(t=>t.talentTestEventId===e),x=i.filter(t=>t.talentTestEventId===e);o({participants:b.length,teams:x.length,totalParticipants:s.length,totalTeams:i.length});const w=new Set;for(const e of b){const t=e.eventIds||(e.eventId?[e.eventId]:[]);for(const n of t){const t="".concat(n,"-").concat(e.ageCategory);w.add(t)}}const j=new Set;for(const e of x)e.groupEventId&&j.add(e.groupEventId);const N=Array.from(w).map(async e=>{const[t,n]=e.split("-"),r=await Av.areAllJudgesLocked(t,n),s=h.some(e=>e.eventId===t&&e.category===n),a=l.find(e=>e.id===t);return{combo:e,isLocked:r,isDeclared:s,eventName:null===a||void 0===a?void 0:a.name,category:n,isGroup:!1}}),S=await Promise.all(N),E=Array.from(j).map(async e=>{const t=u.find(t=>String(t.id)===String(e));if(!t)return null;let n=!1;n="quiz"===t.scoringType?f.some(t=>String(t.groupEventId)===String(e)&&t.locked):p.length>0&&p.every(t=>f.some(n=>n.judgeName===t.username&&String(n.groupEventId)===String(e)&&n.locked));const r=h.some(t=>String(t.groupEventId)===String(e));return{combo:e,isLocked:n,isDeclared:r,eventName:t.name,category:null,isGroup:!0}}),k=[...S,...(await Promise.all(E)).filter(e=>null!==e)],C=k.filter(e=>!e.isLocked&&!e.isDeclared&&e.eventName).map(e=>e.isGroup?"".concat(e.eventName," (Group)"):"".concat(e.eventName," (").concat(e.category,")")),T=k.filter(e=>e.isLocked&&!e.isDeclared&&e.eventName).map(e=>e.isGroup?"".concat(e.eventName," (Group)"):"".concat(e.eventName," (").concat(e.category,")")),I=k.filter(e=>e.isDeclared&&e.eventName).map(e=>e.isGroup?"".concat(e.eventName," (Group)"):"".concat(e.eventName," (").concat(e.category,")"));m(y(C)),c(y(T)),d(y(I))},y=t=>{g(t,{state:{eventId:e}})};if(!t)return(0,Pv.jsx)("div",{className:"event-detail-container",children:(0,Pv.jsx)("p",{children:"Loading..."})});const b=e=>e?new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Not set",x=(()=>{if(!t.startDate||!t.endDate)return"draft";const e=new Date,n=new Date(t.startDate),r=new Date(t.endDate);return e<n?"upcoming":e>r?"completed":"active"})();return(0,Pv.jsxs)("div",{className:"event-detail-container",children:[(0,Pv.jsxs)("div",{className:"header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("button",{onClick:()=>{g("/admin/dashboard")},className:"btn-back",children:"\u2190 Back to Events"}),(0,Pv.jsx)("h1",{children:t.name}),(0,Pv.jsxs)("div",{className:"event-meta",children:[(0,Pv.jsx)("span",{className:"status-badge status-".concat(x),children:x.charAt(0).toUpperCase()+x.slice(1)}),t.registrationOpen&&"completed"!==x&&(0,Pv.jsx)("span",{className:"status-badge registration-open",children:"Registration Open"})]})]}),(0,Pv.jsx)("div",{className:"header-actions",children:(0,Pv.jsx)("button",{onClick:()=>{f(),(0,r.startTransition)(()=>{g("/admin/login")})},className:"btn btn-logout",children:"Logout"})})]}),(h.length>0||l.length>0||u.length>0)&&(0,Pv.jsxs)("div",{className:"notifications-banner-grid",children:[h.length>0&&(0,Pv.jsxs)("div",{className:"pending-notification-banner",children:[(0,Pv.jsx)("div",{className:"notification-icon",children:"\u23f3"}),(0,Pv.jsxs)("div",{className:"notification-content",children:[(0,Pv.jsxs)("strong",{children:[h.length," Event",h.length>1?"s":""," In Progress"]}),(0,Pv.jsx)("p",{children:"Judging in progress for the following events:"}),(0,Pv.jsx)("ul",{className:"locked-events-list",children:h.map((e,t)=>(0,Pv.jsx)("li",{children:e},t))})]})]}),l.length>0&&(0,Pv.jsxs)("div",{className:"locked-notification-banner",children:[(0,Pv.jsx)("div",{className:"notification-icon",children:"\ud83d\udd12"}),(0,Pv.jsxs)("div",{className:"notification-content",children:[(0,Pv.jsxs)("strong",{children:[l.length," Event",l.length>1?"s":""," Locked by All Judges"]}),(0,Pv.jsx)("p",{children:"The following events are ready for result declaration:"}),(0,Pv.jsx)("ul",{className:"locked-events-list",children:l.map((e,t)=>(0,Pv.jsx)("li",{children:e},t))})]})]}),u.length>0&&(0,Pv.jsxs)("div",{className:"declared-notification-banner",children:[(0,Pv.jsx)("div",{className:"notification-icon",children:"\u2705"}),(0,Pv.jsxs)("div",{className:"notification-content",children:[(0,Pv.jsxs)("strong",{children:[u.length," Event",u.length>1?"s":""," Declared"]}),(0,Pv.jsx)("p",{children:"Results have been officially declared for:"}),(0,Pv.jsx)("ul",{className:"locked-events-list",children:u.map((e,t)=>(0,Pv.jsx)("li",{children:e},t))})]})]})]}),t.description&&(0,Pv.jsxs)("div",{className:"event-info-card",children:[(0,Pv.jsx)("p",{className:"event-description",children:t.description}),(0,Pv.jsxs)("div",{className:"event-details-grid",children:[(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-icon",children:"\ud83d\udcc5"}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("div",{className:"detail-label",children:"Start Date"}),(0,Pv.jsx)("div",{className:"detail-value",children:b(t.startDate)})]})]}),(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-icon",children:"\ud83d\udcc5"}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("div",{className:"detail-label",children:"End Date"}),(0,Pv.jsx)("div",{className:"detail-value",children:b(t.endDate)})]})]}),t.venue&&(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-icon",children:"\ud83d\udccd"}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("div",{className:"detail-label",children:"Venue"}),(0,Pv.jsx)("div",{className:"detail-value",children:t.venue})]})]}),t.maxParticipants>0&&(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-icon",children:"\ud83d\udc65"}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("div",{className:"detail-label",children:"Max Participants"}),(0,Pv.jsx)("div",{className:"detail-value",children:t.maxParticipants})]})]})]})]}),(0,Pv.jsxs)("div",{className:"stats-overview",children:[(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("div",{className:"stat-icon",children:"\ud83d\udc64"}),(0,Pv.jsxs)("div",{className:"stat-content",children:[(0,Pv.jsx)("div",{className:"stat-number",children:i.participants}),(0,Pv.jsx)("div",{className:"stat-label",children:"Participants"})]})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,Pv.jsxs)("div",{className:"stat-content",children:[(0,Pv.jsx)("div",{className:"stat-number",children:i.teams}),(0,Pv.jsx)("div",{className:"stat-label",children:"Group Teams"})]})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("div",{className:"stat-icon",children:"\ud83d\udcca"}),(0,Pv.jsxs)("div",{className:"stat-content",children:[(0,Pv.jsx)("div",{className:"stat-number",children:i.participants+i.teams}),(0,Pv.jsx)("div",{className:"stat-label",children:"Total Entries"})]})]})]}),(0,Pv.jsxs)("div",{className:"actions-grid",children:[(0,Pv.jsxs)("div",{className:"action-card",onClick:()=>y("/admin/participants"),children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83d\udc64"}),(0,Pv.jsx)("h3",{children:"Participants"}),(0,Pv.jsx)("p",{children:"Manage individual participants and their registrations"}),(0,Pv.jsxs)("div",{className:"action-count",children:[i.participants," registered"]})]}),(0,Pv.jsxs)("div",{className:"action-card",onClick:()=>y("/admin/group-teams"),children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83d\udc65"}),(0,Pv.jsx)("h3",{children:"Group Teams"}),(0,Pv.jsx)("p",{children:"Manage team registrations and members"}),(0,Pv.jsxs)("div",{className:"action-count",children:[i.teams," teams"]})]}),(0,Pv.jsxs)("div",{className:"action-card",onClick:()=>y("/admin/results"),children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83d\udcca"}),(0,Pv.jsx)("h3",{children:"Results View"}),(0,Pv.jsx)("p",{children:"View and manage competition results"}),(0,Pv.jsx)("div",{className:"action-badge",children:"View Results"})]}),(0,Pv.jsxs)("div",{className:"action-card",onClick:()=>y("/admin/group-results"),children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83c\udfc6"}),(0,Pv.jsx)("h3",{children:"Group Results"}),(0,Pv.jsx)("p",{children:"View team competition results"}),(0,Pv.jsx)("div",{className:"action-badge",children:"View Results"})]}),(0,Pv.jsxs)("div",{className:"action-card",onClick:()=>y("/admin/leaderboard"),children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83e\udd47"}),(0,Pv.jsx)("h3",{children:"Leaderboard"}),(0,Pv.jsx)("p",{children:"View overall rankings and standings"}),(0,Pv.jsx)("div",{className:"action-badge",children:"View Rankings"})]}),(0,Pv.jsxs)("div",{className:"action-card",onClick:()=>y("/admin/individual-results"),children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83d\udd0d"}),(0,Pv.jsx)("h3",{children:"Individual Results"}),(0,Pv.jsx)("p",{children:"Filter and view detailed individual results by section and church"}),(0,Pv.jsx)("div",{className:"action-badge",children:"Search Results"})]}),(0,Pv.jsxs)("div",{className:"action-card highlight-card",onClick:()=>{const e=h.length>0,t=l.length>0;if(0===h.length+l.length+u.length)return void alert("\u26a0\ufe0f No Events Found\n\nThere are no events registered for this talent test. Please add events and participants before declaring champions.");if(e){const e=h.slice(0,5).join("\n\u2022 "),t=h.length>5?"\n\u2022 ...and ".concat(h.length-5," more"):"";return void alert("\u26a0\ufe0f Incomplete Events Detected\n\n"+"".concat(h.length," event").concat(h.length>1?"s are":" is"," still in progress:\n\n")+"\u2022 ".concat(e).concat(t,"\n\n")+"Please ensure all judges have completed scoring and locked their results before declaring champions.")}if(t){const e=l.slice(0,5).join("\n\u2022 "),t=l.length>5?"\n\u2022 ...and ".concat(l.length-5," more"):"";return void alert("\u26a0\ufe0f Results Not Declared\n\n"+"".concat(l.length," event").concat(l.length>1?"s have":" has"," been locked but not officially declared:\n\n")+"\u2022 ".concat(e).concat(t,"\n\n")+"Please declare the results for all events before declaring overall champions.")}const n="\ud83c\udfc6 Declare Overall Champions?\n\n"+"\u2705 All ".concat(u.length," event").concat(u.length>1?"s have":" has"," been declared\n\n")+"This will finalize the competition and declare:\n\u2022 Section Champions\n\u2022 Church Champions\n\u2022 Individual Champions\n\nDo you want to proceed to the leaderboard?";window.confirm(n)&&y("/admin/leaderboard")},children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83d\udc51"}),(0,Pv.jsx)("h3",{children:"Declare Champions"}),(0,Pv.jsx)("p",{children:"Finalize and declare the overall champions"}),(0,Pv.jsx)("div",{className:"action-badge declare-badge",children:"Declare Winners"})]}),(0,Pv.jsxs)("div",{className:"action-card",onClick:()=>y("/admin/printable-results"),children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83d\udda8\ufe0f"}),(0,Pv.jsx)("h3",{children:"Print Results"}),(0,Pv.jsx)("p",{children:"Generate printable result sheets"}),(0,Pv.jsx)("div",{className:"action-badge",children:"Print"})]})]})]})},Xv=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)({}),{user:a,logout:i}=Rv(),o=Ee();(0,r.useEffect)(()=>{a&&"section"===a.role?l():o("/section/login")},[a,o]);const l=async()=>{const{events:e,participants:n}=await Av.getSectionEventDashboardData(a.section);t(e);const r={};e.forEach(e=>{const t=n.filter(t=>t.talentTestEventId===e.id);r[e.id]={participants:t.length,total:t.length}}),s(r)},c=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set";return(0,Pv.jsxs)("div",{className:"event-dashboard-container",children:[(0,Pv.jsxs)("div",{className:"header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"\ud83c\udfad Talent Test Events"}),(0,Pv.jsxs)("p",{children:[null===a||void 0===a?void 0:a.section," Section: ",null===a||void 0===a?void 0:a.username]})]}),(0,Pv.jsx)("div",{className:"header-actions",children:(0,Pv.jsx)("button",{onClick:()=>{i(),(0,r.startTransition)(()=>{o("/section/login")})},className:"btn btn-logout",children:"Logout"})})]}),0===e.length?(0,Pv.jsxs)("div",{className:"empty-state",children:[(0,Pv.jsx)("div",{className:"empty-icon",children:"\ud83c\udfad"}),(0,Pv.jsx)("h2",{children:"No Talent Test Events"}),(0,Pv.jsx)("p",{children:"No events available at the moment"})]}):(0,Pv.jsx)("div",{className:"events-grid",children:e.map(e=>{const t=(e=>{if(!e.startDate||!e.endDate)return"draft";const t=new Date,n=new Date(e.startDate),r=new Date(e.endDate);return t<n?"upcoming":t>r?"completed":"active"})(e),r=(e=>{const t={active:{text:"Active",className:"status-active"},upcoming:{text:"Upcoming",className:"status-upcoming"},completed:{text:"Completed",className:"status-completed"},draft:{text:"Draft",className:"status-draft"}};return t[e]||t.draft})(t),s=n[e.id]||{participants:0,total:0};return(0,Pv.jsxs)("div",{className:"event-card",onClick:()=>{return t=e.id,void o("/section/event/".concat(t));var t},children:[(0,Pv.jsxs)("div",{className:"event-header",children:[(0,Pv.jsx)("h3",{children:e.name}),(0,Pv.jsxs)("div",{className:"event-badges",children:[(0,Pv.jsx)("span",{className:"status-badge ".concat(r.className),children:r.text}),e.registrationOpen&&"completed"!==t&&(0,Pv.jsx)("span",{className:"status-badge registration-open",children:"Registration Open"})]})]}),e.description&&(0,Pv.jsx)("p",{className:"event-description",children:e.description}),(0,Pv.jsxs)("div",{className:"event-dates",children:[(0,Pv.jsxs)("div",{className:"date-item",children:[(0,Pv.jsx)("span",{className:"date-label",children:"Start:"}),(0,Pv.jsx)("span",{className:"date-value",children:c(e.startDate)})]}),(0,Pv.jsxs)("div",{className:"date-item",children:[(0,Pv.jsx)("span",{className:"date-label",children:"End:"}),(0,Pv.jsx)("span",{className:"date-value",children:c(e.endDate)})]})]}),(0,Pv.jsxs)("div",{className:"event-stats",children:[(0,Pv.jsxs)("div",{className:"stat-item",children:[(0,Pv.jsx)("span",{className:"stat-label",children:"Participants"}),(0,Pv.jsx)("span",{className:"stat-value",children:s.participants})]}),(0,Pv.jsx)("div",{className:"stat-item",children:(0,Pv.jsxs)("span",{className:"stat-label",children:["From ",null===a||void 0===a?void 0:a.section]})})]}),(0,Pv.jsx)("div",{className:"event-footer",children:(0,Pv.jsx)("span",{className:"view-details",children:"Click to view details \u2192"})})]},e.id)})})]})},$v=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)({participants:0}),{eventId:a}=ke(),{user:i,logout:o}=Rv(),l=Ee();(0,r.useEffect)(()=>{i&&"section"===i.role?c():l("/section/login")},[i,l,a]);const c=async()=>{try{const{event:e,participants:n}=await Av.getSectionEventDetailViewData(a,i.section);t(e);const r=n.filter(e=>e.talentTestEventId===a);s({participants:r.length})}catch(e){console.error("Error loading event:",e),l("/section/dashboard")}},u=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set";return e?(0,Pv.jsxs)("div",{className:"event-detail-container",children:[(0,Pv.jsxs)("div",{className:"header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("button",{onClick:()=>{l("/section/dashboard")},className:"btn-back",children:"\u2190 Back to Events"}),(0,Pv.jsx)("h1",{children:e.name}),(0,Pv.jsxs)("p",{children:[null===i||void 0===i?void 0:i.section," Section: ",null===i||void 0===i?void 0:i.username]})]}),(0,Pv.jsx)("button",{onClick:()=>{o(),(0,r.startTransition)(()=>{l("/section/login")})},className:"btn btn-logout",children:"Logout"})]}),(0,Pv.jsx)("div",{className:"event-info-section",children:(0,Pv.jsxs)("div",{className:"info-card",children:[(0,Pv.jsx)("h3",{children:"Event Details"}),e.description&&(0,Pv.jsx)("p",{className:"event-description",children:e.description}),(0,Pv.jsxs)("div",{className:"info-grid",children:[(0,Pv.jsxs)("div",{className:"info-item",children:[(0,Pv.jsx)("span",{className:"info-label",children:"Start Date:"}),(0,Pv.jsx)("span",{className:"info-value",children:u(e.startDate)})]}),(0,Pv.jsxs)("div",{className:"info-item",children:[(0,Pv.jsx)("span",{className:"info-label",children:"End Date:"}),(0,Pv.jsx)("span",{className:"info-value",children:u(e.endDate)})]}),(0,Pv.jsxs)("div",{className:"info-item",children:[(0,Pv.jsx)("span",{className:"info-label",children:"Registration:"}),(0,Pv.jsx)("span",{className:"info-value ".concat(e.registrationOpen?"status-open":"status-closed"),children:e.registrationOpen?"Open":"Closed"})]})]})]})}),(0,Pv.jsxs)("div",{className:"stats-section",children:[(0,Pv.jsx)("h2",{children:"Section Statistics"}),(0,Pv.jsx)("div",{className:"stats-grid",children:(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,Pv.jsxs)("div",{className:"stat-content",children:[(0,Pv.jsx)("h3",{children:"Participants"}),(0,Pv.jsx)("p",{className:"stat-number",children:n.participants}),(0,Pv.jsxs)("span",{className:"stat-label",children:["From ",null===i||void 0===i?void 0:i.section," Section"]})]})]})})]}),(0,Pv.jsxs)("div",{className:"actions-section",children:[(0,Pv.jsx)("h2",{children:"Manage Registrations"}),(0,Pv.jsx)("div",{className:"action-cards",children:(0,Pv.jsxs)("div",{className:"action-card",onClick:()=>{l("/section/participants",{state:{eventId:a,eventName:e.name}})},children:[(0,Pv.jsx)("div",{className:"action-icon",children:"\ud83d\udc65"}),(0,Pv.jsx)("h3",{children:"Participants"}),(0,Pv.jsx)("p",{children:"View and manage individual participants from your section"}),(0,Pv.jsxs)("div",{className:"action-stat",children:[n.participants," registered"]}),(0,Pv.jsx)("button",{className:"btn btn-primary",children:"View Participants \u2192"})]})})]})]}):(0,Pv.jsx)("div",{className:"event-detail-container",children:(0,Pv.jsx)("div",{className:"loading",children:"Loading event details..."})})},Zv=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),{user:p,logout:f}=Rv(),g=Ee();(0,r.useEffect)(()=>{p&&"admin"===p.role?v():g("/admin/login")},[p,g]);const v=async()=>{const{events:e,categories:t,participants:r}=await Av.getAdminDashboardData();d(e),m(t),n(r),a([]),o(null),c(null)};(0,r.useEffect)(()=>{(()=>{let e=[...t];i||l?(i&&(e=e.filter(e=>e.ageCategory===i)),l&&(e=e.filter(e=>(e.eventIds||(e.eventId?[e.eventId]:[])).includes(l))),a(e)):a([])})()},[i,l]);const y=()=>{o(null),c(null)},b=e=>(e.eventIds?e.eventIds:e.eventId?[e.eventId]:[]).map(e=>{const t=u.find(t=>t.id===e);return t?t.name:"Unknown"}).join(", "),x={total:t.length,byCategory:h.reduce((e,n)=>(e[n.name]=t.filter(e=>e.ageCategory===n.name).length,e),{})};return(0,Pv.jsxs)("div",{className:"admin-dashboard",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"Admin Dashboard"}),(0,Pv.jsxs)("p",{children:["Welcome, ",null===p||void 0===p?void 0:p.username]})]}),(0,Pv.jsx)("div",{className:"header-actions",children:(0,Pv.jsx)("button",{onClick:()=>{f(),(0,r.startTransition)(()=>{g("/admin/login")})},className:"btn btn-secondary",children:"Logout"})})]}),(0,Pv.jsxs)("div",{className:"admin-menu-grid",children:[(0,Pv.jsxs)("button",{onClick:()=>g("/admin/talent-test-events"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83c\udfad"}),(0,Pv.jsx)("div",{className:"menu-title",children:"Talent Test Events"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"Create & Manage Events"})]}),(0,Pv.jsxs)("button",{onClick:()=>g("/admin/participants"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83d\udccd"}),(0,Pv.jsx)("div",{className:"menu-title",children:"Participants"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"View by Location"})]}),(0,Pv.jsxs)("button",{onClick:()=>g("/admin/master-data"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83d\uddc2\ufe0f"}),(0,Pv.jsx)("div",{className:"menu-title",children:"Master Data"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"Manage Events & Sections"})]}),(0,Pv.jsxs)("button",{onClick:()=>g("/admin/group-teams"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83d\udc65"}),(0,Pv.jsx)("div",{className:"menu-title",children:"Group Teams"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"Manage Team Registration"})]}),(0,Pv.jsxs)("button",{onClick:()=>g("/admin/results"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83d\udcca"}),(0,Pv.jsx)("div",{className:"menu-title",children:"View Results"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"Individual Event Results"})]}),(0,Pv.jsxs)("button",{onClick:()=>g("/admin/group-results"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83c\udfc5"}),(0,Pv.jsx)("div",{className:"menu-title",children:"Group Results"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"Team Event Results"})]}),(0,Pv.jsxs)("button",{onClick:()=>g("/admin/leaderboard"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83c\udfc6"}),(0,Pv.jsx)("div",{className:"menu-title",children:"Leaderboard"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"Overall Rankings"})]}),(0,Pv.jsxs)("button",{onClick:()=>g("/admin/printable-results"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83d\udda8\ufe0f"}),(0,Pv.jsx)("div",{className:"menu-title",children:"Print Results"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"Printable Summary"})]}),(0,Pv.jsxs)("button",{onClick:()=>g("/admin/migration"),className:"menu-card",children:[(0,Pv.jsx)("div",{className:"menu-icon",children:"\ud83d\udd04"}),(0,Pv.jsx)("div",{className:"menu-title",children:"Firebase Migration"}),(0,Pv.jsx)("div",{className:"menu-subtitle",children:"Data Migration Utility"})]})]}),(0,Pv.jsxs)("div",{className:"stats-grid",children:[(0,Pv.jsxs)("div",{className:"stat-card ".concat(null===i&&null===l?"active":""),onClick:()=>{o(null),c(null)},style:{cursor:"pointer"},children:[(0,Pv.jsx)("h3",{children:"Total Participants"}),(0,Pv.jsx)("p",{className:"stat-number",children:x.total})]}),h.map(e=>(0,Pv.jsxs)("div",{className:"stat-card ".concat(i===e.name?"active":""),onClick:()=>(e=>{o(i===e?null:e)})(e.name),style:{cursor:"pointer"},children:[(0,Pv.jsxs)("h3",{children:[e.name," (",e.minAge,"-",e.maxAge,")"]}),(0,Pv.jsx)("p",{className:"stat-number",children:x.byCategory[e.name]||0})]},e.id))]}),(0,Pv.jsxs)("div",{className:"card filter-card",children:[(0,Pv.jsx)("h3",{children:"Filter by Event"}),(0,Pv.jsxs)("div",{className:"event-filter-grid",children:[(0,Pv.jsx)("button",{onClick:y,className:"event-filter-btn ".concat(l||i?"":"active"),children:"All Events"}),u.map(e=>(0,Pv.jsx)("button",{onClick:()=>{return t=e.id,void c(l===t?null:t);var t},className:"event-filter-btn ".concat(l===e.id?"active":""),children:e.name},e.id))]})]}),(i||l)&&(0,Pv.jsx)("div",{className:"card",children:(0,Pv.jsxs)("div",{className:"active-filters",children:[(0,Pv.jsx)("span",{className:"filter-label",children:"Active Filters:"}),i&&(0,Pv.jsxs)("span",{className:"filter-tag",children:["Category: ",i,(0,Pv.jsx)("button",{onClick:()=>o(null),className:"filter-remove",children:"\xd7"})]}),l&&(0,Pv.jsxs)("span",{className:"filter-tag",children:["Event: ",null===(e=u.find(e=>e.id===l))||void 0===e?void 0:e.name,(0,Pv.jsx)("button",{onClick:()=>c(null),className:"filter-remove",children:"\xd7"})]}),(0,Pv.jsx)("button",{onClick:y,className:"btn btn-secondary btn-small",children:"Clear All Filters"})]})}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("h2",{children:["Registered Participants",i&&(0,Pv.jsxs)("span",{className:"filter-badge",children:["Filtered by: ",i," (",s.length,")"]})]}),0===t.length?(0,Pv.jsx)("p",{className:"no-data",children:"No participants registered yet."}):i||l?0===s.length?(0,Pv.jsx)("p",{className:"no-data",children:"No participants found matching the selected filters."}):(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Chest No."}),(0,Pv.jsx)("th",{children:"Name"}),(0,Pv.jsx)("th",{children:"Age"}),(0,Pv.jsx)("th",{children:"Category"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Gender"}),(0,Pv.jsx)("th",{children:"Events"}),(0,Pv.jsx)("th",{children:"Contact"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsx)("tbody",{children:s.map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.chestNumber?(0,Pv.jsx)("span",{className:"chest-number",children:e.chestNumber}):(0,Pv.jsx)("span",{className:"no-chest-number",children:"-"})}),(0,Pv.jsx)("td",{children:e.name}),(0,Pv.jsx)("td",{children:e.age}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"category-badge",children:e.ageCategory})}),(0,Pv.jsx)("td",{children:e.section||"-"}),(0,Pv.jsx)("td",{children:e.gender}),(0,Pv.jsx)("td",{children:b(e)}),(0,Pv.jsxs)("td",{children:[e.email&&(0,Pv.jsx)("div",{children:e.email}),e.phone&&(0,Pv.jsx)("div",{children:e.phone})]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("div",{className:"action-buttons",children:e.chestNumber?(0,Pv.jsx)("button",{onClick:()=>(e=>{if(!e.chestNumber)return void alert("Please assign a chest number first!");const t=b(e),n=window.open("","_blank"),r="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Chest Number - ".concat(e.chestNumber,'</title>\n        <style>\n          @media print {\n            @page {\n              size: A6 landscape;\n              margin: 0;\n            }\n            body {\n              margin: 0;\n              padding: 0;\n            }\n          }\n          \n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n            background: #f5f5f5;\n          }\n          \n          .chest-card {\n            width: 148mm;\n            height: 105mm;\n            background: white;\n            border: 3px solid #667eea;\n            border-radius: 12px;\n            padding: 20px;\n            box-sizing: border-box;\n            display: flex;\n            flex-direction: column;\n            page-break-after: always;\n          }\n          \n          .header {\n            text-align: center;\n            border-bottom: 2px solid #667eea;\n            padding-bottom: 15px;\n            margin-bottom: 15px;\n          }\n          \n          .header h1 {\n            margin: 0 0 5px 0;\n            color: #2d3748;\n            font-size: 24px;\n          }\n          \n          .header h2 {\n            margin: 0;\n            color: #667eea;\n            font-size: 18px;\n            font-weight: normal;\n          }\n          \n          .chest-number-display {\n            text-align: center;\n            margin: 20px 0;\n          }\n          \n          .chest-number-large {\n            font-size: 72px;\n            font-weight: bold;\n            color: #667eea;\n            line-height: 1;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n          }\n          \n          .participant-details {\n            flex: 1;\n          }\n          \n          .detail-row {\n            display: flex;\n            margin-bottom: 8px;\n            font-size: 14px;\n          }\n          \n          .detail-label {\n            font-weight: bold;\n            color: #4a5568;\n            width: 120px;\n            flex-shrink: 0;\n          }\n          \n          .detail-value {\n            color: #2d3748;\n          }\n          \n          .programs-section {\n            margin-top: 10px;\n            padding-top: 10px;\n            border-top: 1px solid #e2e8f0;\n          }\n          \n          .programs-title {\n            font-weight: bold;\n            color: #667eea;\n            margin-bottom: 8px;\n            font-size: 16px;\n          }\n          \n          .program-list {\n            list-style: none;\n            padding: 0;\n            margin: 0;\n          }\n          \n          .program-item {\n            padding: 6px 12px;\n            background: #f7fafc;\n            border-left: 3px solid #667eea;\n            margin-bottom: 6px;\n            font-size: 13px;\n          }\n          \n          .category-badge {\n            display: inline-block;\n            background: #667eea;\n            color: white;\n            padding: 4px 12px;\n            border-radius: 4px;\n            font-size: 12px;\n            font-weight: bold;\n          }\n          \n          .print-button {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 12px 24px;\n            background: #667eea;\n            color: white;\n            border: none;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 16px;\n            font-weight: bold;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n          }\n          \n          .print-button:hover {\n            background: #5568d3;\n          }\n          \n          @media print {\n            .print-button {\n              display: none;\n            }\n          }\n        </style>\n      </head>\n      <body>\n        <button class="print-button" onclick="window.print()">\ud83d\udda8\ufe0f Print</button>\n        <div class="chest-card">\n          <div class="header">\n            <h1>Christ Soldiers</h1>\n            <h2>Talent Test 2026</h2>\n          </div>\n          \n          <div class="chest-number-display">\n            <div class="chest-number-large">').concat(e.chestNumber,'</div>\n          </div>\n          \n          <div class="participant-details">\n            <div class="detail-row">\n              <span class="detail-label">Name:</span>\n              <span class="detail-value">').concat(e.name,'</span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Age:</span>\n              <span class="detail-value">').concat(e.age,' years</span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Category:</span>\n              <span class="detail-value"><span class="category-badge">').concat(e.ageCategory,'</span></span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Section:</span>\n              <span class="detail-value">').concat(e.section||"-",'</span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Church:</span>\n              <span class="detail-value">').concat(e.churchName||"-",'</span>\n            </div>\n          </div>\n          \n          <div class="programs-section">\n            <div class="programs-title">Registered Programs:</div>\n            <ul class="program-list">\n              ').concat(t.split(", ").map(e=>'<li class="program-item">'.concat(e,"</li>")).join(""),"\n            </ul>\n          </div>\n        </div>\n      </body>\n      </html>\n    ");n.document.write(r),n.document.close()})(e),className:"btn-small btn-info",title:"Print Chest Number",children:"Print"}):(0,Pv.jsx)("span",{className:"no-chest-number",children:"Not Assigned"})})})]},e.id))})]})}):(0,Pv.jsx)("p",{className:"no-data",children:"Please select a category or event to view participants."})]})]})},ey=()=>{var e,t,n,s;const[a,i]=(0,r.useState)("individual"),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[g,v]=(0,r.useState)([]),[y,b]=(0,r.useState)(null),[x,w]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[S,E]=(0,r.useState)(null),[k,C]=(0,r.useState)({score:0,comments:""}),[T,I]=(0,r.useState)({score:0,comments:""}),[_,A]=(0,r.useState)(""),[P,D]=(0,r.useState)(""),[R,L]=(0,r.useState)([]),[O,M]=(0,r.useState)([]),[F,U]=(0,r.useState)([]),[V,z]=(0,r.useState)([]),[B,q]=(0,r.useState)([]),[G,H]=(0,r.useState)([]),{user:W,logout:K}=Rv(),J=Ee();(0,r.useEffect)(()=>{W&&"judge"===W.role?Q():J("/judge/login")},[W,J]);const Q=async()=>{const{events:e,categories:t,participants:n,scores:r,judgeLocks:s,groupEvents:a,groupTeams:i,groupEventLocks:o,declaredResults:c,sections:d}=await Av.getJudgeDashboardData(null===W||void 0===W?void 0:W.talentTestEventId);u(e),m(t),l(n),L(r),M(s),f(a),v(i),U(o),z(c),q(d)},Y=(e,t)=>R.find(n=>n.participantId===e&&n.eventId===t&&n.judgeName===(null===W||void 0===W?void 0:W.username)),X=e=>{const{name:t,value:n}=e.target;C(d(d({},k),{},{[t]:"comments"===t?n:Math.min(10,Math.max(0,parseFloat(n)||0))}))},$=e=>{const t=c.find(t=>t.id===e);return t?t.name:"Unknown"},Z=()=>{b(null),w(null),C({score:0,comments:""})},ee=()=>{N(null),E(null),I({score:0,comments:""})},te=()=>{const e=[];o.forEach(t=>{if(!t.chestNumber)return;(t.eventIds?t.eventIds:t.eventId?[t.eventId]:[]).forEach(n=>{if(_&&_!==n)return;if(P&&t.ageCategory!==P)return;const r=Y(t.id,n);e.push({participantId:t.id,participant:t,eventId:n,eventName:$(n),score:r,totalScore:r?r.totalScore:null})})}),e.sort((e,t)=>null===e.totalScore&&null===t.totalScore?0:null===e.totalScore?1:null===t.totalScore?-1:t.totalScore-e.totalScore);let t=0,n=null,r=0;return e.forEach((e,s)=>{null!==e.totalScore?(null===n||e.totalScore<n?(t=s+1,r=1,n=e.totalScore):r++,e.rank=t):e.rank=null}),e};(0,r.useEffect)(()=>{null!==W&&void 0!==W&&W.username&&o.length>0?(async()=>{const e=te(),t=new Map;for(const n of e){const r="".concat(n.eventId,"-").concat(n.participant.ageCategory);if(!t.has(r)){const s=await Av.isScoreLocked(null===W||void 0===W?void 0:W.username,n.eventId,n.participant.ageCategory),a=e.filter(e=>e.eventId===n.eventId&&e.participant.ageCategory===n.participant.ageCategory).every(e=>null!==e.totalScore);t.set(r,{eventId:n.eventId,eventName:n.eventName,category:n.participant.ageCategory,isLocked:s,allScoresEntered:a})}}H(Array.from(t.values()))})():H([])},[o,_,P,R,W]);const ne=te(),re=(e,t)=>V.some(n=>n.eventId===e&&n.category===t),se=e=>V.some(t=>t.groupEventId===e),ae=e=>F.some(t=>t.judgeName===(null===W||void 0===W?void 0:W.username)&&t.groupEventId===e&&t.locked),ie=e=>{const t=p.find(t=>t.id===e);if(t&&"quiz"===t.scoringType)return F.some(t=>t.groupEventId===e&&t.locked);return["judge1","judge2","judge3"].every(t=>F.some(n=>n.judgeName===t&&n.groupEventId===e&&n.locked))};return(0,Pv.jsxs)("div",{className:"judge-dashboard",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"Judge Dashboard"}),(0,Pv.jsxs)("p",{children:["Welcome, ",null===W||void 0===W?void 0:W.username]}),(null===W||void 0===W?void 0:W.talentTestEventName)&&(0,Pv.jsxs)("p",{className:"event-assignment",children:["\ud83d\udccb Assigned Event: ",(0,Pv.jsx)("strong",{children:W.talentTestEventName})]})]}),(0,Pv.jsx)("button",{onClick:()=>{K(),(0,r.startTransition)(()=>{J("/judge/login")})},className:"btn btn-secondary",children:"Logout"})]}),(0,Pv.jsxs)("div",{className:"view-mode-switcher",children:[(0,Pv.jsx)("button",{className:"mode-btn ".concat("individual"===a?"active":""),onClick:()=>i("individual"),children:"\ud83d\udccb Individual Events"}),(0,Pv.jsx)("button",{className:"mode-btn ".concat("group"===a?"active":""),onClick:()=>i("group"),children:"\ud83d\udc65 Group Events"})]}),"individual"===a&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsx)("h2",{children:"Participant List"}),(0,Pv.jsxs)("div",{className:"filter-section",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"filterEvent",children:"Filter by Event:"}),(0,Pv.jsxs)("select",{id:"filterEvent",value:_,onChange:e=>A(e.target.value),children:[(0,Pv.jsx)("option",{value:"",children:"All Events"}),c.map(e=>(0,Pv.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"filterCategory",children:"Filter by Category:"}),(0,Pv.jsxs)("select",{id:"filterCategory",value:P,onChange:e=>D(e.target.value),children:[(0,Pv.jsx)("option",{value:"",children:"All Categories"}),h.map(e=>(0,Pv.jsxs)("option",{value:e.name,children:[e.name," (",e.minAge,"-",e.maxAge,")"]},e.id))]})]})]}),G.length>0&&(0,Pv.jsxs)("div",{className:"lock-status-section",children:[(0,Pv.jsx)("h3",{children:"Score Lock Status"}),(0,Pv.jsx)("div",{className:"lock-status-grid",children:G.map(e=>(0,Pv.jsxs)("div",{className:"lock-status-item",children:[(0,Pv.jsxs)("div",{className:"lock-info",children:[(0,Pv.jsx)("strong",{children:e.eventName}),(0,Pv.jsx)("span",{className:"category-label",children:e.category})]}),(0,Pv.jsxs)("div",{className:"lock-actions",children:[re(e.eventId,e.category)&&(0,Pv.jsx)("span",{className:"declared-badge",children:"\u2713 Declared"}),(0,Pv.jsx)("button",{onClick:()=>(async(e,t,n)=>{if(await Av.isResultDeclared(e,t))alert("Results have been declared for this event. Lock status cannot be changed.");else if(n){if(window.confirm("Are you sure you want to unlock your scores for ".concat($(e)," - ").concat(t,"? This will allow you to edit scores again."))){await Av.unlockScores(W.username,e,t);const n=await Av.getJudgeLocks();M(n),H(n=>n.map(n=>n.eventId===e&&n.category===t?d(d({},n),{},{isLocked:!1}):n))}}else if(window.confirm("Are you sure you want to lock your scores for ".concat($(e)," - ").concat(t,"? You can unlock them later if needed."))){await Av.lockScores(W.username,e,t);const n=await Av.getJudgeLocks();M(n),H(n=>n.map(n=>n.eventId===e&&n.category===t?d(d({},n),{},{isLocked:!0}):n))}})(e.eventId,e.category,e.isLocked),className:"btn-lock ".concat(e.isLocked?"locked":"unlocked"),disabled:re(e.eventId,e.category)||!e.isLocked&&!e.allScoresEntered,title:re(e.eventId,e.category)?"Cannot change lock status - Results have been declared":e.allScoresEntered||e.isLocked?e.isLocked?"Click to unlock scores":"Click to lock scores":"Please enter scores for all participants before locking",children:e.isLocked?"\ud83d\udd13 Unlock":"\ud83d\udd12 Lock"})]})]},"".concat(e.eventId,"-").concat(e.category)))})]}),0===ne.length?(0,Pv.jsx)("p",{className:"no-data",children:_||P?0===o.length?"No participants found.":"No participants match the selected filters or no chest numbers have been assigned yet.":"Please select an event or category filter to view participants."}):(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Chest No."}),(0,Pv.jsx)("th",{children:"Age"}),(0,Pv.jsx)("th",{children:"Category"}),(0,Pv.jsx)("th",{children:"Event"}),(0,Pv.jsx)("th",{children:"Your Score"}),(0,Pv.jsx)("th",{children:"Action"})]})}),(0,Pv.jsx)("tbody",{children:ne.map((e,t)=>{const n=null!==e.score,r=e.rank&&e.rank<=3,s=r&&_&&P?"rank-".concat(e.rank):"",a=((e,t)=>{const n=G.find(n=>n.eventId===e&&n.category===t);return!!n&&n.isLocked})(e.eventId,e.participant.ageCategory);return(0,Pv.jsxs)("tr",{className:s,children:[(0,Pv.jsx)("td",{children:e.participant.chestNumber?(0,Pv.jsx)("span",{className:"chest-number",children:e.participant.chestNumber}):(0,Pv.jsx)("span",{className:"no-chest-number",children:"-"})}),(0,Pv.jsx)("td",{children:e.participant.age}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"category-badge",children:e.participant.ageCategory})}),(0,Pv.jsxs)("td",{children:[e.eventName,a&&(0,Pv.jsx)("span",{className:"locked-indicator",title:"Scores locked",children:"\ud83d\udd12"})]}),(0,Pv.jsx)("td",{children:n?(0,Pv.jsxs)("div",{className:"score-with-rank",children:[(0,Pv.jsxs)("span",{className:"score-display scored",children:[null!==e.totalScore?e.totalScore.toFixed(2):"0.00","/10"]}),r&&_&&P&&(0,Pv.jsxs)("span",{className:"rank-badge rank-".concat(e.rank),children:[1===e.rank?"\ud83e\udd47":2===e.rank?"\ud83e\udd48":"\ud83e\udd49"," #",e.rank]})]}):(0,Pv.jsx)("span",{className:"score-display not-scored",children:"Not Scored"})}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("button",{onClick:()=>(async(e,t)=>{if(await Av.isResultDeclared(t,e.ageCategory))return void alert("Results have been declared for this event. Scoring is no longer available.");b(e),w(t);const n=Y(e.id,t);C(n?{score:n.score||n.totalScore||0,comments:n.comments||""}:{score:0,comments:""})})(e.participant,e.eventId),className:"btn-small btn-primary",disabled:a||re(e.eventId,e.participant.ageCategory),title:re(e.eventId,e.participant.ageCategory)?"Results have been declared - Scoring is no longer available":a?"Scores are locked for this event/category":n?"Click to update score":"Click to score participant",children:re(e.eventId,e.participant.ageCategory)?"Declared":n?"Update":"Score"})})]},"".concat(e.participantId,"-").concat(e.eventId,"-").concat(t))})})]})})]}),"individual"===a&&y&&x&&(0,Pv.jsx)("div",{className:"modal-overlay",onClick:Z,children:(0,Pv.jsxs)("div",{className:"modal-content scoring-modal",onClick:e=>e.stopPropagation(),children:[(0,Pv.jsx)("button",{className:"modal-close-btn",onClick:Z,children:"\xd7"}),(0,Pv.jsx)("h2",{children:"Score Participant"}),(0,Pv.jsxs)("div",{className:"participant-info",children:[(0,Pv.jsxs)("p",{children:[(0,Pv.jsx)("strong",{children:"Chest Number:"})," ",y.chestNumber||"Not Assigned"]}),(0,Pv.jsxs)("p",{children:[(0,Pv.jsx)("strong",{children:"Age:"})," ",y.age," (",y.ageCategory,")"]}),(0,Pv.jsxs)("p",{children:[(0,Pv.jsx)("strong",{children:"Event:"})," ",$(x)]})]}),(0,Pv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!x)return void alert("Please select an event to score");const t=Y(y.id,x),n={participantId:y.id,eventId:x,judgeName:W.username,score:k.score,totalScore:k.score,comments:k.comments};t?(await Av.updateScore(y.id,x,W.username,n),alert("Score updated successfully!")):(await Av.addScore(n),alert("Score submitted successfully!"));const r=await Av.getScores();L(r),Z()},className:"scoring-form",children:[(0,Pv.jsx)("p",{className:"scoring-instruction",children:"Rate from 0 to 10 points (0.25 increments):"}),(0,Pv.jsxs)("div",{className:"score-group",children:[(0,Pv.jsx)("label",{htmlFor:"score",children:"Score"}),(0,Pv.jsxs)("div",{className:"score-input-container",children:[(0,Pv.jsx)("input",{type:"range",id:"score",name:"score",min:"0",max:"10",step:"0.25",value:k.score,onChange:X,className:"score-slider"}),(0,Pv.jsx)("input",{type:"number",name:"score",min:"0",max:"10",step:"0.25",value:k.score,onChange:X,className:"score-number"})]})]}),(0,Pv.jsxs)("div",{className:"total-score",children:[(0,Pv.jsx)("strong",{children:"Total Score:"}),(0,Pv.jsxs)("span",{className:"score-value",children:[k.score.toFixed(2)," / 10"]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"comments",children:"Comments (Optional)"}),(0,Pv.jsx)("textarea",{id:"comments",name:"comments",value:k.comments,onChange:X,rows:"4",placeholder:"Add any additional comments or feedback..."})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-success",children:"Submit Score"}),(0,Pv.jsx)("button",{type:"button",onClick:Z,className:"btn btn-secondary",children:"Cancel"})]})]})]})}),"group"===a&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsx)("h2",{children:"Group Teams"}),(0,Pv.jsx)("div",{className:"group-events-list",children:p.map(e=>{const t=g.filter(t=>t.groupEventId===e.id),n=t.length>0&&t.every(e=>{var t;return null===(t=e.scores)||void 0===t?void 0:t.some(e=>e.judgeName===(null===W||void 0===W?void 0:W.username))});return(0,Pv.jsxs)("div",{className:"group-event-section",children:[(0,Pv.jsxs)("div",{className:"group-event-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h3",{children:e.name}),(0,Pv.jsx)("p",{className:"event-description",children:e.description})]}),(0,Pv.jsxs)("div",{className:"lock-controls",children:[(0,Pv.jsx)("button",{onClick:()=>(async(e,t)=>{const n=p.find(t=>t.id===e),r=(null===n||void 0===n?void 0:n.name)||"Unknown";if(await Av.isGroupResultDeclared(e))alert("Results have been declared for this event. Lock status cannot be changed.");else if(t){if(window.confirm("Are you sure you want to unlock your scores for ".concat(r,"? This will allow you to edit scores again."))){const t=await Av.getData();t.groupEventLocks||(t.groupEventLocks=[]),t.groupEventLocks=t.groupEventLocks.filter(t=>!(t.judgeName===W.username&&t.groupEventId===e)),await Av.saveData(t);const n=await Av.getData();U(n.groupEventLocks||[])}}else if(window.confirm("Are you sure you want to lock your scores for ".concat(r,"? You can unlock them later if needed."))){const t=await Av.getData();t.groupEventLocks||(t.groupEventLocks=[]),t.groupEventLocks.push({judgeName:W.username,groupEventId:e,locked:!0,lockedDate:(new Date).toISOString()}),await Av.saveData(t);const n=await Av.getData();U(n.groupEventLocks||[])}})(e.id,ae(e.id)),className:"btn-lock ".concat(ae(e.id)?"locked":"unlocked"),disabled:se(e.id)||!ae(e.id)&&!n,title:se(e.id)?"Cannot change lock status - Results have been declared":n||ae(e.id)?ae(e.id)?"Click to unlock scores":"Click to lock scores":"Please score all teams before locking",children:ae(e.id)?"\ud83d\udd13 Unlock":"\ud83d\udd12 Lock"}),se(e.id)&&(0,Pv.jsx)("span",{className:"declared-badge",children:"\u2713 Declared"}),ie(e.id)&&(0,Pv.jsx)("span",{className:"fully-locked-badge",children:"quiz"===e.scoringType?"\u2713 Locked":"\u2713 All Judges Locked"})]})]}),0===t.length?(0,Pv.jsx)("p",{className:"no-teams",children:"No teams registered for this event yet."}):(0,Pv.jsxs)(Pv.Fragment,{children:[ae(e.id)&&(0,Pv.jsx)("div",{className:"locked-notice",children:"\ud83d\udd12 This event is locked. Unlock to edit scores."}),(0,Pv.jsx)("div",{className:"teams-grid",children:t.map(t=>{var n,r;const s=null===(n=t.scores)||void 0===n?void 0:n.find(e=>e.judgeName===(null===W||void 0===W?void 0:W.username)),a=!!s,i=ae(e.id);return(0,Pv.jsxs)("div",{className:"team-card ".concat(i?"locked":""),children:[(0,Pv.jsxs)("div",{className:"team-header",children:[(0,Pv.jsxs)("h4",{children:["Chest No: ",t.chestNumber]}),(0,Pv.jsx)("span",{className:"section-badge",children:null===(r=B.find(e=>e.id===t.sectionId))||void 0===r?void 0:r.name})]}),a?(0,Pv.jsxs)("div",{className:"scored-info",children:[(0,Pv.jsxs)("span",{className:"score-badge",children:["\u2713 Scored: ",s.score]}),s.comments&&(0,Pv.jsx)("p",{className:"score-comments",children:s.comments}),!i&&(0,Pv.jsx)("button",{onClick:()=>{se(e.id)?alert("Results have been declared for this event. Scoring is no longer available."):(N(t),E(e.id),I({score:s.score,comments:s.comments}))},className:"btn btn-small btn-info",style:{marginTop:"10px"},disabled:se(e.id),title:se(e.id)?"Results have been declared - Scoring is no longer available":"Click to update team score",children:"Update Score"})]}):(0,Pv.jsx)("button",{onClick:()=>{se(e.id)?alert("Results have been declared for this event. Scoring is no longer available."):(N(t),E(e.id),I({score:0,comments:""}))},className:"btn btn-primary",disabled:i||se(e.id),title:se(e.id)?"Results have been declared - Scoring is no longer available":i?"You have locked this event":"Click to score this team",children:i?"Locked":se(e.id)?"Declared":"Score Team"})]},t.id)})})]})]},e.id)})})]}),j&&"group"===a&&(0,Pv.jsx)("div",{className:"modal-overlay",onClick:ee,children:(0,Pv.jsxs)("div",{className:"modal-content scoring-modal",onClick:e=>e.stopPropagation(),children:[(0,Pv.jsx)("button",{className:"modal-close-btn",onClick:ee,children:"\xd7"}),(0,Pv.jsxs)("h2",{children:["Score Team: ",j.teamName]}),(0,Pv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=p.find(e=>e.id===S);if("quiz"===t.scoringType&&(T.score<0||T.score>t.questionsCount))return void alert("Score must be between 0 and ".concat(t.questionsCount));const n=g.find(e=>e.id===j.id);if(!n)return void alert("Team not found");const r=n.scores||[],s=r.findIndex(e=>e.judgeName===W.username),a={judgeName:W.username,score:parseFloat(T.score),comments:T.comments,timestamp:(new Date).toISOString()};-1!==s?r[s]=a:r.push(a),await Av.updateGroupTeam(j.id,d(d({},n),{},{scores:r}));const i=await Av.getGroupTeams(),o=null!==W&&void 0!==W&&W.talentTestEventId?i.filter(e=>e.talentTestEventId===W.talentTestEventId):i;v(o),ee(),alert("Score submitted successfully!")},children:[(0,Pv.jsxs)("div",{className:"scoring-info",children:[(0,Pv.jsxs)("p",{children:[(0,Pv.jsx)("strong",{children:"Chest Number:"})," ",j.chestNumber]}),(0,Pv.jsxs)("p",{children:[(0,Pv.jsx)("strong",{children:"Section:"})," ",null===(e=B.find(e=>e.id===j.sectionId))||void 0===e?void 0:e.name]})]}),"quiz"===(null===(t=p.find(e=>e.id===S))||void 0===t?void 0:t.scoringType)?(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsxs)("label",{children:["Correct Answers (out of ",null===(n=p.find(e=>e.id===S))||void 0===n?void 0:n.questionsCount,"):"]}),(0,Pv.jsx)("input",{type:"number",min:"0",max:null===(s=p.find(e=>e.id===S))||void 0===s?void 0:s.questionsCount,value:T.score,onChange:e=>I(t=>d(d({},t),{},{score:e.target.value})),required:!0}),(0,Pv.jsx)("small",{children:"Each correct answer = 1 mark"})]}):(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Overall Score (0-50):"}),(0,Pv.jsx)("input",{type:"number",min:"0",max:"50",step:"0.5",value:T.score,onChange:e=>I(t=>d(d({},t),{},{score:e.target.value})),required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Comments:"}),(0,Pv.jsx)("textarea",{value:T.comments,onChange:e=>I(t=>d(d({},t),{},{comments:e.target.value})),rows:"3"})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-success",children:"Submit Score"}),(0,Pv.jsx)("button",{type:"button",onClick:ee,className:"btn btn-secondary",children:"Cancel"})]})]})]})})]})},ty=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[h,m]=(0,r.useState)({minAge:6,maxAge:25}),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)({name:"",age:"",gender:"",email:"",phone:"",eventIds:[],churchName:"",section:"",talentTestEventId:""}),{user:x,logout:w}=Rv(),j=Ee();(0,r.useEffect)(()=>{x&&"section"===x.role?(b(e=>d(d({},e),{},{section:x.section})),N()):j("/section/login")},[x,j]);const N=async()=>{const{events:e,ageLimits:n,talentTestEvents:r,activeEvent:a,churches:o,participants:c}=await Av.getSectionDashboardData(x.section);s(e),m(n),i(r),l(a),a&&!y.talentTestEventId&&b(e=>d(d({},e),{},{talentTestEventId:a.id})),u(o),t(c)},S=async()=>{if(x&&x.section){const e=await Av.getParticipantsBySection(x.section);t(e)}},E=e=>{const{name:t,value:r,type:s,checked:a}=e.target;if("checkbox"===s&&"eventIds"===t){const e=parseInt(r),t=a?[...y.eventIds,e]:y.eventIds.filter(t=>t!==e);return void b(d(d({},y),{},{eventIds:t}))}const i=d(d({},y),{},{[t]:r});if("gender"===t){const e=y.eventIds.filter(e=>{const t=n.find(t=>t.id===e);return!!t&&("Solo Music (Male)"===t.name?"Male"===r:"Solo Music (Female)"!==t.name||"Female"===r)});i.eventIds=e}b(i)},k=()=>{b({name:"",age:"",gender:"",email:"",phone:"",eventIds:[],churchName:"",section:x.section,talentTestEventId:o?o.id:""}),f(!1),v(null)},C=e=>(e.eventIds?e.eventIds:e.eventId?[parseInt(e.eventId)]:[]).map(e=>{const t=n.find(t=>t.id===e);return t?t.name:"Unknown"}).join(", "),T={total:e.length,junior:e.filter(e=>"Junior"===e.ageCategory).length,intermediate:e.filter(e=>"Intermediate"===e.ageCategory).length,senior:e.filter(e=>"Senior"===e.ageCategory).length,superSenior:e.filter(e=>"Super Senior"===e.ageCategory).length};return(0,Pv.jsxs)("div",{className:"section-dashboard",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsxs)("h1",{children:[null===x||void 0===x?void 0:x.section," Section Dashboard"]}),(0,Pv.jsxs)("p",{children:["Welcome, ",null===x||void 0===x?void 0:x.username]})]}),(0,Pv.jsx)("button",{onClick:()=>{w(),(0,r.startTransition)(()=>{j("/section/login")})},className:"btn btn-secondary",children:"Logout"})]}),(0,Pv.jsxs)("div",{className:"stats-grid",children:[(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("h3",{children:"Total Participants"}),(0,Pv.jsx)("p",{className:"stat-number",children:T.total})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("h3",{children:"Junior (6-10)"}),(0,Pv.jsx)("p",{className:"stat-number",children:T.junior})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("h3",{children:"Intermediate (11-15)"}),(0,Pv.jsx)("p",{className:"stat-number",children:T.intermediate})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("h3",{children:"Senior (16-20)"}),(0,Pv.jsx)("p",{className:"stat-number",children:T.senior})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("h3",{children:"Super Senior (21-25)"}),(0,Pv.jsx)("p",{className:"stat-number",children:T.superSenior})]})]}),(0,Pv.jsx)("div",{className:"dashboard-actions",children:(0,Pv.jsx)("button",{onClick:()=>f(!p),className:"btn btn-primary",children:p?"Cancel":"Add New Participant"})}),p&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsx)("h2",{children:g?"Edit Participant":"Add New Participant"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseInt(y.age),n=await Av.getAgeCategory(t);if(!n){const{minAge:e,maxAge:t}=await Av.getMinMaxAge();return void alert("Age must be between ".concat(e," and ").concat(t," years"))}if(0===y.eventIds.length)return void alert("Please select at least one event");const r=d(d({},y),{},{age:t,ageCategory:n,section:x.section});g?(await Av.updateParticipant(g.id,r),v(null)):await Av.addParticipant(r),k(),S()},className:"participant-form",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"talentTestEventId",children:"Talent Test Event *"}),(0,Pv.jsxs)("select",{id:"talentTestEventId",name:"talentTestEventId",value:y.talentTestEventId,onChange:E,required:!0,children:[(0,Pv.jsx)("option",{value:"",children:"Select Event"}),a.filter(e=>e.registrationOpen).map(e=>(0,Pv.jsxs)("option",{value:e.id,children:[e.name," ",e.id===(null===o||void 0===o?void 0:o.id)&&"(Active)"]},e.id))]}),!o&&0===a.filter(e=>e.registrationOpen).length&&(0,Pv.jsx)("p",{style:{color:"#dc3545",fontSize:"14px",marginTop:"5px"},children:"\u26a0\ufe0f No talent test events with open registration"})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,Pv.jsx)("input",{type:"text",id:"name",name:"name",value:y.name,onChange:E,required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"age",children:"Age *"}),(0,Pv.jsx)("input",{type:"number",id:"age",name:"age",value:y.age,onChange:E,min:h.minAge,max:h.maxAge,required:!0})]})]}),(0,Pv.jsx)("div",{className:"form-row",children:(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"gender",children:"Gender *"}),(0,Pv.jsxs)("select",{id:"gender",name:"gender",value:y.gender,onChange:E,required:!0,children:[(0,Pv.jsx)("option",{value:"",children:"Select Gender"}),(0,Pv.jsx)("option",{value:"Male",children:"Male"}),(0,Pv.jsx)("option",{value:"Female",children:"Female"})]})]})}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Events * (Select one or more)"}),(0,Pv.jsx)("div",{className:"checkbox-group",children:n.map(e=>{const t="Solo Music (Male)"===e.name&&"Male"!==y.gender||"Solo Music (Female)"===e.name&&"Female"!==y.gender;return(0,Pv.jsxs)("label",{className:"checkbox-label ".concat(t?"disabled":""),title:t?"Select appropriate gender first":"",children:[(0,Pv.jsx)("input",{type:"checkbox",name:"eventIds",value:e.id,checked:y.eventIds.includes(e.id),onChange:E,disabled:t}),e.name]},e.id)})})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Pv.jsx)("input",{type:"email",id:"email",name:"email",value:y.email,onChange:E})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"phone",children:"Phone"}),(0,Pv.jsx)("input",{type:"tel",id:"phone",name:"phone",value:y.phone,onChange:E})]})]}),(0,Pv.jsx)("div",{className:"form-row",children:(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"churchName",children:"Church Name *"}),(0,Pv.jsxs)("select",{id:"churchName",name:"churchName",value:y.churchName,onChange:E,required:!0,children:[(0,Pv.jsx)("option",{value:"",children:"Select Church"}),c.map((e,t)=>{const n="string"===typeof e?e:e.name;return(0,Pv.jsx)("option",{value:n,children:n},t)})]})]})}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-primary",children:g?"Update Participant":"Add Participant"}),(0,Pv.jsx)("button",{type:"button",onClick:k,className:"btn btn-secondary",children:"Cancel"})]})]})]}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("h2",{children:["Registered Participants from ",null===x||void 0===x?void 0:x.section]}),0===e.length?(0,Pv.jsx)("p",{className:"no-data",children:"No participants registered yet."}):(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Chest No."}),(0,Pv.jsx)("th",{children:"Name"}),(0,Pv.jsx)("th",{children:"Age"}),(0,Pv.jsx)("th",{children:"Category"}),(0,Pv.jsx)("th",{children:"Church"}),(0,Pv.jsx)("th",{children:"Gender"}),(0,Pv.jsx)("th",{children:"Events"}),(0,Pv.jsx)("th",{children:"Contact"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsx)("tbody",{children:e.map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.chestNumber?(0,Pv.jsx)("span",{className:"chest-number",children:e.chestNumber}):(0,Pv.jsx)("span",{className:"no-chest-number",children:"-"})}),(0,Pv.jsx)("td",{children:e.name}),(0,Pv.jsx)("td",{children:e.age}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"category-badge",children:e.ageCategory})}),(0,Pv.jsx)("td",{children:e.churchName}),(0,Pv.jsx)("td",{children:e.gender}),(0,Pv.jsx)("td",{children:C(e)}),(0,Pv.jsxs)("td",{children:[e.email&&(0,Pv.jsx)("div",{children:e.email}),e.phone&&(0,Pv.jsx)("div",{children:e.phone})]}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"action-buttons",children:[e.chestNumber&&(0,Pv.jsx)("button",{onClick:()=>(e=>{if(!e.chestNumber)return void alert("Please contact admin to assign a chest number first!");const t=C(e),n=window.open("","_blank"),r="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Chest Number - ".concat(e.chestNumber,'</title>\n        <style>\n          @media print {\n            @page {\n              size: A6 landscape;\n              margin: 0;\n            }\n            body {\n              margin: 0;\n              padding: 0;\n            }\n          }\n          \n          body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 20px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n            background: #f5f5f5;\n          }\n          \n          .chest-card {\n            width: 148mm;\n            height: 105mm;\n            background: white;\n            border: 3px solid #667eea;\n            border-radius: 12px;\n            padding: 20px;\n            box-sizing: border-box;\n            display: flex;\n            flex-direction: column;\n            page-break-after: always;\n          }\n          \n          .header {\n            text-align: center;\n            border-bottom: 2px solid #667eea;\n            padding-bottom: 15px;\n            margin-bottom: 15px;\n          }\n          \n          .header h1 {\n            margin: 0 0 5px 0;\n            color: #2d3748;\n            font-size: 24px;\n          }\n          \n          .header h2 {\n            margin: 0;\n            color: #667eea;\n            font-size: 18px;\n            font-weight: normal;\n          }\n          \n          .chest-number-display {\n            text-align: center;\n            margin: 20px 0;\n          }\n          \n          .chest-number-large {\n            font-size: 72px;\n            font-weight: bold;\n            color: #667eea;\n            line-height: 1;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n          }\n          \n          .participant-details {\n            flex: 1;\n          }\n          \n          .detail-row {\n            display: flex;\n            margin-bottom: 8px;\n            font-size: 14px;\n          }\n          \n          .detail-label {\n            font-weight: bold;\n            color: #4a5568;\n            width: 120px;\n            flex-shrink: 0;\n          }\n          \n          .detail-value {\n            color: #2d3748;\n          }\n          \n          .programs-section {\n            margin-top: 10px;\n            padding-top: 10px;\n            border-top: 1px solid #e2e8f0;\n          }\n          \n          .programs-title {\n            font-weight: bold;\n            color: #667eea;\n            margin-bottom: 8px;\n            font-size: 16px;\n          }\n          \n          .program-list {\n            list-style: none;\n            padding: 0;\n            margin: 0;\n          }\n          \n          .program-item {\n            padding: 6px 12px;\n            background: #f7fafc;\n            border-left: 3px solid #667eea;\n            margin-bottom: 6px;\n            font-size: 13px;\n          }\n          \n          .category-badge {\n            display: inline-block;\n            background: #667eea;\n            color: white;\n            padding: 4px 12px;\n            border-radius: 4px;\n            font-size: 12px;\n            font-weight: bold;\n          }\n          \n          .print-button {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 12px 24px;\n            background: #667eea;\n            color: white;\n            border: none;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 16px;\n            font-weight: bold;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n          }\n          \n          .print-button:hover {\n            background: #5568d3;\n          }\n          \n          @media print {\n            .print-button {\n              display: none;\n            }\n          }\n        </style>\n      </head>\n      <body>\n        <button class="print-button" onclick="window.print()">\ud83d\udda8\ufe0f Print</button>\n        <div class="chest-card">\n          <div class="header">\n            <h1>Christ Soldiers</h1>\n            <h2>Talent Test 2026</h2>\n          </div>\n          \n          <div class="chest-number-display">\n            <div class="chest-number-large">').concat(e.chestNumber,'</div>\n          </div>\n          \n          <div class="participant-details">\n            <div class="detail-row">\n              <span class="detail-label">Name:</span>\n              <span class="detail-value">').concat(e.name,'</span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Age:</span>\n              <span class="detail-value">').concat(e.age,' years</span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Category:</span>\n              <span class="detail-value"><span class="category-badge">').concat(e.ageCategory,'</span></span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Section:</span>\n              <span class="detail-value">').concat(e.section||"-",'</span>\n            </div>\n            <div class="detail-row">\n              <span class="detail-label">Church:</span>\n              <span class="detail-value">').concat(e.churchName||"-",'</span>\n            </div>\n          </div>\n          \n          <div class="programs-section">\n            <div class="programs-title">Registered Programs:</div>\n            <ul class="program-list">\n              ').concat(t.split(", ").map(e=>'<li class="program-item">'.concat(e,"</li>")).join(""),"\n            </ul>\n          </div>\n        </div>\n      </body>\n      </html>\n    ");n.document.write(r),n.document.close()})(e),className:"btn-small btn-info",title:"Print Chest Number",children:"Print"}),(0,Pv.jsx)("button",{onClick:()=>(e=>{v(e);const t=e.eventIds?e.eventIds:e.eventId?[parseInt(e.eventId)]:[];b({name:e.name,age:e.age.toString(),gender:e.gender,email:e.email,phone:e.phone,eventIds:t,churchName:e.churchName,section:x.section,talentTestEventId:e.talentTestEventId||(o?o.id:"")}),f(!0)})(e),className:"btn-small btn-primary",children:"Edit"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{window.confirm("Are you sure you want to delete this participant?")&&(await Av.deleteParticipant(e),S())})(e.id),className:"btn-small btn-danger",children:"Delete"})]})})]},e.id))})]})})]})]})},ny=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)([]),[h,m]=(0,r.useState)({individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}),[p,f]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)([]),[x,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[S,E]=(0,r.useState)([]),[k,C]=(0,r.useState)([]),[T,I]=(0,r.useState)(!0),[_,A]=(0,r.useState)([]),{user:P,logout:D}=Rv(),R=Ee(),L=null===(e=je().state)||void 0===e?void 0:e.eventId;(0,r.useEffect)(()=>{P&&"admin"===P.role?O():R("/admin/login")},[P,R]);const O=async()=>{const{events:e,categories:t,participants:r,sections:s,judges:i,scores:l,declaredResults:u,pointsConfig:h}=await Av.getResultsViewData();a(e),o(t),n(r),d(s),A(i),c(l),b(u),m(h)};(0,r.useEffect)(()=>{(async()=>{if(!p||!g)return w(!1),N(!1),void E([]);const e=p,t=await Av.isResultDeclared(e,g);w(t);const n=await Av.areAllJudgesLocked(e,g);N(n);const r=await Av.getJudges(),s=await Av.getJudgeLocks();console.log("Debug - Selected Event ID:",e),console.log("Debug - Selected Category:",g),console.log("Debug - All Judges:",r),console.log("Debug - All Judge Locks:",s);const a=r.map(t=>{const n=s.find(n=>(console.log("Checking judge ".concat(t.username,": lock.eventId=").concat(n.eventId,", eventId=").concat(e,", lock.category=").concat(n.category,", selectedCategory=").concat(g)),n.judgeName===t.username&&String(n.eventId)===String(e)&&n.category===g));return console.log("Judge ".concat(t.username," lock found:"),n),{judgeName:t.username,isLocked:!!n&&n.locked}});console.log("Debug - Lock Status List:",a),E(a)})()},[p,g,y]);return(0,r.useEffect)(()=>{(()=>{const e=(()=>{if(!p||!g)return[];const e=p,n=t.filter(t=>(t.eventIds||(t.eventId?[t.eventId]:[])).includes(e)&&t.ageCategory===g);if(I(n.length>0),!j)return[];const r=n.map(t=>{const n=l.filter(n=>n.participantId===t.id&&String(n.eventId)===String(e)).map(e=>({judgeName:e.judgeName,totalScore:e.totalScore,criteria1:e.criteria1,criteria2:e.criteria2,criteria3:e.criteria3,criteria4:e.criteria4,criteria5:e.criteria5,comments:e.comments})),r=n.reduce((e,t)=>e+t.totalScore,0),s=n.length>0?r/n.length:0;return{participant:t,judgeScores:n,totalScore:r,averageScore:s}});return r.sort((e,t)=>t.averageScore-e.averageScore),r.forEach((e,t)=>{e.rank=t+1,1===e.rank?e.points=h.individual.first:2===e.rank?e.points=h.individual.second:3===e.rank?e.points=h.individual.third:e.points=0}),r})();C(e)})()},[p,g,j]),(0,r.useEffect)(()=>{var e;k&&k.length>0&&(console.log("Results:",k),console.log("Judges:",_),console.log("Sample result judgeScores:",null===(e=k[0])||void 0===e?void 0:e.judgeScores))},[k,_]),(0,Pv.jsxs)("div",{className:"results-view",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"Results View"}),(0,Pv.jsxs)("p",{children:["Admin: ",null===P||void 0===P?void 0:P.username]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{R(L?"/admin/event/".concat(L):"/admin/events")},className:"btn btn-secondary",children:L?"\u2190 Back to Event":"\u2190 Back to Events"}),(0,Pv.jsx)("button",{onClick:()=>{D(),(0,r.startTransition)(()=>{R("/admin/login")})},className:"btn btn-secondary",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"results-view-header",children:[(0,Pv.jsx)("h2",{children:"View Competition Results"}),(0,Pv.jsxs)("div",{className:"bulk-actions",children:[(0,Pv.jsx)("button",{onClick:async()=>{if(!window.confirm("Declare all locked results? This will publish all events and categories where all judges have locked their scores."))return;const e=await Av.declareAllResults(),t=await Av.getDeclaredResults();b(t),alert(e.message)},className:"btn btn-success",title:"Declare all locked results at once",children:"\ud83d\udce2 Declare All Results"}),(0,Pv.jsx)("button",{onClick:async()=>{if(!window.confirm("Revert ALL declared results? This will unpublish all individual event results. This action cannot be undone."))return;const e=await Av.revertAllDeclarations(),t=await Av.getDeclaredResults();b(t),alert(e.message)},className:"btn btn-warning",title:"Revert all declared results at once",children:"\u21a9\ufe0f Revert All Declarations"})]})]}),(0,Pv.jsxs)("div",{className:"filter-section",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"selectedEvent",children:"Select Event:"}),(0,Pv.jsxs)("select",{id:"selectedEvent",value:p,onChange:e=>f(e.target.value),children:[(0,Pv.jsx)("option",{value:"",children:"-- Choose Event --"}),s.map(e=>(0,Pv.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"selectedCategory",children:"Select Category:"}),(0,Pv.jsxs)("select",{id:"selectedCategory",value:g,onChange:e=>v(e.target.value),children:[(0,Pv.jsx)("option",{value:"",children:"-- Choose Category --"}),i.map(e=>(0,Pv.jsxs)("option",{value:e.name,children:[e.name," (",e.minAge,"-",e.maxAge,")"]},e.id))]})]})]}),p&&g&&!T&&(0,Pv.jsx)("div",{className:"warning-message",children:(0,Pv.jsx)("p",{children:"\u26a0\ufe0f No participants found for this event and category combination."})}),p&&g&&T&&(0,Pv.jsxs)("div",{className:"judge-lock-status-section",children:[(0,Pv.jsx)("h3",{children:"Judge Lock Status"}),S.length>0?(0,Pv.jsxs)(Pv.Fragment,{children:[(0,Pv.jsx)("div",{className:"judge-locks-grid",children:S.map((e,t)=>(0,Pv.jsxs)("div",{className:"judge-lock-item ".concat(e.isLocked?"locked":"unlocked"),children:[(0,Pv.jsx)("div",{className:"judge-lock-icon",children:e.isLocked?"\ud83d\udd12":"\ud83d\udd13"}),(0,Pv.jsxs)("div",{className:"judge-lock-info",children:[(0,Pv.jsx)("span",{className:"judge-name",children:e.judgeName}),(0,Pv.jsx)("span",{className:"lock-status ".concat(e.isLocked?"locked":"unlocked"),children:e.isLocked?"Locked":"Not Locked"})]})]},t))}),j&&(0,Pv.jsx)("div",{className:"all-locked-badge",children:"\u2705 All judges have locked their scores"})]}):(0,Pv.jsx)("p",{className:"no-data",children:"Loading judge status..."})]}),p&&g&&T&&!j&&(0,Pv.jsxs)("div",{className:"warning-message",children:[(0,Pv.jsx)("p",{children:"\u26a0\ufe0f Results are not available yet. Not all judges have locked their scores for this event and category."}),(0,Pv.jsx)("p",{children:"Please ensure all judges complete and lock their scoring before viewing results."})]}),p&&g&&T&&j&&(0,Pv.jsxs)("div",{className:"results-container",children:["`",(0,Pv.jsxs)("div",{className:"results-header",children:[(0,Pv.jsxs)("h3",{children:["Results: ",(e=>{const t=s.find(t=>t.id===e);return t?t.name:"Unknown"})(p)," - ",g]}),(0,Pv.jsx)("div",{className:"declaration-controls",children:x?(0,Pv.jsxs)("div",{className:"declaration-status",children:[(0,Pv.jsx)("span",{className:"status-badge declared",children:"\u2713 Result Declared"}),(0,Pv.jsx)("button",{onClick:async()=>{if(!p||!g)return;const e=await Av.revertDeclaration(p,g);if(e.success){const t=await Av.getDeclaredResults();b(t),alert(e.message)}else alert(e.message)},className:"btn btn-warning",children:"Revert Declaration"})]}):(0,Pv.jsxs)("div",{className:"declaration-status",children:[(0,Pv.jsx)("span",{className:"status-badge not-declared",children:"\u26a0 Not Declared"}),(0,Pv.jsx)("button",{onClick:async()=>{if(!p||!g)return;const e=await Av.declareResult(p,g);if(e.success){const t=await Av.getDeclaredResults();b(t),alert(e.message)}else alert(e.message)},className:"btn btn-success",children:"Declare Result"})]})})]}),(0,Pv.jsx)("div",{className:"podium",children:k.slice(0,3).map((e,t)=>(0,Pv.jsxs)("div",{className:"podium-place place-".concat(t+1),children:[(0,Pv.jsx)("div",{className:"podium-medal",children:0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":"\ud83e\udd49"}),(0,Pv.jsxs)("div",{className:"podium-rank",children:["#",t+1]}),(0,Pv.jsx)("div",{className:"podium-chest",children:e.participant.chestNumber||"N/A"}),(0,Pv.jsx)("div",{className:"podium-name",children:e.participant.name}),(0,Pv.jsx)("div",{className:"podium-score",children:e.averageScore.toFixed(2)}),(0,Pv.jsxs)("div",{className:"podium-points",children:[e.points," pts"]})]},e.participant.id))}),(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table results-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Rank"}),(0,Pv.jsx)("th",{children:"Chest No."}),(0,Pv.jsx)("th",{children:"Name"}),(0,Pv.jsx)("th",{children:"Church"}),(0,Pv.jsx)("th",{children:"Age"}),_&&_.map(e=>(0,Pv.jsx)("th",{children:e.username},e.id)),(0,Pv.jsx)("th",{children:"Total"}),(0,Pv.jsx)("th",{children:"Average"}),(0,Pv.jsx)("th",{children:"Points"})]})}),(0,Pv.jsx)("tbody",{children:k&&k.map(e=>{var t;const n=e.rank<=3;return(0,Pv.jsxs)("tr",{className:n?"rank-".concat(e.rank):"",children:[(0,Pv.jsxs)("td",{children:[(0,Pv.jsxs)("strong",{children:["#",e.rank]}),n&&(0,Pv.jsx)("span",{className:"medal-small",children:1===e.rank?"\ud83e\udd47":2===e.rank?"\ud83e\udd48":"\ud83e\udd49"})]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"chest-number",children:e.participant.chestNumber||"N/A"})}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.participant.name})}),(0,Pv.jsxs)("td",{children:[e.participant.churchName||"N/A",e.participant.section&&" (".concat(e.participant.section,")")]}),(0,Pv.jsx)("td",{children:e.participant.age}),_&&_.map(t=>{var n;const r=null===(n=e.judgeScores)||void 0===n?void 0:n.find(e=>e.judgeName===t.username);return(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:r?r.totalScore:"-"})},t.id)}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.totalScore||0})}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{className:"average-score",children:(null===(t=e.averageScore)||void 0===t?void 0:t.toFixed(2))||"0.00"})}),(0,Pv.jsx)("td",{children:e.points>0?(0,Pv.jsxs)("strong",{className:"points-badge",children:[e.points," pts"]}):(0,Pv.jsx)("span",{className:"no-points",children:"-"})})]},e.participant.id)})})]})})]})]})]})},ry=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[f,g]=(0,r.useState)({individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}),[v,y]=(0,r.useState)([]),[b,x]=(0,r.useState)([]),[w,j]=(0,r.useState)([]),[N,S]=(0,r.useState)(!1),{user:E,logout:k}=Rv(),C=Ee(),T=null===(e=je().state)||void 0===e?void 0:e.eventId;(0,r.useEffect)(()=>{E&&"admin"===E.role?I():C("/admin/login")},[E,C]);const I=async()=>{const{events:e,sections:t,participants:r,scores:s,groupTeams:i,groupEvents:l,championsDeclared:u,pointsConfig:d}=await Av.getLeaderboardData();a(e),o(t),n(r),c(s),h(i),p(l),S(u),g(d)};(0,r.useEffect)(()=>{t.length>0&&l.length>0&&m.length>0&&_()},[t,l,u,m]);const _=async()=>{const[e,n,r,a]=await Promise.all([Av.getDeclaredResults(),Av.getData(),Av.getJudges(),Av.getJudgeLocks()]),o=n.groupEventLocks||[],c=n.events||s,h={},p=(e,t)=>{const n="".concat(e,"_").concat(t);if(void 0!==h[n])return h[n];const r=a.filter(n=>n.eventId===e&&n.category===t),s=r.length>0&&r.every(e=>e.locked);return h[n]=s,s},g={};for(const s of t){const n=s.eventIds||(s.eventId?[parseInt(s.eventId)]:[]);for(const r of n){const n=s.ageCategory;if(!e.some(e=>e.eventId===r&&e.category===n))continue;if(!p(r,n))continue;const a=t.filter(e=>(e.eventIds||(e.eventId?[parseInt(e.eventId)]:[])).includes(r)&&e.ageCategory===n),i=a.map(e=>{const t=l.filter(t=>t.participantId===e.id&&t.eventId===r).map(e=>e.totalScore),n=t.reduce((e,t)=>e+t,0),s=t.length>0?n/t.length:0;return{participantId:e.id,averageScore:s}});i.sort((e,t)=>t.averageScore-e.averageScore),i.forEach((e,t)=>{if(e.participantId===s.id){const e=t+1;let n=0;1===e?n=f.individual.first:2===e?n=f.individual.second:3===e&&(n=f.individual.third),g[s.id]||(g[s.id]={participant:s,totalPoints:0,eventResults:[]}),g[s.id].totalPoints+=n;const a=c.find(e=>e.id===r);a&&e<=3&&g[s.id].eventResults.push({eventName:a.name,rank:e,position:1===e?"1st":2===e?"2nd":"3rd"})}})}}const v={};i.forEach(e=>{v[e.name]={section:e.name,totalPoints:0,participantCount:0,groupPoints:0}}),Object.values(g).forEach(e=>{let{participant:t,totalPoints:n}=e;t.section&&v[t.section]&&(v[t.section].totalPoints+=n,v[t.section].participantCount+=1)}),m.forEach(t=>{if(!e.some(e=>String(e.groupEventId)===String(t.id)))return;let n=!1;if(n="quiz"===t.scoringType?o.some(e=>String(e.groupEventId)===String(t.id)&&e.locked):r.length>0&&r.every(e=>o.some(n=>n.judgeName===e.username&&String(n.groupEventId)===String(t.id)&&n.locked)),!n)return;const s=u.filter(e=>String(e.groupEventId)===String(t.id));console.log("Group Event: ".concat(t.name," (ID: ").concat(t.id,")")),console.log("Teams found: ".concat(s.length)),console.log("Teams data:",s);const a=s.map(e=>{const n=e.scores||[];let r=0,s=0;if("quiz"===t.scoringType){const e=n.find(e=>void 0!==e.score&&null!==e.score);r=e?parseFloat(e.score):0,s=e?1:0}else n.forEach(e=>{void 0!==e.score&&null!==e.score&&(r+=parseFloat(e.score),s++)});const a=s>0?"quiz"===t.scoringType?r:r/s:0;return console.log("Team ".concat(e.teamName," (Section: ").concat(e.sectionId,"): scores=").concat(JSON.stringify(n),", total=").concat(r,", judges=").concat(s,", avg=").concat(a)),{teamId:e.id,sectionId:e.sectionId,teamName:e.teamName,averageScore:a}});a.sort((e,t)=>t.averageScore-e.averageScore),console.log("Sorted results:",a),a.forEach((e,t)=>{const n=t+1;let r=0;1===n?r=f.group.first:2===n?r=f.group.second:3===n&&(r=f.group.third),console.log("Rank ".concat(n," - Team ").concat(e.teamName,": ").concat(r," points"));const s=i.find(t=>t.id===e.sectionId);s&&v[s.name]?(console.log("Adding ".concat(r," points to section ").concat(s.name)),v[s.name].groupPoints+=r,v[s.name].totalPoints+=r):console.log("Section not found for team ".concat(e.teamName,", sectionId: ").concat(e.sectionId))})});const b=Object.values(v).filter(e=>e.participantCount>0||e.groupPoints>0).sort((e,t)=>t.totalPoints-e.totalPoints).map((e,t)=>d(d({},e),{},{rank:t+1}));y(b);const w={};Object.values(g).forEach(e=>{let{participant:t,totalPoints:n}=e;t.churchName&&(w[t.churchName]||(w[t.churchName]={church:t.churchName,section:t.section,totalPoints:0,participantCount:0}),w[t.churchName].totalPoints+=n,w[t.churchName].participantCount+=1)});const N=Object.values(w).sort((e,t)=>t.totalPoints-e.totalPoints).map((e,t)=>d(d({},e),{},{rank:t+1}));x(N);const S=Object.values(g).sort((e,t)=>t.totalPoints-e.totalPoints).map((e,t)=>d(d({},e),{},{rank:t+1}));j(S)};return(0,Pv.jsxs)("div",{className:"leaderboard-view",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"\ud83c\udfc6 Leaderboard"}),(0,Pv.jsxs)("p",{children:["Admin: ",null===E||void 0===E?void 0:E.username]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{C(T?"/admin/event/".concat(T):"/admin/events")},className:"btn btn-secondary",children:T?"\u2190 Back to Event":"\u2190 Back to Events"}),(0,Pv.jsx)("button",{onClick:()=>{k(),(0,r.startTransition)(()=>{C("/admin/login")})},className:"btn btn-secondary",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"leaderboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h2",{children:"\ud83d\udccd Section Leaderboard"}),(0,Pv.jsx)("p",{className:"leaderboard-description",children:"Rankings based on total points earned by all participants from each section"})]}),v.length>=3&&(0,Pv.jsx)("div",{className:"champions-controls",children:N?(0,Pv.jsxs)(Pv.Fragment,{children:[(0,Pv.jsx)("span",{className:"champions-badge declared",children:"\u2713 Champions Declared"}),(0,Pv.jsx)("button",{onClick:async()=>{window.confirm("Revert Champions Declaration?\n\nThis will unpublish the final champions. Are you sure?")&&(await Av.revertChampions(),S(!1),alert("Champions declaration reverted."))},className:"btn btn-warning",children:"Revert Declaration"})]}):(0,Pv.jsxs)(Pv.Fragment,{children:[(0,Pv.jsx)("span",{className:"champions-badge not-declared",children:"\u26a0 Not Declared"}),(0,Pv.jsx)("button",{onClick:async()=>{if(v.length<3)return void alert("Not enough sections to declare champions. Need at least 3 sections with points.");const e=v.slice(0,3),t="Declare Final Champions?\n\n\ud83e\udd47 Champion: ".concat(e[0].section," (").concat(e[0].totalPoints," pts)\n\ud83e\udd48 Runner-up: ").concat(e[1].section," (").concat(e[1].totalPoints," pts)\n\ud83e\udd49 Second Runner-up: ").concat(e[2].section," (").concat(e[2].totalPoints," pts)\n\nThis will finalize the competition results.");if(window.confirm(t)){const t=await Av.getData();t.championsDeclared=!0,t.finalChampions={champion:e[0],runnerUp:e[1],secondRunnerUp:e[2],declaredAt:(new Date).toISOString(),declaredBy:(null===E||void 0===E?void 0:E.username)||"admin"},await Av.saveData(t),S(!0),alert("Champions declared successfully! \ud83c\udf89")}},className:"btn btn-success",children:"\ud83c\udfc6 Declare Final Champions"})]})})]}),0===v.length?(0,Pv.jsx)("p",{className:"no-data",children:"No data available yet. Results will appear once judges complete scoring and lock their scores."}):(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table leaderboard-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Rank"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Individual Points"}),(0,Pv.jsx)("th",{children:"Group Points"}),(0,Pv.jsx)("th",{children:"Total Points"}),(0,Pv.jsx)("th",{children:"Participants"})]})}),(0,Pv.jsx)("tbody",{children:v.map(e=>(0,Pv.jsxs)("tr",{className:e.rank<=3?"rank-".concat(e.rank):"",children:[(0,Pv.jsxs)("td",{children:[(0,Pv.jsxs)("strong",{className:"rank-number",children:["#",e.rank]}),1===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd47"}),2===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd48"}),3===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd49"})]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{className:"section-name",children:e.section})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("span",{className:"points-badge-sm",children:[e.totalPoints-e.groupPoints," pts"]})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("span",{className:"points-badge-sm group-points",children:[e.groupPoints||0," pts"]})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("span",{className:"points-badge-lg",children:[e.totalPoints," pts"]})}),(0,Pv.jsx)("td",{children:e.participantCount})]},e.section))})]})})]}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsx)("h2",{children:"\u26ea Local Church Leaderboard"}),(0,Pv.jsx)("p",{className:"leaderboard-description",children:"Rankings based on total points earned by all participants from each local church"}),0===b.length?(0,Pv.jsx)("p",{className:"no-data",children:"No data available yet. Results will appear once judges complete scoring and lock their scores."}):(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table leaderboard-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Rank"}),(0,Pv.jsx)("th",{children:"Church Name"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Total Points"}),(0,Pv.jsx)("th",{children:"Participants"})]})}),(0,Pv.jsx)("tbody",{children:b.map(e=>(0,Pv.jsxs)("tr",{className:e.rank<=3?"rank-".concat(e.rank):"",children:[(0,Pv.jsxs)("td",{children:[(0,Pv.jsxs)("strong",{className:"rank-number",children:["#",e.rank]}),1===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd47"}),2===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd48"}),3===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd49"})]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{className:"church-name",children:e.church})}),(0,Pv.jsx)("td",{children:e.section}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("span",{className:"points-badge-lg",children:[e.totalPoints," pts"]})}),(0,Pv.jsx)("td",{children:e.participantCount})]},e.church))})]})})]}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsx)("h2",{children:"\ud83d\udc51 Individual Champion Leaderboard (Top 10)"}),(0,Pv.jsx)("p",{className:"leaderboard-description",children:"Top performers ranked by total points earned across all events"}),0===w.length?(0,Pv.jsx)("p",{className:"no-data",children:"No data available yet. Results will appear once judges complete scoring and lock their scores."}):(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table leaderboard-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Rank"}),(0,Pv.jsx)("th",{children:"Chest No."}),(0,Pv.jsx)("th",{children:"Name & Achievements"}),(0,Pv.jsx)("th",{children:"Age"}),(0,Pv.jsx)("th",{children:"Category"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Church"}),(0,Pv.jsx)("th",{children:"Total Points"})]})}),(0,Pv.jsx)("tbody",{children:w.slice(0,10).map(e=>(0,Pv.jsxs)("tr",{className:e.rank<=3?"rank-".concat(e.rank):"",children:[(0,Pv.jsxs)("td",{children:[(0,Pv.jsxs)("strong",{className:"rank-number",children:["#",e.rank]}),1===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd47"}),2===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd48"}),3===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd49"})]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"chest-number",children:e.participant.chestNumber||"N/A"})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"participant-info",children:[(0,Pv.jsx)("strong",{className:"participant-name",children:e.participant.name}),e.eventResults&&e.eventResults.length>0&&(0,Pv.jsx)("div",{className:"event-achievements",children:e.eventResults.map((e,t)=>(0,Pv.jsxs)("span",{className:"achievement-badge",children:[e.eventName," - ",e.position]},t))})]})}),(0,Pv.jsx)("td",{children:e.participant.age}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"category-badge",children:e.participant.ageCategory})}),(0,Pv.jsx)("td",{children:e.participant.section}),(0,Pv.jsx)("td",{className:"church-cell",children:e.participant.churchName}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("span",{className:"points-badge-lg",children:[e.totalPoints," pts"]})})]},e.participant.id))})]})})]})]})},sy=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[h,m]=(0,r.useState)({individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}),[p,f]=(0,r.useState)("events"),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[x,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[S,E]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null),[T,I]=(0,r.useState)(null),[_,A]=(0,r.useState)(null),[P,D]=(0,r.useState)(null),[R,L]=(0,r.useState)(null),[O,M]=(0,r.useState)({name:"",description:"",ageGroups:[],scoringType:"all-judges"}),[F,U]=(0,r.useState)({name:"",description:"",maxParticipants:10,scoringType:"judge",questionsCount:0}),[V,z]=(0,r.useState)({name:"",churches:[""],username:"",password:"",presbyter:{name:"",contact:""},csPresident:{name:"",contact:""},csSecretary:{name:"",contact:""},csTreasurer:{name:"",contact:""}}),[B,q]=(0,r.useState)({username:"",password:"",name:"",contact:"",email:""}),[G,H]=(0,r.useState)({name:"",minAge:0,maxAge:0,order:1}),{user:W,logout:K}=Rv(),J=Ee();(0,r.useEffect)(()=>{W&&"admin"===W.role?Q():J("/admin/login")},[W,J]);const Q=async()=>{const[e,n,r,a,o,c]=await Promise.all([Av.getEvents(),Av.getSections(),Av.getGroupEvents(),Av.getJudgeCredentials(),Av.getPointsConfig(),Av.getCategories()]);t(e),i(n),s(r),l(a),m(o),u(c.sort((e,t)=>e.order-t.order))},Y=e=>{const{name:t,value:n,type:r,checked:s}=e.target;M("checkbox"===r?e=>d(d({},e),{},{ageGroups:s?[...e.ageGroups,n]:e.ageGroups.filter(e=>e!==n)}):e=>d(d({},e),{},{[t]:n}))},X=e=>{const{name:t,value:n}=e.target;U(e=>d(d({},e),{},{[t]:"maxParticipants"===t||"questionsCount"===t?parseInt(n)||0:n}))},$=e=>{const{name:t,value:n}=e.target;if(t.includes(".")){const[e,r]=t.split(".");z(t=>d(d({},t),{},{[e]:d(d({},t[e]),{},{[r]:n})}))}else z(e=>d(d({},e),{},{[t]:n}))},Z=(e,t,n)=>{const r=[...V.churches];if("string"===typeof r[e]&&(r[e]={name:r[e],pastor:{name:"",contact:""}}),t.includes(".")){const[s,a]=t.split(".");r[e]=d(d({},r[e]),{},{[s]:d(d({},r[e][s]),{},{[a]:n})})}else r[e]=d(d({},r[e]),{},{[t]:n});z(e=>d(d({},e),{},{churches:r}))},ee=e=>{const{name:t,value:n}=e.target;q(e=>d(d({},e),{},{[t]:n}))},te=e=>{const{name:t,value:n}=e.target;H(e=>d(d({},e),{},{[t]:"minAge"===t||"maxAge"===t||"order"===t?parseInt(n)||0:n}))},ne=c.map(e=>e.name);return(0,Pv.jsxs)("div",{className:"master-data-view",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"\ud83d\uddc2\ufe0f Master Data Management"}),(0,Pv.jsxs)("p",{children:["Admin: ",null===W||void 0===W?void 0:W.username]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{J("/admin/dashboard")},className:"btn btn-secondary",children:"Back to Dashboard"}),(0,Pv.jsx)("button",{onClick:()=>{K(),(0,r.startTransition)(()=>{J("/admin/login")})},className:"btn btn-secondary",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"tabs",children:[(0,Pv.jsx)("button",{className:"tab ".concat("events"===p?"active":""),onClick:()=>f("events"),children:"\ud83d\udcc5 Events"}),(0,Pv.jsx)("button",{className:"tab ".concat("groupEvents"===p?"active":""),onClick:()=>f("groupEvents"),children:"\ud83d\udc65 Group Events"}),(0,Pv.jsx)("button",{className:"tab ".concat("sections"===p?"active":""),onClick:()=>f("sections"),children:"\ud83d\udccd Sections & Churches"}),(0,Pv.jsx)("button",{className:"tab ".concat("judges"===p?"active":""),onClick:()=>f("judges"),children:"\ud83d\udc68\u200d\u2696\ufe0f Judges"}),(0,Pv.jsx)("button",{className:"tab ".concat("categories"===p?"active":""),onClick:()=>f("categories"),children:"\ud83d\udcca Age Categories"}),(0,Pv.jsx)("button",{className:"tab ".concat("points"===p?"active":""),onClick:()=>f("points"),children:"\ud83c\udfc6 Points Configuration"})]}),"events"===p&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"card-header-actions",children:[(0,Pv.jsx)("h2",{children:"Event Management"}),(0,Pv.jsx)("button",{onClick:()=>{v(!0),C(null),M({name:"",description:"",ageGroups:[],scoringType:"all-judges"})},className:"btn btn-primary",children:"+ Add Event"})]}),g&&(0,Pv.jsxs)("div",{className:"form-container",children:[(0,Pv.jsx)("h3",{children:k?"Edit Event":"Add New Event"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),O.name&&0!==O.ageGroups.length){console.log("Submitting event with data:",O);try{if(k){const e={name:O.name,description:O.description,ageGroups:O.ageGroups,scoringType:O.scoringType};await Av.updateEvent(k.id,e),console.log("Updated event:",d({id:k.id},e))}else{const e={name:O.name,description:O.description,ageGroups:O.ageGroups,scoringType:O.scoringType};await Av.addEvent(e),console.log("Added new event:",e)}await Q(),v(!1),C(null)}catch(t){console.error("Error saving event:",t),alert("Failed to save event. Please try again.")}}else alert("Please fill in all required fields")},children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"eventName",children:"Event Name *"}),(0,Pv.jsx)("input",{type:"text",id:"eventName",name:"name",value:O.name,onChange:Y,placeholder:"e.g., Solo Music (Male)",required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"eventDescription",children:"Description"}),(0,Pv.jsx)("textarea",{id:"eventDescription",name:"description",value:O.description,onChange:Y,rows:"3",placeholder:"Brief description of the event..."})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Age Groups * (Select at least one)"}),(0,Pv.jsx)("div",{className:"checkbox-group",children:ne.map(e=>(0,Pv.jsxs)("label",{className:"checkbox-label",children:[(0,Pv.jsx)("input",{type:"checkbox",name:"ageGroups",value:e,checked:O.ageGroups.includes(e),onChange:Y}),e]},e))})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"scoringType",children:"Scoring Type *"}),(0,Pv.jsxs)("select",{id:"scoringType",name:"scoringType",value:O.scoringType,onChange:Y,required:!0,children:[(0,Pv.jsx)("option",{value:"all-judges",children:"All Judges (Average of all judge scores)"}),(0,Pv.jsx)("option",{value:"single-judge",children:"Single Judge (One judge scores per participant)"})]}),(0,Pv.jsx)("small",{className:"field-hint",children:"all-judges"===O.scoringType?"All judges must score each participant. Final score is the average.":"Only one judge scores each participant. Suitable for written/judged events."})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-primary",children:k?"Update Event":"Add Event"}),(0,Pv.jsx)("button",{type:"button",onClick:()=>{v(!1),C(null)},className:"btn btn-secondary",children:"Cancel"})]})]})]}),(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"ID"}),(0,Pv.jsx)("th",{children:"Event Name"}),(0,Pv.jsx)("th",{children:"Description"}),(0,Pv.jsx)("th",{children:"Age Groups"}),(0,Pv.jsx)("th",{children:"Scoring Type"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsx)("tbody",{children:e.map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.id}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.name})}),(0,Pv.jsx)("td",{children:e.description}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("div",{className:"age-groups",children:e.ageGroups.map(e=>(0,Pv.jsx)("span",{className:"age-group-badge",children:e},e))})}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"scoring-type-badge ".concat("all-judges"===e.scoringType?"all-judges":"single-judge"),children:"all-judges"===e.scoringType?"All Judges":"Single Judge"})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"action-buttons",children:[(0,Pv.jsx)("button",{onClick:()=>(e=>{v(!0),C(e),M({name:e.name,description:e.description,ageGroups:e.ageGroups||[],scoringType:e.scoringType||"all-judges"})})(e),className:"btn-small btn-info",children:"Edit"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this event? This will also remove all associated participant registrations and scores."))try{await Av.deleteEvent(e);const t=await Av.getParticipants();for(const n of t)if(n.eventIds&&n.eventIds.includes(e)){const t=n.eventIds.filter(t=>t!==e);await Av.updateParticipant(n.id,d(d({},n),{},{eventIds:t}))}await Q()}catch(t){console.error("Error deleting event:",t),alert("Failed to delete event. Please try again.")}})(e.id),className:"btn-small btn-danger",children:"Delete"})]})})]},e.id))})]})})]}),"groupEvents"===p&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"card-header-actions",children:[(0,Pv.jsx)("h2",{children:"Group Events Management"}),(0,Pv.jsx)("button",{onClick:()=>{b(!0),I(null),U({name:"",description:"",maxParticipants:10,scoringType:"judge",questionsCount:0})},className:"btn btn-primary",children:"+ Add Group Event"})]}),y&&(0,Pv.jsxs)("div",{className:"form-container",children:[(0,Pv.jsx)("h3",{children:T?"Edit Group Event":"Add New Group Event"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),F.name)try{T?await Av.updateGroupEvent(T.id,{name:F.name,description:F.description,maxParticipants:F.maxParticipants,scoringType:F.scoringType,questionsCount:F.questionsCount}):await Av.addGroupEvent({name:F.name,description:F.description,maxParticipants:F.maxParticipants,scoringType:F.scoringType,questionsCount:F.questionsCount}),await Q(),b(!1),I(null)}catch(t){console.error("Error saving group event:",t),alert("Failed to save group event. Please try again.")}else alert("Please fill in the event name")},children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"groupEventName",children:"Event Name *"}),(0,Pv.jsx)("input",{type:"text",id:"groupEventName",name:"name",value:F.name,onChange:X,placeholder:"e.g., Group Song, Group Bible Quiz",required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"groupEventDescription",children:"Description"}),(0,Pv.jsx)("textarea",{id:"groupEventDescription",name:"description",value:F.description,onChange:X,placeholder:"Enter event description",rows:"3"})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"maxParticipants",children:"Max Participants per Team *"}),(0,Pv.jsx)("input",{type:"number",id:"maxParticipants",name:"maxParticipants",value:F.maxParticipants,onChange:X,min:"1",max:"20",required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"scoringType",children:"Scoring Type *"}),(0,Pv.jsxs)("select",{id:"scoringType",name:"scoringType",value:F.scoringType,onChange:X,required:!0,children:[(0,Pv.jsx)("option",{value:"judge",children:"Judge Scoring"}),(0,Pv.jsx)("option",{value:"quiz",children:"Quiz (Per Question)"})]})]})]}),"quiz"===F.scoringType&&(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"questionsCount",children:"Total Questions *"}),(0,Pv.jsx)("input",{type:"number",id:"questionsCount",name:"questionsCount",value:F.questionsCount,onChange:X,min:"1",placeholder:"e.g., 50",required:!0}),(0,Pv.jsx)("small",{style:{color:"#718096",marginTop:"5px",display:"block"},children:"Each correct answer = 1 mark"})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-primary",children:T?"Update Group Event":"Add Group Event"}),(0,Pv.jsx)("button",{type:"button",onClick:()=>{b(!1),I(null)},className:"btn btn-secondary",children:"Cancel"})]})]})]}),(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"ID"}),(0,Pv.jsx)("th",{children:"Event Name"}),(0,Pv.jsx)("th",{children:"Description"}),(0,Pv.jsx)("th",{children:"Max Participants"}),(0,Pv.jsx)("th",{children:"Scoring Type"}),(0,Pv.jsx)("th",{children:"Questions"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsx)("tbody",{children:n.map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.id}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.name})}),(0,Pv.jsx)("td",{children:e.description}),(0,Pv.jsx)("td",{children:e.maxParticipants}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"badge ".concat("quiz"===e.scoringType?"badge-info":"badge-success"),children:"quiz"===e.scoringType?"Quiz":"Judge Scoring"})}),(0,Pv.jsx)("td",{children:"quiz"===e.scoringType?e.questionsCount:"-"}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"action-buttons",children:[(0,Pv.jsx)("button",{onClick:()=>{return t=e,b(!0),I(t),void U({name:t.name,description:t.description,maxParticipants:t.maxParticipants||10,scoringType:t.scoringType||"judge",questionsCount:t.questionsCount||0});var t},className:"btn-small btn-info",children:"Edit"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this group event? This will also remove all associated teams and scores."))try{await Av.deleteGroupEvent(e);const t=await Av.getGroupTeams();for(const n of t)n.groupEventId===e&&await Av.deleteGroupTeam(n.id);await Q()}catch(t){console.error("Error deleting group event:",t),alert("Failed to delete group event. Please try again.")}})(e.id),className:"btn-small btn-danger",children:"Delete"})]})})]},e.id))})]})})]}),"sections"===p&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"card-header-actions",children:[(0,Pv.jsx)("h2",{children:"Section & Church Management"}),(0,Pv.jsx)("button",{onClick:()=>{w(!0),A(null),z({name:"",churches:[{name:"",pastor:{name:"",contact:""}}],username:"",password:"",presbyter:{name:"",contact:""},csPresident:{name:"",contact:""},csSecretary:{name:"",contact:""},csTreasurer:{name:"",contact:""}})},className:"btn btn-primary",children:"+ Add Section"})]}),x&&(0,Pv.jsxs)("div",{className:"form-container",children:[(0,Pv.jsx)("h3",{children:_?"Edit Section":"Add New Section"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=V.churches.filter(e=>"string"===typeof e?e.trim():e.name&&e.name.trim());if(V.name&&0!==t.length)if(V.username&&V.password)try{const e=await Av.getSectionCredentials();if(e.find(e=>e.username===V.username&&e.section!==((null===_||void 0===_?void 0:_.name)||"")))return void alert("Username already exists. Please choose a different username.");if(_){const e=t.map(e=>"string"===typeof e?{name:e.trim(),pastor:{name:"",contact:""}}:{name:e.name.trim(),pastor:e.pastor||{name:"",contact:""}});await Av.updateSection(_.id,{name:V.name,churches:e,presbyter:V.presbyter||{name:"",contact:""},csPresident:V.csPresident||{name:"",contact:""},csSecretary:V.csSecretary||{name:"",contact:""},csTreasurer:V.csTreasurer||{name:"",contact:""}});const n=await Av.getSectionCredentials(),r=n.findIndex(e=>e.section===_.name);-1!==r?n[r]={username:V.username,password:V.password,section:V.name}:n.push({username:V.username,password:V.password,section:V.name}),await Av.saveSectionCredentials(n)}else{const e=t.map(e=>"string"===typeof e?{name:e.trim(),pastor:{name:"",contact:""}}:{name:e.name.trim(),pastor:e.pastor||{name:"",contact:""}});await Av.addSection({name:V.name,churches:e,presbyter:V.presbyter||{name:"",contact:""},csPresident:V.csPresident||{name:"",contact:""},csSecretary:V.csSecretary||{name:"",contact:""},csTreasurer:V.csTreasurer||{name:"",contact:""}});const n=await Av.getSectionCredentials();n.push({username:V.username,password:V.password,section:V.name}),await Av.saveSectionCredentials(n)}await Q(),w(!1),A(null)}catch(n){console.error("Error saving section:",n),alert("Failed to save section. Please try again.")}else alert("Please provide username and password for section credentials");else alert("Please fill in section name and at least one church")},children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"sectionName",children:"Section Name *"}),(0,Pv.jsx)("input",{type:"text",id:"sectionName",name:"name",value:V.name,onChange:$,placeholder:"e.g., Pathanapuram",required:!0})]}),(0,Pv.jsx)("h4",{style:{marginTop:"30px",marginBottom:"15px",color:"#2d3748"},children:"Section Credentials"}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"sectionUsername",children:"Username *"}),(0,Pv.jsx)("input",{type:"text",id:"sectionUsername",name:"username",value:V.username,onChange:$,placeholder:"Enter username",disabled:_,required:!0}),_&&(0,Pv.jsx)("small",{style:{color:"#718096",marginTop:"5px",display:"block"},children:"Username cannot be changed while editing"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"sectionPassword",children:"Password *"}),(0,Pv.jsx)("input",{type:"password",id:"sectionPassword",name:"password",value:V.password,onChange:$,placeholder:"Enter password",required:!0})]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Churches *"}),V.churches.map((e,t)=>{var n,r;const s="string"===typeof e?{name:e,pastor:{name:"",contact:""}}:e;return(0,Pv.jsxs)("div",{className:"church-group",children:[(0,Pv.jsxs)("div",{className:"church-input-row",children:[(0,Pv.jsx)("input",{type:"text",value:s.name,onChange:e=>Z(t,"name",e.target.value),placeholder:"Church name",style:{flex:2}}),V.churches.length>1&&(0,Pv.jsx)("button",{type:"button",onClick:()=>(e=>{z(t=>d(d({},t),{},{churches:t.churches.filter((t,n)=>n!==e)}))})(t),className:"btn-small btn-danger",children:"Remove"})]}),(0,Pv.jsxs)("div",{className:"pastor-fields",children:[(0,Pv.jsx)("input",{type:"text",value:(null===(n=s.pastor)||void 0===n?void 0:n.name)||"",onChange:e=>Z(t,"pastor.name",e.target.value),placeholder:"Pastor name",style:{flex:1}}),(0,Pv.jsx)("input",{type:"text",value:(null===(r=s.pastor)||void 0===r?void 0:r.contact)||"",onChange:e=>Z(t,"pastor.contact",e.target.value),placeholder:"Pastor contact number",style:{flex:1}})]})]},t)}),(0,Pv.jsx)("button",{type:"button",onClick:()=>{z(e=>d(d({},e),{},{churches:[...e.churches,{name:"",pastor:{name:"",contact:""}}]}))},className:"btn-small btn-secondary",style:{marginTop:"10px"},children:"+ Add Another Church"})]}),(0,Pv.jsx)("h4",{style:{marginTop:"30px",marginBottom:"15px",color:"#2d3748"},children:"Section Officers"}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"presbyterName",children:"Presbyter Name"}),(0,Pv.jsx)("input",{type:"text",id:"presbyterName",name:"presbyter.name",value:V.presbyter.name,onChange:$,placeholder:"Enter presbyter name"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"presbyterContact",children:"Presbyter Contact"}),(0,Pv.jsx)("input",{type:"text",id:"presbyterContact",name:"presbyter.contact",value:V.presbyter.contact,onChange:$,placeholder:"Contact number"})]})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"csPresidentName",children:"CS President Name"}),(0,Pv.jsx)("input",{type:"text",id:"csPresidentName",name:"csPresident.name",value:V.csPresident.name,onChange:$,placeholder:"Enter president name"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"csPresidentContact",children:"CS President Contact"}),(0,Pv.jsx)("input",{type:"text",id:"csPresidentContact",name:"csPresident.contact",value:V.csPresident.contact,onChange:$,placeholder:"Contact number"})]})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"csSecretaryName",children:"CS Secretary Name"}),(0,Pv.jsx)("input",{type:"text",id:"csSecretaryName",name:"csSecretary.name",value:V.csSecretary.name,onChange:$,placeholder:"Enter secretary name"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"csSecretaryContact",children:"CS Secretary Contact"}),(0,Pv.jsx)("input",{type:"text",id:"csSecretaryContact",name:"csSecretary.contact",value:V.csSecretary.contact,onChange:$,placeholder:"Contact number"})]})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"csTreasurerName",children:"CS Treasurer Name"}),(0,Pv.jsx)("input",{type:"text",id:"csTreasurerName",name:"csTreasurer.name",value:V.csTreasurer.name,onChange:$,placeholder:"Enter treasurer name"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"csTreasurerContact",children:"CS Treasurer Contact"}),(0,Pv.jsx)("input",{type:"text",id:"csTreasurerContact",name:"csTreasurer.contact",value:V.csTreasurer.contact,onChange:$,placeholder:"Contact number"})]})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-primary",children:_?"Update Section":"Add Section"}),(0,Pv.jsx)("button",{type:"button",onClick:()=>{w(!1),A(null)},className:"btn btn-secondary",children:"Cancel"})]})]})]}),(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"ID"}),(0,Pv.jsx)("th",{children:"Section Name"}),(0,Pv.jsx)("th",{children:"Officers"}),(0,Pv.jsx)("th",{children:"Churches"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsx)("tbody",{children:a.map(e=>{var t,n,r,s;return(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.id}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.name})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"officers-list",children:[(null===(t=e.presbyter)||void 0===t?void 0:t.name)&&(0,Pv.jsxs)("div",{className:"officer-item",children:[(0,Pv.jsx)("strong",{children:"Presbyter:"})," ",e.presbyter.name,e.presbyter.contact&&(0,Pv.jsxs)("span",{children:[" (",e.presbyter.contact,")"]})]}),(null===(n=e.csPresident)||void 0===n?void 0:n.name)&&(0,Pv.jsxs)("div",{className:"officer-item",children:[(0,Pv.jsx)("strong",{children:"President:"})," ",e.csPresident.name,e.csPresident.contact&&(0,Pv.jsxs)("span",{children:[" (",e.csPresident.contact,")"]})]}),(null===(r=e.csSecretary)||void 0===r?void 0:r.name)&&(0,Pv.jsxs)("div",{className:"officer-item",children:[(0,Pv.jsx)("strong",{children:"Secretary:"})," ",e.csSecretary.name,e.csSecretary.contact&&(0,Pv.jsxs)("span",{children:[" (",e.csSecretary.contact,")"]})]}),(null===(s=e.csTreasurer)||void 0===s?void 0:s.name)&&(0,Pv.jsxs)("div",{className:"officer-item",children:[(0,Pv.jsx)("strong",{children:"Treasurer:"})," ",e.csTreasurer.name,e.csTreasurer.contact&&(0,Pv.jsxs)("span",{children:[" (",e.csTreasurer.contact,")"]})]})]})}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("div",{className:"churches-list",children:e.churches.map((e,t)=>{var n;const r="string"===typeof e?{name:e}:e;return(0,Pv.jsxs)("div",{className:"church-item",children:[(0,Pv.jsx)("div",{children:(0,Pv.jsx)("strong",{children:r.name})}),(null===(n=r.pastor)||void 0===n?void 0:n.name)&&(0,Pv.jsxs)("div",{className:"pastor-info",children:["Pastor: ",r.pastor.name,r.pastor.contact&&(0,Pv.jsxs)("span",{children:[" (",r.pastor.contact,")"]})]})]},t)})})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"action-buttons",children:[(0,Pv.jsx)("button",{onClick:()=>(async e=>{w(!0),A(e);const t=(e.churches||[]).map(e=>"string"===typeof e?{name:e,pastor:{name:"",contact:""}}:e),n=(await Av.getSectionCredentials()).find(t=>t.section===e.name)||{};z({name:e.name,churches:t.length>0?t:[{name:"",pastor:{name:"",contact:""}}],username:n.username||"",password:n.password||"",presbyter:e.presbyter||{name:"",contact:""},csPresident:e.csPresident||{name:"",contact:""},csSecretary:e.csSecretary||{name:"",contact:""},csTreasurer:e.csTreasurer||{name:"",contact:""}})})(e),className:"btn-small btn-info",children:"Edit"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this section? This will affect all participants from this section."))try{const t=(await Av.getSections()).find(t=>t.id===e);if(await Av.deleteSection(e),t){const e=(await Av.getSectionCredentials()).filter(e=>e.section!==t.name);await Av.saveSectionCredentials(e)}await Q()}catch(t){console.error("Error deleting section:",t),alert("Failed to delete section. Please try again.")}})(e.id),className:"btn-small btn-danger",children:"Delete"})]})})]},e.id)})})]})})]}),"judges"===p&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"card-header-actions",children:[(0,Pv.jsx)("h2",{children:"Judge Management"}),(0,Pv.jsx)("button",{onClick:()=>{N(!0),D(null),q({username:"",password:"",name:"",contact:"",email:""})},className:"btn btn-primary",children:"+ Add Judge"})]}),j&&(0,Pv.jsxs)("div",{className:"form-container",children:[(0,Pv.jsx)("h3",{children:P?"Edit Judge":"Add New Judge"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),B.username&&B.password)try{const e=await Av.getJudgeCredentials();if(P){const t=e.findIndex(e=>e.username===P.username);-1!==t&&(e[t]={username:B.username,password:B.password,name:B.name,contact:B.contact,email:B.email})}else{if(e.find(e=>e.username===B.username))return void alert("Username already exists. Please choose a different username.");e.push({username:B.username,password:B.password,name:B.name,contact:B.contact,email:B.email})}await Av.saveJudgeCredentials(e),await Q(),N(!1),D(null)}catch(t){console.error("Error saving judge:",t),alert("Failed to save judge. Please try again.")}else alert("Username and password are required")},children:[(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"judgeUsername",children:"Username *"}),(0,Pv.jsx)("input",{type:"text",id:"judgeUsername",name:"username",value:B.username,onChange:ee,placeholder:"e.g., judge1",required:!0,disabled:null!==P})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"judgePassword",children:"Password *"}),(0,Pv.jsx)("input",{type:"password",id:"judgePassword",name:"password",value:B.password,onChange:ee,placeholder:"Enter password",required:!0})]})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"judgeName",children:"Full Name"}),(0,Pv.jsx)("input",{type:"text",id:"judgeName",name:"name",value:B.name,onChange:ee,placeholder:"Enter judge's full name"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"judgeContact",children:"Contact Number"}),(0,Pv.jsx)("input",{type:"text",id:"judgeContact",name:"contact",value:B.contact,onChange:ee,placeholder:"Enter contact number"})]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"judgeEmail",children:"Email"}),(0,Pv.jsx)("input",{type:"email",id:"judgeEmail",name:"email",value:B.email,onChange:ee,placeholder:"Enter email address"})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-primary",children:P?"Update Judge":"Add Judge"}),(0,Pv.jsx)("button",{type:"button",onClick:()=>{N(!1),D(null)},className:"btn btn-secondary",children:"Cancel"})]})]})]}),(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Username"}),(0,Pv.jsx)("th",{children:"Full Name"}),(0,Pv.jsx)("th",{children:"Contact"}),(0,Pv.jsx)("th",{children:"Email"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsx)("tbody",{children:o.map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.username})}),(0,Pv.jsx)("td",{children:e.name||"-"}),(0,Pv.jsx)("td",{children:e.contact||"-"}),(0,Pv.jsx)("td",{children:e.email||"-"}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"action-buttons",children:[(0,Pv.jsx)("button",{onClick:()=>(e=>{N(!0),D(e),q({username:e.username,password:e.password,name:e.name||"",contact:e.contact||"",email:e.email||""})})(e),className:"btn-small btn-info",children:"Edit"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this judge? This will also remove all scores submitted by this judge."))try{const t=(await Av.getJudgeCredentials()).filter(t=>t.username!==e);await Av.saveJudgeCredentials(t),await Av.deleteScoresByJudge(e),await Av.deleteJudgeLocksByJudge(e),await Q()}catch(t){console.error("Error deleting judge:",t),alert("Failed to delete judge. Please try again.")}})(e.username),className:"btn-small btn-danger",children:"Delete"})]})})]},e.username))})]})})]}),"points"===p&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsx)("div",{className:"card-header-actions",children:(0,Pv.jsx)("h2",{children:"Points Configuration"})}),(0,Pv.jsxs)("div",{className:"points-config-container",children:[(0,Pv.jsxs)("div",{className:"points-section",children:[(0,Pv.jsx)("h3",{children:"Individual Events Points"}),(0,Pv.jsx)("p",{className:"points-description",children:"Configure points awarded for top 3 positions in individual events"}),(0,Pv.jsxs)("div",{className:"points-form",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"1st Place Points"}),(0,Pv.jsx)("input",{type:"number",min:"0",value:h.individual.first,onChange:e=>m(t=>d(d({},t),{},{individual:d(d({},t.individual),{},{first:parseInt(e.target.value)||0})})),className:"points-input"}),(0,Pv.jsx)("span",{className:"medal-icon",children:"\ud83e\udd47"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"2nd Place Points"}),(0,Pv.jsx)("input",{type:"number",min:"0",value:h.individual.second,onChange:e=>m(t=>d(d({},t),{},{individual:d(d({},t.individual),{},{second:parseInt(e.target.value)||0})})),className:"points-input"}),(0,Pv.jsx)("span",{className:"medal-icon",children:"\ud83e\udd48"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"3rd Place Points"}),(0,Pv.jsx)("input",{type:"number",min:"0",value:h.individual.third,onChange:e=>m(t=>d(d({},t),{},{individual:d(d({},t.individual),{},{third:parseInt(e.target.value)||0})})),className:"points-input"}),(0,Pv.jsx)("span",{className:"medal-icon",children:"\ud83e\udd49"})]})]})]}),(0,Pv.jsxs)("div",{className:"points-section",children:[(0,Pv.jsx)("h3",{children:"Group Events Points"}),(0,Pv.jsx)("p",{className:"points-description",children:"Configure points awarded for top 3 positions in group events"}),(0,Pv.jsxs)("div",{className:"points-form",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"1st Place Points"}),(0,Pv.jsx)("input",{type:"number",min:"0",value:h.group.first,onChange:e=>m(t=>d(d({},t),{},{group:d(d({},t.group),{},{first:parseInt(e.target.value)||0})})),className:"points-input"}),(0,Pv.jsx)("span",{className:"medal-icon",children:"\ud83e\udd47"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"2nd Place Points"}),(0,Pv.jsx)("input",{type:"number",min:"0",value:h.group.second,onChange:e=>m(t=>d(d({},t),{},{group:d(d({},t.group),{},{second:parseInt(e.target.value)||0})})),className:"points-input"}),(0,Pv.jsx)("span",{className:"medal-icon",children:"\ud83e\udd48"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"3rd Place Points"}),(0,Pv.jsx)("input",{type:"number",min:"0",value:h.group.third,onChange:e=>m(t=>d(d({},t),{},{group:d(d({},t.group),{},{third:parseInt(e.target.value)||0})})),className:"points-input"}),(0,Pv.jsx)("span",{className:"medal-icon",children:"\ud83e\udd49"})]})]})]}),(0,Pv.jsx)("button",{onClick:async()=>{await Av.savePointsConfig(h),alert("Points configuration saved successfully!")},className:"btn btn-primary",style:{marginTop:"20px"},children:"Save Points Configuration"})]})]}),"categories"===p&&(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"card-header-actions",children:[(0,Pv.jsx)("h2",{children:"Age Category Management"}),(0,Pv.jsx)("button",{onClick:()=>{E(!0),L(null),H({name:"",minAge:0,maxAge:0,order:c.length+1})},className:"btn btn-primary",children:"+ Add Category"})]}),(0,Pv.jsx)("div",{className:"category-container",children:(0,Pv.jsx)("div",{className:"category-table-wrapper",children:(0,Pv.jsxs)("table",{className:"data-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Order"}),(0,Pv.jsx)("th",{children:"Category Name"}),(0,Pv.jsx)("th",{children:"Age Range"}),(0,Pv.jsx)("th",{children:"Chest # Prefix"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsxs)("tbody",{children:[c.map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.order}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.name})}),(0,Pv.jsxs)("td",{children:[e.minAge," - ",e.maxAge," years"]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.name.trim().split(/\s+/).map(e=>e.charAt(0).toUpperCase()).join("")})}),(0,Pv.jsxs)("td",{className:"actions",children:[(0,Pv.jsx)("button",{onClick:()=>(e=>{E(!0),L(e),H({name:e.name,minAge:e.minAge,maxAge:e.maxAge,order:e.order})})(e),className:"btn btn-sm btn-secondary",children:"Edit"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this category? This may affect event registrations."))try{await Av.deleteCategory(e),await Q()}catch(t){console.error("Error deleting category:",t),alert("Failed to delete category. Please try again.")}})(e.id),className:"btn btn-sm btn-danger",children:"Delete"})]})]},e.id)),0===c.length&&(0,Pv.jsx)("tr",{children:(0,Pv.jsx)("td",{colSpan:"4",style:{textAlign:"center",padding:"40px",color:"#718096"},children:(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("p",{style:{fontSize:"1.1rem",marginBottom:"10px"},children:"\ud83d\udcca No categories found"}),(0,Pv.jsx)("p",{style:{fontSize:"0.9rem"},children:'Click "Add Category" to create your first age category.'})]})})})]})]})})}),S&&(0,Pv.jsx)("div",{className:"modal-overlay",children:(0,Pv.jsxs)("div",{className:"modal-content category-form-content",children:[(0,Pv.jsx)("h3",{children:R?"Edit Category":"Add New Category"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!G.name||G.minAge<0||G.maxAge<0)alert("Please fill in all required fields with valid values");else if(G.minAge>=G.maxAge)alert("Minimum age must be less than maximum age");else try{R?await Av.updateCategory(R.id,G):await Av.addCategory(G),await Q(),E(!1),L(null)}catch(t){console.error("Error saving category:",t),alert("Failed to save category. Please try again.")}},className:"category-form-grid",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Category Name *"}),(0,Pv.jsx)("input",{type:"text",name:"name",value:G.name,onChange:te,placeholder:"e.g., Junior, Intermediate, Senior",required:!0}),(0,Pv.jsx)("small",{style:{color:"#718096",fontSize:"0.85rem",marginTop:"5px",display:"block"},children:"Chest number prefix will be auto-generated from category name"})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Minimum Age *"}),(0,Pv.jsx)("input",{type:"number",name:"minAge",value:G.minAge,onChange:te,min:"0",placeholder:"6",required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Maximum Age *"}),(0,Pv.jsx)("input",{type:"number",name:"maxAge",value:G.maxAge,onChange:te,min:"0",placeholder:"10",required:!0})]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Display Order"}),(0,Pv.jsx)("input",{type:"number",name:"order",value:G.order,onChange:te,min:"1"}),(0,Pv.jsx)("small",{style:{color:"#718096",fontSize:"0.85rem",marginTop:"5px"},children:"Categories will be displayed in this order"})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-primary",children:R?"Update Category":"Add Category"}),(0,Pv.jsx)("button",{type:"button",onClick:()=>{E(!1),L(null)},className:"btn btn-secondary",children:"Cancel"})]})]})]})})]})]})},ay=()=>{var e,t;const[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)({groupEventId:"",sectionId:"",teamName:"",chestNumber:"",participants:[""],talentTestEventId:""}),{user:x,logout:w}=Rv(),j=Ee(),N=null===(e=je().state)||void 0===e?void 0:e.eventId;(0,r.useEffect)(()=>{x&&"admin"===x.role?S():j("/admin/login")},[x,j]);const S=async()=>{const{groupEvents:e,sections:t,talentTestEvents:n,teams:r,currentEvent:a,activeEvent:o}=await Av.getGroupTeamsData(N);if(s(e),l(t),i(n),N){v(a),b(e=>d(d({},e),{},{talentTestEventId:N}));const e=r.filter(e=>e.talentTestEventId===N);u(e)}else u(r),o&&!y.talentTestEventId&&b(e=>d(d({},e),{},{talentTestEventId:o.id}))},E=()=>{j(N?"/admin/event/".concat(N):"/admin/dashboard")},k=e=>{const{name:t,value:n}=e.target;b(e=>d(d({},e),{},{[t]:n}))},C=async(e,t)=>{const r=await Av.getGroupTeams(),s=n.find(t=>t.id===e),a=o.find(e=>e.id===t);if(!s||!a)return"";let i="";i=s.name.includes("Song")?"GS":s.name.includes("Quiz")?"GQ":"GT";const l=a.name.charAt(0).toUpperCase();i="".concat(i).concat(l);const c=r.filter(e=>e.chestNumber&&e.chestNumber.startsWith(i));let u=0;return c.forEach(e=>{const t=e.chestNumber.match(/\d+$/);if(t){const e=parseInt(t[0]);e>u&&(u=e)}}),"".concat(i).concat(String(u+1).padStart(3,"0"))},T=e=>{const t=n.find(t=>t.id===e);return t?t.name:"Unknown"},I=e=>{const t=o.find(t=>t.id===e);return t?t.name:"Unknown"};return(0,Pv.jsxs)("div",{className:"group-teams-view",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[g&&(0,Pv.jsx)("div",{className:"breadcrumb",children:(0,Pv.jsxs)("button",{onClick:E,className:"btn-link",children:["\u2190 ",g.name]})}),(0,Pv.jsx)("h1",{children:"\ud83d\udc65 Group Teams Management"}),(0,Pv.jsxs)("p",{children:["Admin: ",null===x||void 0===x?void 0:x.username]}),g&&(0,Pv.jsxs)("p",{className:"subtitle",children:["Viewing teams for: ",g.name]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:E,className:"btn btn-secondary",children:N?"\u2190 Back to Event":"\u2190 Back to Events"}),(0,Pv.jsx)("button",{onClick:()=>{w(),(0,r.startTransition)(()=>{j("/admin/login")})},className:"btn btn-secondary",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"card-header-actions",children:[(0,Pv.jsx)("h2",{children:"Teams"}),(0,Pv.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Pv.jsx)("button",{onClick:async()=>{const e=(await Av.getGroupTeams()).filter(e=>!e.chestNumber);if(0!==e.length){if(window.confirm("Generate chest numbers for ".concat(e.length," team(s)?"))){for(const t of e){const e=await C(t.groupEventId,t.sectionId);await Av.updateGroupTeam(t.id,{chestNumber:e})}S(),alert("Successfully assigned ".concat(e.length," chest numbers!"))}}else alert("All teams already have chest numbers assigned!")},className:"btn btn-success",children:"\ud83d\udd22 Generate All Chest Numbers"}),(0,Pv.jsx)("button",{onClick:()=>{var e;m(!0),f(null);const t=N||(null===g||void 0===g?void 0:g.id)||(null===(e=a.find(e=>e.registrationOpen))||void 0===e?void 0:e.id)||"";b({groupEventId:"",sectionId:"",teamName:"",chestNumber:"",participants:[""],talentTestEventId:t})},className:"btn btn-primary",children:"+ Add Team"})]})]}),h&&(0,Pv.jsxs)("div",{className:"form-container",children:[(0,Pv.jsx)("h3",{children:p?"Edit Team":"Add New Team"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!y.groupEventId||!y.sectionId||!y.teamName||!y.chestNumber)return void alert("Please fill in all required fields");if(!y.talentTestEventId)return void alert("Talent Test Event is required");const t=y.participants.filter(e=>e.trim());if(0===t.length)return void alert("Please add at least one participant");(await Av.getGroupTeams()).find(e=>e.groupEventId===y.groupEventId&&e.sectionId===y.sectionId&&e.talentTestEventId===y.talentTestEventId&&e.id!==(null===p||void 0===p?void 0:p.id))?alert("This section already has a team for this event. Only one team per section is allowed."):(p?await Av.updateGroupTeam(p.id,{groupEventId:y.groupEventId,sectionId:y.sectionId,teamName:y.teamName,chestNumber:y.chestNumber,participants:t,talentTestEventId:y.talentTestEventId}):await Av.addGroupTeam({groupEventId:y.groupEventId,sectionId:y.sectionId,teamName:y.teamName,chestNumber:y.chestNumber,participants:t,talentTestEventId:y.talentTestEventId,scores:[]}),S(),m(!1),f(null))},children:[(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"groupEventId",children:"Group Event *"}),(0,Pv.jsxs)("select",{id:"groupEventId",name:"groupEventId",value:y.groupEventId,onChange:k,required:!0,children:[(0,Pv.jsx)("option",{value:"",children:"Select Event"}),n.map(e=>(0,Pv.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"sectionId",children:"Section *"}),(0,Pv.jsxs)("select",{id:"sectionId",name:"sectionId",value:y.sectionId,onChange:k,required:!0,children:[(0,Pv.jsx)("option",{value:"",children:"Select Section"}),o.map(e=>(0,Pv.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"teamName",children:"Team Name *"}),(0,Pv.jsx)("input",{type:"text",id:"teamName",name:"teamName",value:y.teamName,onChange:k,placeholder:"e.g., Pathanapuram Warriors",required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"chestNumber",children:"Chest Number *"}),(0,Pv.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Pv.jsx)("input",{type:"text",id:"chestNumber",name:"chestNumber",value:y.chestNumber,onChange:k,placeholder:"e.g., GSP001, GQK001",required:!0,style:{flex:1}}),(0,Pv.jsx)("button",{type:"button",onClick:async()=>{if(!y.groupEventId||!y.sectionId)return void alert("Please select event and section first");const e=await C(y.groupEventId,y.sectionId);b(t=>d(d({},t),{},{chestNumber:e}))},className:"btn btn-secondary",style:{whiteSpace:"nowrap"},children:"\ud83d\udd22 Auto Generate"})]}),(0,Pv.jsx)("small",{style:{color:"#718096",fontSize:"0.85rem"},children:"Format: GSP001 (Group Song Pathanapuram), GQK001 (Group Quiz Kollam)"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Participants *"}),y.participants.map((e,t)=>(0,Pv.jsxs)("div",{className:"participant-input-row",children:[(0,Pv.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...y.participants];n[e]=t,b(e=>d(d({},e),{},{participants:n}))})(t,e.target.value),placeholder:"Participant ".concat(t+1," name"),style:{flex:1}}),y.participants.length>1&&(0,Pv.jsx)("button",{type:"button",onClick:()=>(e=>{if(y.participants.length>1){const t=y.participants.filter((t,n)=>n!==e);b(e=>d(d({},e),{},{participants:t}))}})(t),className:"btn-small btn-danger",children:"Remove"})]},t)),(0,Pv.jsx)("button",{type:"button",onClick:()=>{const e=n.find(e=>e.id===y.groupEventId);e&&y.participants.length<e.maxParticipants?b(e=>d(d({},e),{},{participants:[...e.participants,""]})):alert("Maximum ".concat((null===e||void 0===e?void 0:e.maxParticipants)||10," participants allowed for this event"))},className:"btn-small btn-secondary",style:{marginTop:"10px"},children:"+ Add Participant"}),y.groupEventId&&(0,Pv.jsxs)("small",{style:{color:"#718096",marginTop:"5px",display:"block"},children:["Max ",(null===(t=n.find(e=>e.id===y.groupEventId))||void 0===t?void 0:t.maxParticipants)||10," participants allowed"]})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-primary",children:p?"Update Team":"Add Team"}),(0,Pv.jsx)("button",{type:"button",onClick:()=>{m(!1),f(null)},className:"btn btn-secondary",children:"Cancel"})]})]})]}),(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"ID"}),(0,Pv.jsx)("th",{children:"Event"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Team Name"}),(0,Pv.jsx)("th",{children:"Chest Number"}),(0,Pv.jsx)("th",{children:"Participants"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsx)("tbody",{children:c.map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.id}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:T(e.groupEventId)})}),(0,Pv.jsx)("td",{children:I(e.sectionId)}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.teamName})}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"chest-number-badge",children:e.chestNumber})}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("div",{className:"participants-list",children:e.participants.map((e,t)=>(0,Pv.jsx)("span",{className:"participant-badge",children:e},t))})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"action-buttons",children:[(0,Pv.jsx)("button",{onClick:()=>(e=>{m(!0),f(e),b({groupEventId:e.groupEventId,sectionId:e.sectionId,teamName:e.teamName,chestNumber:e.chestNumber||"",participants:e.participants.length>0?e.participants:[""],talentTestEventId:e.talentTestEventId||N||""})})(e),className:"btn-small btn-info",children:"Edit"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{window.confirm("Are you sure you want to delete this team?")&&(await Av.deleteGroupTeam(e),S())})(e.id),className:"btn-small btn-danger",children:"Delete"})]})})]},e.id))})]})})]})]})},iy=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)([]),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)([]),{user:x,logout:w}=Rv(),j=Ee(),N=null===(e=je().state)||void 0===e?void 0:e.eventId;(0,r.useEffect)(()=>{x&&"admin"===x.role?S():j("/admin/login")},[x,j]);const S=async()=>{const{groupEvents:e,groupTeams:t,sections:r,declaredResults:s}=await Av.getGroupResultsData();n(e),a(t),o(r),d(s)};(0,r.useEffect)(()=>{(async()=>{if(!l)return m(!1),f(!1),v(!0),void b([]);const e=parseInt(l),n=s.filter(t=>String(t.groupEventId)===String(l)||t.groupEventId===e);v(n.length>0);const r=await Av.isGroupResultDeclared(l);console.log("Debug - Is Group Event Declared:",r,"for eventId:",l),f(r);const a=await Av.getJudges(),i=await Av.getGroupEventLocks(),o=t.find(t=>String(t.id)===String(l)||t.id===e);console.log("Debug - Selected Event ID:",l),console.log("Debug - Parsed Event ID:",e),console.log("Debug - Event:",o),console.log("Debug - All Group Event Locks:",i),console.log("Debug - All Judges:",a);const c=a.map(t=>{const n=i.find(n=>(console.log("Checking judge ".concat(t.username,": lock.groupEventId=").concat(n.groupEventId,", selectedGroupEventId=").concat(l,", lock.locked=").concat(n.locked)),n.judgeName===t.username&&(String(n.groupEventId)===String(l)||n.groupEventId===e)&&n.locked));return console.log("Judge ".concat(t.username," lock found:"),n),{judgeName:t.username,isLocked:!!n}});b(c);let u=!1;u=o&&"quiz"===o.scoringType?i.some(t=>(String(t.groupEventId)===String(l)||t.groupEventId===e)&&t.locked):a.every(t=>i.some(n=>n.judgeName===t.username&&(String(n.groupEventId)===String(l)||n.groupEventId===e)&&n.locked)),console.log("Debug - Is Event Fully Locked:",u),m(u)})()},[l,t,s,u]);const E=e=>{const n=t.find(t=>t.id===parseInt(e));return n?n.name:"Unknown"},k=e=>{const t=i.find(t=>t.id===e);return t?t.name:"Unknown"},C=(()=>{if(!l)return[];const e=parseInt(l),n=t.find(t=>t.id===e),r=s.filter(t=>String(t.groupEventId)===String(l)||t.groupEventId===e);if(!h)return null;const a=r.map(e=>{const t=e.scores||[];let r=0,s=0;if(n&&"quiz"===n.scoringType){const e=t.find(e=>void 0!==e.score);r=e?parseFloat(e.score):0,s=e?1:0}else t.forEach(e=>{r+=parseFloat(e.score),s++});const a=s>0?n&&"quiz"===n.scoringType?r:r/s:0;return{teamId:e.id,teamName:e.teamName,sectionId:e.sectionId,sectionName:k(e.sectionId),participants:e.participants,totalScore:r,averageScore:a,judgeCount:s}});return a.sort((e,t)=>t.averageScore-e.averageScore),a.forEach((e,t)=>{e.rank=t+1,1===e.rank?e.points=10:2===e.rank?e.points=5:3===e.rank?e.points=3:e.points=0}),a})();return(0,Pv.jsxs)("div",{className:"group-results-view",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"Group Event Results"}),(0,Pv.jsxs)("p",{children:["Admin: ",null===x||void 0===x?void 0:x.username]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{j(N?"/admin/event/".concat(N):"/admin/events")},className:"btn btn-secondary",children:N?"\u2190 Back to Event":"\u2190 Back to Events"}),(0,Pv.jsx)("button",{onClick:()=>{w(),(0,r.startTransition)(()=>{j("/admin/login")})},className:"btn btn-secondary",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsx)("h2",{children:"Select Group Event"}),(0,Pv.jsx)("div",{className:"filter-section",children:(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"selectGroupEvent",children:"Group Event:"}),(0,Pv.jsxs)("select",{id:"selectGroupEvent",value:l,onChange:e=>c(e.target.value),children:[(0,Pv.jsx)("option",{value:"",children:"Select a group event"}),t.map(e=>(0,Pv.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),l&&!g&&(0,Pv.jsx)("div",{className:"warning-message",children:(0,Pv.jsx)("p",{children:"\u26a0\ufe0f No teams found for this group event."})}),l&&g&&(0,Pv.jsxs)("div",{className:"judge-lock-status-section",children:[(0,Pv.jsx)("h3",{children:"Judge Lock Status"}),y.length>0?(0,Pv.jsxs)(Pv.Fragment,{children:[(0,Pv.jsx)("div",{className:"judge-locks-grid",children:y.map((e,t)=>(0,Pv.jsxs)("div",{className:"judge-lock-item ".concat(e.isLocked?"locked":"unlocked"),children:[(0,Pv.jsx)("div",{className:"judge-lock-icon",children:e.isLocked?"\ud83d\udd12":"\ud83d\udd13"}),(0,Pv.jsxs)("div",{className:"judge-lock-info",children:[(0,Pv.jsx)("span",{className:"judge-name",children:e.judgeName}),(0,Pv.jsx)("span",{className:"lock-status ".concat(e.isLocked?"locked":"unlocked"),children:e.isLocked?"Locked":"Not Locked"})]})]},t))}),h&&(0,Pv.jsxs)("div",{className:"all-locked-badge",children:["\u2705 ",(()=>{const e=t.find(e=>String(e.id)===String(l));return e&&"quiz"===e.scoringType?"Judge has locked their scores":"All judges have locked their scores"})()]})]}):(0,Pv.jsx)("p",{className:"no-data",children:"Loading judge status..."})]}),l&&g&&!h&&(0,Pv.jsxs)("div",{className:"warning-message",children:[(0,Pv.jsx)("p",{children:(()=>{const e=t.find(e=>String(e.id)===String(l));return e&&"quiz"===e.scoringType?"\u26a0\ufe0f Results are not available yet. No judge has locked their scores for this event.":"\u26a0\ufe0f Results are not available yet. Not all judges have locked their scores for this event."})()}),(0,Pv.jsx)("p",{children:"Please ensure all judges complete and lock their scoring before viewing results."})]}),l&&g&&h&&C&&C.length>0&&(0,Pv.jsxs)(Pv.Fragment,{children:[(0,Pv.jsxs)("div",{className:"results-header",children:[(0,Pv.jsxs)("h3",{children:["Results: ",E(parseInt(l))]}),(0,Pv.jsx)("div",{className:"declaration-controls",children:p?(0,Pv.jsxs)("div",{className:"declaration-status",children:[(0,Pv.jsx)("span",{className:"status-badge declared",children:"\u2713 Result Declared"}),(0,Pv.jsx)("button",{onClick:async()=>{if(!l)return;const e=await Av.revertGroupDeclaration(l);if(e.success){const t=await Av.getDeclaredResults();d(t),alert(e.message)}else alert(e.message)},className:"btn btn-warning",children:"Revert Declaration"})]}):(0,Pv.jsxs)("div",{className:"declaration-status",children:[(0,Pv.jsx)("span",{className:"status-badge not-declared",children:"\u26a0 Not Declared"}),(0,Pv.jsx)("button",{onClick:async()=>{if(!l)return;const e=await Av.declareGroupResult(l);if(e.success){const t=await Av.getDeclaredResults();d(t),alert(e.message)}else alert(e.message)},className:"btn btn-success",children:"Declare Result"})]})})]}),(0,Pv.jsxs)("div",{className:"podium-section",children:[(0,Pv.jsx)("h3",{children:"Top 3 Teams"}),(0,Pv.jsx)("div",{className:"podium",children:C.slice(0,3).map((e,t)=>(0,Pv.jsxs)("div",{className:"podium-card rank-".concat(e.rank),children:[(0,Pv.jsx)("div",{className:"rank-badge",children:e.rank}),(0,Pv.jsx)("div",{className:"medal",children:["\ud83e\udd47","\ud83e\udd48","\ud83e\udd49"][t]}),(0,Pv.jsx)("h4",{children:e.teamName}),(0,Pv.jsx)("p",{className:"section-name",children:e.sectionName}),(0,Pv.jsxs)("div",{className:"score-info",children:[(0,Pv.jsx)("div",{className:"score-value",children:e.averageScore.toFixed(2)}),(0,Pv.jsx)("div",{className:"score-label",children:"Average Score"})]}),(0,Pv.jsxs)("div",{className:"points-badge",children:[e.points," pts"]})]},e.teamId))})]}),(0,Pv.jsxs)("div",{className:"results-table-section",children:[(0,Pv.jsxs)("h3",{children:["All Teams - ",E(l)]}),(0,Pv.jsxs)("table",{className:"results-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Rank"}),(0,Pv.jsx)("th",{children:"Team Name"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Participants"}),(0,Pv.jsx)("th",{children:"Average Score"}),(0,Pv.jsx)("th",{children:"Points"})]})}),(0,Pv.jsx)("tbody",{children:C.map(e=>(0,Pv.jsxs)("tr",{className:e.rank<=3?"top-".concat(e.rank):"",children:[(0,Pv.jsxs)("td",{className:"rank-cell",children:[(0,Pv.jsx)("span",{className:"rank-number",children:e.rank}),e.rank<=3&&(0,Pv.jsx)("span",{className:"medal-small",children:["\ud83e\udd47","\ud83e\udd48","\ud83e\udd49"][e.rank-1]})]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.teamName})}),(0,Pv.jsx)("td",{children:e.sectionName}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("div",{className:"participants-list",children:e.participants.map((e,t)=>(0,Pv.jsx)("span",{className:"participant-tag",children:e},t))})}),(0,Pv.jsx)("td",{children:e.averageScore.toFixed(2)}),(0,Pv.jsx)("td",{children:e.points>0&&(0,Pv.jsxs)("span",{className:"points-badge rank-".concat(e.rank),children:[e.points," pts"]})})]},e.teamId))})]})]})]})]})]})},oy=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[f,g]=(0,r.useState)([]),[v,y]=(0,r.useState)({individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}),[b,x]=(0,r.useState)({}),[w,j]=(0,r.useState)({}),{user:N,logout:S}=Rv(),E=Ee(),k=null===(e=je().state)||void 0===e?void 0:e.eventId;(0,r.useEffect)(()=>{N&&"admin"===N.role?C():E("/admin/login")},[N,E]);const C=async()=>{const e=await Av.getData(),t=await Av.getEvents();n(t);const r=(await Av.getCategories()).sort((e,t)=>(e.order||0)-(t.order||0));a(r);const s=await Av.getGroupEvents();o(s);const i=await Av.getParticipants();c(i);const l=await Av.getGroupTeams();h(l);const u=await Av.getScores();p(u);const d=await Av.getSections();g(d),y(e.pointsConfig||{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}),await T(t,i,u,r),await I(s,l)},T=async(e,t,n,r)=>{const s={};r.forEach(r=>{s[r.name]={},e.forEach(e=>{const a=t.filter(t=>{const n=t.eventIds||(t.eventId?[parseInt(t.eventId)]:[]);return t.ageCategory===r.name&&n.includes(e.id)}),i=a.map(t=>{const r=n.filter(n=>n.participantId===t.id&&n.eventId===e.id);if(0===r.length)return null;const s=r.reduce((e,t)=>e+t.totalScore,0),a=s/r.length;return d(d({},t),{},{averageScore:a,scoreCount:r.length})}).filter(e=>null!==e);i.sort((e,t)=>t.averageScore-e.averageScore),i.length>0&&(s[r.name][e.id]||(s[r.name][e.id]={eventName:e.name,top3:i.slice(0,3)}))})}),x(s)},I=(e,t)=>{const n={};e.forEach(e=>{const r=t.filter(t=>t.groupEventId===e.id).map(t=>{if(!t.scores||0===t.scores.length)return null;let n;if("quiz"===e.scoringType){var r;n=(null===(r=t.scores[0])||void 0===r?void 0:r.score)||0}else{const e=t.scores.reduce((e,t)=>e+(t.score||0),0);n=e/t.scores.length}return d(d({},t),{},{finalScore:n})}).filter(e=>null!==e);r.sort((e,t)=>t.finalScore-e.finalScore),r.length>0&&(n[e.id]={eventName:e.name,scoringType:e.scoringType,top3:r.slice(0,3)})}),j(n)},_=e=>{const t=f.find(t=>t.id===e);return t?t.name:"Unknown"},A=function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?v.group:v.individual;return 0===e?t.first:1===e?t.second:2===e?t.third:0};return(0,Pv.jsxs)("div",{className:"printable-results-view",children:[(0,Pv.jsxs)("div",{className:"dashboard-header no-print",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"\ud83d\udda8\ufe0f Printable Results Summary"}),(0,Pv.jsxs)("p",{children:["Admin: ",null===N||void 0===N?void 0:N.username]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{window.print()},className:"btn btn-primary",children:"\ud83d\udda8\ufe0f Print Results"}),(0,Pv.jsx)("button",{onClick:()=>{E(k?"/admin/event/".concat(k):"/admin/events")},className:"btn btn-secondary",children:k?"\u2190 Back to Event":"\u2190 Back to Events"}),(0,Pv.jsx)("button",{onClick:()=>{S(),(0,r.startTransition)(()=>{E("/admin/login")})},className:"btn btn-secondary",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"print-content",children:[(0,Pv.jsxs)("div",{className:"print-header",children:[(0,Pv.jsx)("h1",{children:"Christ Soldiers Talent Test 2026"}),(0,Pv.jsx)("h2",{children:"Official Results Summary"}),(0,Pv.jsxs)("p",{className:"print-date",children:["Date: ",(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),(0,Pv.jsxs)("div",{className:"results-section",children:[(0,Pv.jsx)("h2",{className:"section-title",children:"Individual Events Results"}),s.map(e=>(0,Pv.jsxs)("div",{className:"category-section",children:[(0,Pv.jsxs)("h3",{className:"category-title",children:[e.name," Category (",e.minAge,"-",e.maxAge,")"]}),b[e.name]&&Object.keys(b[e.name]).length>0?(0,Pv.jsx)("div",{className:"events-grid",children:Object.entries(b[e.name]).map(e=>{let[t,n]=e;return(0,Pv.jsxs)("div",{className:"event-results-card",children:[(0,Pv.jsx)("h4",{className:"event-name",children:n.eventName}),(0,Pv.jsxs)("table",{className:"results-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Pos"}),(0,Pv.jsx)("th",{children:"Chest No"}),(0,Pv.jsx)("th",{children:"Name"}),(0,Pv.jsx)("th",{children:"Church"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Score"}),(0,Pv.jsx)("th",{children:"Points"})]})}),(0,Pv.jsx)("tbody",{children:n.top3.map((e,t)=>(0,Pv.jsxs)("tr",{className:"position-".concat(t+1),children:[(0,Pv.jsxs)("td",{className:"position-cell",children:[0===t&&"\ud83e\udd47",1===t&&"\ud83e\udd48",2===t&&"\ud83e\udd49"]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.chestNumber})}),(0,Pv.jsx)("td",{children:e.name}),(0,Pv.jsx)("td",{children:e.churchName||"N/A"}),(0,Pv.jsx)("td",{children:e.section}),(0,Pv.jsx)("td",{children:e.averageScore.toFixed(2)}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"points-badge",children:A(t,!1)})})]},e.id))})]})]},t)})}):(0,Pv.jsx)("p",{className:"no-results",children:"No results available for this category"})]},e.id))]}),(0,Pv.jsxs)("div",{className:"results-section",children:[(0,Pv.jsx)("h2",{className:"section-title",children:"Group Events Results"}),Object.keys(w).length>0?(0,Pv.jsx)("div",{className:"events-grid",children:Object.entries(w).map(e=>{let[t,n]=e;return(0,Pv.jsxs)("div",{className:"event-results-card",children:[(0,Pv.jsx)("h4",{className:"event-name",children:n.eventName}),(0,Pv.jsxs)("table",{className:"results-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Pos"}),(0,Pv.jsx)("th",{children:"Chest No"}),(0,Pv.jsx)("th",{children:"Team Name"}),(0,Pv.jsx)("th",{children:"Church"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Score"}),(0,Pv.jsx)("th",{children:"Points"})]})}),(0,Pv.jsx)("tbody",{children:n.top3.map((e,t)=>(0,Pv.jsxs)("tr",{className:"position-".concat(t+1),children:[(0,Pv.jsxs)("td",{className:"position-cell",children:[0===t&&"\ud83e\udd47",1===t&&"\ud83e\udd48",2===t&&"\ud83e\udd49"]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("strong",{children:e.chestNumber})}),(0,Pv.jsx)("td",{children:e.teamName}),(0,Pv.jsx)("td",{children:e.churchName||"N/A"}),(0,Pv.jsx)("td",{children:_(e.sectionId)}),(0,Pv.jsx)("td",{children:e.finalScore.toFixed(2)}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"points-badge",children:A(t,!0)})})]},e.id))})]})]},t)})}):(0,Pv.jsx)("p",{className:"no-results",children:"No group events results available"})]}),(0,Pv.jsxs)("div",{className:"print-footer",children:[(0,Pv.jsx)("p",{children:"Christ Soldiers Talent Test Management System"}),(0,Pv.jsxs)("p",{children:["Official Document - Generated on ",(new Date).toLocaleString()]})]})]})]})},ly=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[m,p]=(0,r.useState)([]),[f,g]=(0,r.useState)([]),[v,y]=(0,r.useState)([]),[b,x]=(0,r.useState)(!1),[w,j]=(0,r.useState)(null),[N,S]=(0,r.useState)([]),[E,k]=(0,r.useState)(null),[C,T]=(0,r.useState)([]),[I,_]=(0,r.useState)({minAge:6,maxAge:25}),[A,P]=(0,r.useState)({name:"",age:"",gender:"",email:"",phone:"",eventIds:[],churchName:"",section:"",talentTestEventId:""}),{user:D,logout:R}=Rv(),L=Ee(),O=null===(e=je().state)||void 0===e?void 0:e.eventId;(0,r.useEffect)(()=>{if(!D||"admin"!==D.role&&"section"!==D.role){const e="section"===(null===D||void 0===D?void 0:D.role)?"/section/login":"/admin/login";L(e)}else M()},[D,L]);const M=async()=>{const{sections:e,events:t,ageLimits:r,talentTestEvents:s,participants:i,currentEvent:l,activeEvent:c}=await Av.getParticipantsData(O,"section"===D.role?D.section:null);if(p(e),g(t),_(r),T(s),O?(k(l),P(e=>d(d({},e),{},{talentTestEventId:O}))):c&&!A.talentTestEventId&&P(e=>d(d({},e),{},{talentTestEventId:c.id})),"section"===D.role){o(D.section),P(e=>d(d({},e),{},{section:D.section}));const e=(await Av.getChurchesBySection(D.section)).map(e=>"string"===typeof e?e:e.name);S(e)}const u=O?i.filter(e=>e.talentTestEventId===O):i;n(u),a(u)};(0,r.useEffect)(()=>{(()=>{let e=[...t];i&&(e=e.filter(e=>e.section===i)),l&&(e=e.filter(e=>e.churchName===l)),u&&(e=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase()))),a(e)})()},[i,l,u,t]),(0,r.useEffect)(()=>{if(i){const e=m.find(e=>e.name===i),t=(e?e.churches:[]).map(e=>"string"===typeof e?e:e.name);y(t),l&&e&&!t.includes(l)&&c("")}else{const e=m.reduce((e,t)=>[...e,...t.churches.map(e=>"string"===typeof e?e:e.name)],[]);y([...new Set(e)])}},[i,m,l]);const F=async e=>{const{name:t,value:n,type:r,checked:s}=e.target;if("checkbox"===r&&"eventIds"===t){const e=n,t=s?[...A.eventIds,e]:A.eventIds.filter(t=>t!==e);return void P(d(d({},A),{},{eventIds:t}))}const a=d(d({},A),{},{[t]:n});if("gender"===t){const e=A.eventIds.filter(e=>{const t=f.find(t=>t.id===e);return!!t&&("Solo Music (Male)"===t.name?"Male"===n:"Solo Music (Female)"!==t.name||"Female"===n)});a.eventIds=e}if(P(a),"section"===t){const e=(await Av.getChurchesBySection(n)).map(e=>"string"===typeof e?e:e.name);S(e),P(e=>d(d({},e),{},{section:n,churchName:""}))}},U=()=>{P({name:"",age:"",gender:"",email:"",phone:"",eventIds:[],churchName:"",section:""}),S([]),x(!1),j(null)},V=e=>(e.eventIds||(e.eventId?[parseInt(e.eventId)]:[])).map(e=>{const t=f.find(t=>t.id===e);return t?t.name:""}).filter(e=>e).join(", "),z=()=>{if(O){const e="section"===(null===D||void 0===D?void 0:D.role)?"/section/event/".concat(O):"/admin/event/".concat(O);L(e)}else{const e="section"===(null===D||void 0===D?void 0:D.role)?"/section/events":"/admin/events";L(e)}};return(0,Pv.jsxs)("div",{className:"participants-container",children:[(0,Pv.jsxs)("div",{className:"participants-header",children:[(0,Pv.jsxs)("div",{children:[E&&(0,Pv.jsx)("div",{className:"breadcrumb",children:(0,Pv.jsxs)("button",{onClick:z,className:"btn-link",children:["\u2190 ",E.name]})}),(0,Pv.jsx)("h1",{children:"Participants by Location"}),E&&(0,Pv.jsxs)("p",{className:"subtitle",children:["Viewing participants for: ",E.name]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:z,className:"btn-secondary",children:O?"\u2190 Back to Event":"\u2190 Back to Events"}),(0,Pv.jsx)("button",{onClick:()=>{R();const e="section"===(null===D||void 0===D?void 0:D.role)?"/section/login":"/admin/login";(0,r.startTransition)(()=>{L(e)})},className:"btn-logout",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"filters-section",children:[(0,Pv.jsxs)("div",{className:"filter-group",children:[(0,Pv.jsx)("label",{children:"Search Name:"}),(0,Pv.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Search by participant name...",className:"filter-input"})]}),(0,Pv.jsxs)("div",{className:"filter-group",children:[(0,Pv.jsx)("label",{children:"Section:"}),(0,Pv.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"filter-select",disabled:"section"===(null===D||void 0===D?void 0:D.role),children:[(0,Pv.jsx)("option",{value:"",children:"All Sections"}),m.map(e=>(0,Pv.jsx)("option",{value:e.name,children:e.name},e.name))]})]}),(0,Pv.jsxs)("div",{className:"filter-group",children:[(0,Pv.jsx)("label",{children:"Church:"}),(0,Pv.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"filter-select",children:[(0,Pv.jsx)("option",{value:"",children:"All Churches"}),v.map((e,t)=>{const n="string"===typeof e?e:e.name;return(0,Pv.jsx)("option",{value:n,children:n},t)})]})]}),(0,Pv.jsxs)("div",{className:"filter-actions",children:[(i||l||u)&&(0,Pv.jsx)("button",{onClick:()=>{o(""),c(""),h("")},className:"btn-clear",children:"Clear Filters"}),(0,Pv.jsx)("button",{onClick:()=>{const e=window.open("","_blank"),t='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Participants List</title>\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            padding: 20px;\n          }\n          h1 {\n            text-align: center;\n            color: #667eea;\n            margin-bottom: 10px;\n          }\n          .filter-info {\n            text-align: center;\n            margin-bottom: 20px;\n            color: #4a5568;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n          }\n          th, td {\n            border: 1px solid #ddd;\n            padding: 8px;\n            text-align: left;\n          }\n          th {\n            background-color: #667eea;\n            color: white;\n          }\n          tr:nth-child(even) {\n            background-color: #f2f2f2;\n          }\n          .count {\n            margin-top: 20px;\n            font-weight: bold;\n            text-align: right;\n          }\n        </style>\n      </head>\n      <body>\n        <h1>Christ Soldiers Talent Test - Participants List</h1>\n        <div class="filter-info">\n          '.concat(i?"Section: ".concat(i):"All Sections","\n          ").concat(l?" | Church: ".concat(l):"","\n        </div>\n        <table>\n          <thead>\n            <tr>\n              <th>Chest No.</th>\n              <th>Name</th>\n              <th>Age</th>\n              <th>Category</th>\n              <th>Gender</th>\n              <th>Section</th>\n              <th>Church</th>\n              <th>Events</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(s.map(e=>"\n              <tr>\n                <td>".concat(e.chestNumber||"Not Assigned","</td>\n                <td>").concat(e.name,"</td>\n                <td>").concat(e.age,"</td>\n                <td>").concat(e.ageCategory,"</td>\n                <td>").concat(e.gender,"</td>\n                <td>").concat(e.section,"</td>\n                <td>").concat(e.churchName,"</td>\n                <td>").concat(V(e),"</td>\n              </tr>\n            ")).join(""),'\n          </tbody>\n        </table>\n        <div class="count">Total Participants: ').concat(s.length,"</div>\n      </body>\n      </html>\n    ");e.document.write(t),e.document.close(),e.print()},className:"btn-print",children:"Print List"})]})]}),(i||l)&&(0,Pv.jsxs)("div",{className:"active-filters",children:[(0,Pv.jsx)("span",{className:"filter-label",children:"Active Filters:"}),i&&(0,Pv.jsxs)("span",{className:"filter-tag",children:["Section: ",i,(0,Pv.jsx)("button",{onClick:()=>o(""),className:"remove-filter",children:"\xd7"})]}),l&&(0,Pv.jsxs)("span",{className:"filter-tag",children:["Church: ",l,(0,Pv.jsx)("button",{onClick:()=>c(""),className:"remove-filter",children:"\xd7"})]})]}),(0,Pv.jsxs)("div",{className:"action-bar",children:[(0,Pv.jsx)("button",{onClick:()=>{x(!b),b||j(null)},className:"btn btn-primary",disabled:E&&!E.registrationOpen,title:E&&!E.registrationOpen?"Registration is closed for this event":"",children:b?"Cancel":"+ Add New Participant"}),E&&!E.registrationOpen&&(0,Pv.jsx)("span",{className:"registration-closed-notice",children:"\u26a0\ufe0f Registration is closed"}),"admin"===D.role&&(0,Pv.jsx)("button",{onClick:async()=>{const e=t.filter(e=>!e.chestNumber).length;if(0!==e){if(window.confirm("Generate chest numbers for ".concat(e," participant(s)?\n\nChest numbers will be assigned by category:\n- Junior: J-001, J-002...\n- Intermediate: I-001, I-002...\n- Senior: S-001, S-002...\n- Super Senior: SS-001, SS-002..."))){const e=await Av.assignAllChestNumbers();alert("Successfully assigned ".concat(e," chest numbers!")),M()}}else alert("All participants already have chest numbers assigned!")},className:"btn btn-secondary",children:"Generate All Chest Numbers"})]}),b&&(0,Pv.jsxs)("div",{className:"participant-form-card",children:[(0,Pv.jsx)("h2",{children:w?"Edit Participant":"Add New Participant"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseInt(A.age),n=await Av.getAgeCategory(t);if(!n){const{minAge:e,maxAge:t}=await Av.getMinMaxAge();return void alert("Age must be between ".concat(e," and ").concat(t," years"))}if(0===A.eventIds.length)return void alert("Please select at least one event");const r=d(d({},A),{},{age:t,ageCategory:n});w?(await Av.updateParticipant(w.id,r),j(null)):await Av.addParticipant(r),U(),M()},className:"participant-form",children:[(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,Pv.jsx)("input",{type:"text",id:"name",name:"name",value:A.name,onChange:F,required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"age",children:"Age *"}),(0,Pv.jsx)("input",{type:"number",id:"age",name:"age",value:A.age,onChange:F,min:I.minAge,max:I.maxAge,required:!0})]})]}),(0,Pv.jsx)("div",{className:"form-row",children:(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"gender",children:"Gender *"}),(0,Pv.jsxs)("select",{id:"gender",name:"gender",value:A.gender,onChange:F,required:!0,children:[(0,Pv.jsx)("option",{value:"",children:"Select Gender"}),(0,Pv.jsx)("option",{value:"Male",children:"Male"}),(0,Pv.jsx)("option",{value:"Female",children:"Female"})]})]})}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Events * (Select one or more)"}),(0,Pv.jsx)("div",{className:"checkbox-group",children:f.map(e=>{const t="Solo Music (Male)"===e.name&&"Male"!==A.gender||"Solo Music (Female)"===e.name&&"Female"!==A.gender;return(0,Pv.jsxs)("label",{className:"checkbox-label ".concat(t?"disabled":""),title:t?"Select appropriate gender first":"",children:[(0,Pv.jsx)("input",{type:"checkbox",name:"eventIds",value:e.id,checked:A.eventIds.includes(e.id),onChange:F,disabled:t}),e.name]},e.id)})})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Pv.jsx)("input",{type:"email",id:"email",name:"email",value:A.email,onChange:F})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"phone",children:"Phone"}),(0,Pv.jsx)("input",{type:"tel",id:"phone",name:"phone",value:A.phone,onChange:F})]})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"section",children:"Section *"}),(0,Pv.jsxs)("select",{id:"section",name:"section",value:A.section,onChange:F,required:!0,disabled:"section"===(null===D||void 0===D?void 0:D.role),children:[(0,Pv.jsx)("option",{value:"",children:"Select Section"}),m.map(e=>(0,Pv.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{htmlFor:"churchName",children:"Church Name *"}),(0,Pv.jsxs)("select",{id:"churchName",name:"churchName",value:A.churchName,onChange:F,required:!0,disabled:!A.section,children:[(0,Pv.jsx)("option",{value:"",children:A.section?"Select Church":"Select Section First"}),N.map((e,t)=>{const n="string"===typeof e?e:e.name;return(0,Pv.jsx)("option",{value:n,children:n},t)})]})]})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn btn-primary",children:w?"Update Participant":"Add Participant"}),(0,Pv.jsx)("button",{type:"button",onClick:U,className:"btn btn-secondary",children:"Cancel"})]})]})]}),(0,Pv.jsxs)("div",{className:"participants-stats",children:[(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("div",{className:"stat-number",children:s.length}),(0,Pv.jsx)("div",{className:"stat-label",children:"Total Participants"})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("div",{className:"stat-number",children:s.filter(e=>"Male"===e.gender).length}),(0,Pv.jsx)("div",{className:"stat-label",children:"Male"})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("div",{className:"stat-number",children:s.filter(e=>"Female"===e.gender).length}),(0,Pv.jsx)("div",{className:"stat-label",children:"Female"})]}),(0,Pv.jsxs)("div",{className:"stat-card",children:[(0,Pv.jsx)("div",{className:"stat-number",children:s.filter(e=>e.chestNumber).length}),(0,Pv.jsx)("div",{className:"stat-label",children:"With Chest Numbers"})]})]}),(0,Pv.jsx)("div",{className:"participants-table-container",children:(0,Pv.jsxs)("table",{className:"participants-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Chest No."}),(0,Pv.jsx)("th",{children:"Name"}),(0,Pv.jsx)("th",{children:"Age"}),(0,Pv.jsx)("th",{children:"Category"}),(0,Pv.jsx)("th",{children:"Gender"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Church"}),(0,Pv.jsx)("th",{children:"Events"}),(0,Pv.jsx)("th",{children:"Contact"}),(0,Pv.jsx)("th",{children:"Actions"})]})}),(0,Pv.jsx)("tbody",{children:s.map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.chestNumber?(0,Pv.jsx)("span",{className:"chest-number",children:e.chestNumber}):(0,Pv.jsx)("span",{className:"not-assigned",children:"Not Assigned"})}),(0,Pv.jsx)("td",{className:"participant-name",children:e.name}),(0,Pv.jsx)("td",{children:e.age}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"category-badge ".concat(e.ageCategory.toLowerCase().replace(" ","-")),children:e.ageCategory})}),(0,Pv.jsx)("td",{children:e.gender}),(0,Pv.jsx)("td",{children:e.section}),(0,Pv.jsx)("td",{children:e.churchName}),(0,Pv.jsx)("td",{className:"events-cell",children:V(e)}),(0,Pv.jsxs)("td",{className:"contact-cell",children:[(0,Pv.jsx)("div",{children:e.email}),(0,Pv.jsx)("div",{children:e.phone})]}),(0,Pv.jsxs)("td",{className:"actions-cell",children:[(0,Pv.jsx)("button",{onClick:()=>(async e=>{j(e);const t=e.section||"",n=(await Av.getChurchesBySection(t)).map(e=>"string"===typeof e?e:e.name);S(n);const r=e.eventIds?e.eventIds:e.eventId?[parseInt(e.eventId)]:[];P({name:e.name,age:e.age.toString(),gender:e.gender,email:e.email,phone:e.phone,eventIds:r,churchName:e.churchName,section:t}),x(!0),window.scrollTo({top:0,behavior:"smooth"})})(e),className:"btn-edit",title:"Edit participant",children:"Edit"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{window.confirm("Are you sure you want to delete this participant?")&&(await Av.deleteParticipant(e),M())})(e.id),className:"btn-delete",title:"Delete participant",children:"Delete"}),"admin"===D.role&&(e.chestNumber?(0,Pv.jsx)("button",{onClick:()=>(async e=>{window.confirm("Are you sure you want to remove the chest number?")&&(await Av.removeChestNumber(e),M())})(e.id),className:"btn-remove",title:"Remove chest number",children:"Remove #"}):(0,Pv.jsx)("button",{onClick:()=>(async e=>{const t=await Av.assignChestNumber(e);t&&(alert("Chest number ".concat(t," assigned successfully!")),M())})(e.id),className:"btn-assign",title:"Assign chest number",children:"Assign #"}))]})]},e.id))})]})})]})},cy=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[f,g]=(0,r.useState)({individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}),[v,y]=(0,r.useState)(""),[b,x]=(0,r.useState)(""),[w,j]=(0,r.useState)([]),[N,S]=(0,r.useState)([]),[E,k]=(0,r.useState)([]),[C,T]=(0,r.useState)(!1),{user:I,logout:_}=Rv(),A=Ee(),P=null===(e=je().state)||void 0===e?void 0:e.eventId;(0,r.useEffect)(()=>{I&&"admin"===I.role?D():A("/admin/login")},[I,A]);const D=async()=>{const{events:e,sections:t,participants:r,scores:s,groupTeams:i,groupEvents:l,pointsConfig:u}=await Av.getLeaderboardData();a(e),o(t),n(r),c(s),h(i),p(l),g(u);const d=[...new Set(r.map(e=>e.churchName).filter(Boolean))].sort();k(d)},R=async e=>{const t=await Av.getDeclaredResults(),n=await Av.getGroupEventLocks(),r=await Av.getJudges(),s=i.find(t=>t.name===e);if(!s)return void S([]);const a=[];for(const i of m){if(!t.some(e=>String(e.groupEventId)===String(i.id)))continue;let e=!1;if(e="quiz"===i.scoringType?n.some(e=>String(e.groupEventId)===String(i.id)&&e.locked):r.length>0&&r.every(e=>n.some(t=>t.judgeName===e.username&&String(t.groupEventId)===String(i.id)&&t.locked)),!e)continue;u.filter(e=>String(e.groupEventId)===String(i.id)&&String(e.sectionId)===String(s.id)).forEach(e=>{const t=e.scores||[];let n=0,r=0;if("quiz"===i.scoringType){const e=t.find(e=>void 0!==e.score&&null!==e.score);n=e?parseFloat(e.score):0,r=e?1:0}else t.forEach(e=>{void 0!==e.score&&null!==e.score&&(n+=parseFloat(e.score),r++)});const s=r>0?"quiz"===i.scoringType?n:n/r:0,o=u.filter(e=>String(e.groupEventId)===String(i.id)).map(e=>{const t=e.scores||[];let n=0,r=0;if("quiz"===i.scoringType){const e=t.find(e=>void 0!==e.score&&null!==e.score);n=e?parseFloat(e.score):0,r=e?1:0}else t.forEach(e=>{void 0!==e.score&&null!==e.score&&(n+=parseFloat(e.score),r++)});return{teamId:e.id,avg:r>0?"quiz"===i.scoringType?n:n/r:0}});o.sort((e,t)=>t.avg-e.avg);const l=o.findIndex(t=>t.teamId===e.id)+1;let c=0;1===l?c=f.group.first:2===l?c=f.group.second:3===l&&(c=f.group.third),l<=3&&a.push({eventName:i.name,teamName:e.teamName,rank:l,position:1===l?"1st":2===l?"2nd":"3rd",points:c,averageScore:s.toFixed(2)})})}S(a)};(0,r.useEffect)(()=>{(()=>{if(v){const e=t.filter(e=>e.section===v),n=[...new Set(e.map(e=>e.churchName).filter(Boolean))].sort();k(n)}else{const e=[...new Set(t.map(e=>e.churchName).filter(Boolean))].sort();k(e)}})()},[v]);return(0,Pv.jsxs)("div",{className:"individual-results-view",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsxs)("h1",{children:["\ud83d\udd0d Individual Results",v&&(0,Pv.jsxs)("span",{children:[" - ",v]}),b&&(0,Pv.jsxs)("span",{children:[" (",b,")"]})]}),(0,Pv.jsx)("p",{children:v||b?"Showing results for ".concat(v||"All Sections").concat(b?" - ".concat(b):""):"Filter and view detailed individual results by section and church"})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{P?A("/admin/leaderboard",{state:{eventId:P}}):A("/admin/leaderboard")},className:"btn-secondary",children:"\u2190 Back to Leaderboard"}),(0,Pv.jsx)("button",{onClick:()=>{_(),(0,r.startTransition)(()=>{A("/admin/login")})},className:"btn-secondary",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"card",children:[(0,Pv.jsxs)("div",{className:"filter-controls",children:[(0,Pv.jsxs)("div",{className:"filter-group",children:[(0,Pv.jsx)("label",{htmlFor:"sectionFilter",children:"Section:"}),(0,Pv.jsxs)("select",{id:"sectionFilter",value:v,onChange:e=>{y(e.target.value),x("")},className:"filter-select",children:[(0,Pv.jsx)("option",{value:"",children:"Select Section"}),i.map(e=>(0,Pv.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,Pv.jsxs)("div",{className:"filter-group",children:[(0,Pv.jsx)("label",{htmlFor:"churchFilter",children:"Church:"}),(0,Pv.jsxs)("select",{id:"churchFilter",value:b,onChange:e=>x(e.target.value),className:"filter-select",disabled:!v,children:[(0,Pv.jsx)("option",{value:"",children:"All Churches"}),E.map(e=>(0,Pv.jsx)("option",{value:e,children:e},e))]})]}),(0,Pv.jsx)("button",{onClick:async()=>{if(!v&&!b)return void j([]);T(!0);const[e,n,r]=await Promise.all([Av.getDeclaredResults(),Av.getData(),Av.getJudges()]),a=n.events||s;let i=t;v&&(i=i.filter(e=>e.section===v)),b&&(i=i.filter(e=>e.churchName===b));const o={};for(const s of i){const n=s.eventIds||(s.eventId?[parseInt(s.eventId)]:[]);for(const r of n){const n=s.ageCategory;if(!e.some(e=>e.eventId===r&&e.category===n))continue;if(!await Av.areAllJudgesLocked(r,n))continue;const i=t.filter(e=>(e.eventIds||(e.eventId?[parseInt(e.eventId)]:[])).includes(r)&&e.ageCategory===n),c=i.map(e=>{const t=l.filter(t=>t.participantId===e.id&&t.eventId===r).map(e=>e.totalScore),n=t.reduce((e,t)=>e+t,0),s=t.length>0?n/t.length:0;return{participantId:e.id,averageScore:s}});c.sort((e,t)=>t.averageScore-e.averageScore),c.forEach((e,t)=>{if(e.participantId===s.id){const e=t+1;let n=0;1===e?n=f.individual.first:2===e?n=f.individual.second:3===e&&(n=f.individual.third),o[s.id]||(o[s.id]={participant:s,totalPoints:0,eventResults:[]}),o[s.id].totalPoints+=n;const i=a.find(e=>e.id===r);i&&e<=3&&o[s.id].eventResults.push({eventName:i.name,rank:e,position:1===e?"1st":2===e?"2nd":"3rd"})}})}}const c=Object.values(o).sort((e,t)=>t.totalPoints-e.totalPoints).map((e,t)=>d(d({},e),{},{rank:t+1}));j(c),v&&!b?await R(v):S([]),T(!1)},className:"action-button search-button",disabled:!v&&!b,children:"\ud83d\udd0d Search Results"}),(0,Pv.jsx)("button",{onClick:()=>{const e=w,t=v||b?" - ".concat(v||"All Sections").concat(b?" - ".concat(b):""):"",n=window.open("","_blank"),r="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Individual Results".concat(t,"</title>\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            padding: 20px;\n            max-width: 1200px;\n            margin: 0 auto;\n          }\n          h1 {\n            text-align: center;\n            color: #2d3748;\n            margin-bottom: 10px;\n          }\n          .subtitle {\n            text-align: center;\n            color: #718096;\n            margin-bottom: 20px;\n          }\n          .print-info {\n            text-align: center;\n            color: #a0aec0;\n            font-size: 12px;\n            margin-bottom: 30px;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n          }\n          th, td {\n            border: 1px solid #cbd5e0;\n            padding: 10px;\n            text-align: left;\n          }\n          th {\n            background: #edf2f7;\n            font-weight: 600;\n            color: #2d3748;\n          }\n          tr:nth-child(even) {\n            background: #f7fafc;\n          }\n          .rank-1 { background: #fef3c7 !important; }\n          .rank-2 { background: #e5e7eb !important; }\n          .rank-3 { background: #fed7aa !important; }\n          .rank-number {\n            font-weight: bold;\n            color: #667eea;\n          }\n          .total-points {\n            font-weight: bold;\n            color: #48bb78;\n          }\n          .medal {\n            font-size: 18px;\n            margin-left: 5px;\n          }\n          tfoot {\n            background: #edf2f7;\n            font-weight: bold;\n          }\n          tfoot td {\n            border-top: 3px solid #2d3748;\n            padding: 15px 10px;\n          }\n          .total-label {\n            text-align: right;\n            font-size: 1.1rem;\n            color: #2d3748;\n          }\n          .total-value {\n            font-size: 1.2rem;\n            color: #48bb78;\n          }\n          .group-results-header {\n            background: #667eea;\n            color: white;\n          }\n          .group-result-row {\n            background: #f0f4ff !important;\n          }\n          @media print {\n            body { padding: 10px; }\n            .no-print { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <h1>\ud83c\udfc6 Individual Results").concat(t,'</h1>\n        <div class="subtitle">Christ Soldiers Talent Test</div>\n        <div class="print-info">Generated on ').concat((new Date).toLocaleString(),"</div>\n        \n        <table>\n          <thead>\n            <tr>\n              <th>Rank</th>\n              <th>Chest No.</th>\n              <th>Name</th>\n              <th>Age</th>\n              <th>Category</th>\n              <th>Section</th>\n              <th>Church</th>\n              <th>Event Results</th>\n              <th>Total Points</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.map(e=>'\n              <tr class="'.concat(e.rank<=3?"rank-".concat(e.rank):"",'">\n                <td>\n                  <span class="rank-number">#').concat(e.rank,"</span>\n                  ").concat(1===e.rank?'<span class="medal">\ud83e\udd47</span>':"","\n                  ").concat(2===e.rank?'<span class="medal">\ud83e\udd48</span>':"","\n                  ").concat(3===e.rank?'<span class="medal">\ud83e\udd49</span>':"","\n                </td>\n                <td>").concat(e.participant.chestNumber||"N/A","</td>\n                <td><strong>").concat(e.participant.name,"</strong></td>\n                <td>").concat(e.participant.age,"</td>\n                <td>").concat(e.participant.ageCategory,"</td>\n                <td>").concat(e.participant.section,"</td>\n                <td>").concat(e.participant.churchName||"N/A","</td>\n                <td>\n                  ").concat(e.eventResults&&e.eventResults.length>0?e.eventResults.map(e=>"".concat(e.eventName," (").concat(e.position,")")).join(", "):"No achievements",'\n                </td>\n                <td><span class="total-points">').concat(e.totalPoints,"</span></td>\n              </tr>\n            ")).join(""),"\n            \n            ").concat(v&&!b&&N.length>0?'\n              <tr class="group-results-header">\n                <td colspan="9" style="padding: 12px; font-weight: bold; text-align: center;">\n                  \ud83d\udc65 Group Event Results for '.concat(v,"\n                </td>\n              </tr>\n              ").concat(N.map(e=>'\n                <tr class="group-result-row">\n                  <td>\n                    <span class="rank-number">#'.concat(e.rank,"</span>\n                    ").concat(1===e.rank?'<span class="medal">\ud83e\udd47</span>':"","\n                    ").concat(2===e.rank?'<span class="medal">\ud83e\udd48</span>':"","\n                    ").concat(3===e.rank?'<span class="medal">\ud83e\udd49</span>':"",'\n                  </td>\n                  <td colspan="2"><strong>\ud83d\udc65 ').concat(e.teamName,'</strong></td>\n                  <td colspan="5">').concat(e.eventName,'</td>\n                  <td><span class="total-points">').concat(e.points,"</span></td>\n                </tr>\n              ")).join(""),"\n            "):"",'\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan="8" class="total-label">\n                ').concat(v&&b?"Total for ".concat(b," (").concat(v,")"):v?"Total for ".concat(v," Section"):b?"Total for ".concat(b):"Grand Total",'\n              </td>\n              <td class="total-value">\n                ').concat(e.reduce((e,t)=>e+t.totalPoints,0)+(v&&!b?N.reduce((e,t)=>e+t.points,0):0)," pts\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n        \n        <script>\n          window.onload = function() {\n            window.print();\n          };\n        <\/script>\n      </body>\n      </html>\n    ");n.document.write(r),n.document.close()},className:"action-button print-button",disabled:0===w.length,children:"\ud83d\udda8\ufe0f Print Results"})]}),(v||b)&&(0,Pv.jsxs)("div",{className:"active-filters",children:[(0,Pv.jsx)("span",{className:"filter-label",children:"Active Filters:"}),v&&(0,Pv.jsxs)("span",{className:"filter-badge",children:["Section: ",v,(0,Pv.jsx)("button",{onClick:()=>y(""),className:"remove-filter",children:"\xd7"})]}),b&&(0,Pv.jsxs)("span",{className:"filter-badge",children:["Church: ",b,(0,Pv.jsx)("button",{onClick:()=>x(""),className:"remove-filter",children:"\xd7"})]})]}),C&&(0,Pv.jsx)("div",{className:"loading-message",children:(0,Pv.jsx)("p",{children:"Loading results... Please wait."})}),!C&&0===w.length&&(v||b)&&(0,Pv.jsx)("div",{className:"no-data",children:'No results found. Click "Search Results" to load data.'}),!C&&0===w.length&&!v&&!b&&(0,Pv.jsx)("div",{className:"no-data",children:'Please select a section or church filter and click "Search Results".'}),!C&&w.length>0&&(0,Pv.jsx)("div",{className:"table-container",children:(0,Pv.jsxs)("table",{className:"table leaderboard-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Rank"}),(0,Pv.jsx)("th",{children:"Chest No."}),(0,Pv.jsx)("th",{children:"Name & Achievements"}),(0,Pv.jsx)("th",{children:"Age"}),(0,Pv.jsx)("th",{children:"Category"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Church"}),(0,Pv.jsx)("th",{children:"Total Points"})]})}),(0,Pv.jsxs)("tbody",{children:[w.map(e=>(0,Pv.jsxs)("tr",{className:e.rank<=3?"rank-".concat(e.rank):"",children:[(0,Pv.jsxs)("td",{children:[(0,Pv.jsxs)("strong",{className:"rank-number",children:["#",e.rank]}),1===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd47"}),2===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd48"}),3===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd49"})]}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"chest-number",children:e.participant.chestNumber||"N/A"})}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("div",{className:"participant-info",children:[(0,Pv.jsx)("strong",{className:"participant-name",children:e.participant.name}),e.eventResults&&e.eventResults.length>0&&(0,Pv.jsx)("div",{className:"event-achievements",children:e.eventResults.map((e,t)=>(0,Pv.jsxs)("span",{className:"achievement-badge",children:[e.eventName," - ",e.position]},t))})]})}),(0,Pv.jsx)("td",{children:e.participant.age}),(0,Pv.jsx)("td",{children:(0,Pv.jsx)("span",{className:"category-badge",children:e.participant.ageCategory})}),(0,Pv.jsx)("td",{children:e.participant.section}),(0,Pv.jsx)("td",{className:"church-cell",children:e.participant.churchName}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("span",{className:"points-badge-lg",children:[e.totalPoints," pts"]})})]},e.participant.id)),v&&!b&&N.length>0&&(0,Pv.jsxs)(Pv.Fragment,{children:[(0,Pv.jsx)("tr",{className:"group-results-header",children:(0,Pv.jsxs)("td",{colSpan:"8",style:{padding:"12px",fontWeight:"bold",textAlign:"center"},children:["\ud83d\udc65 Group Event Results for ",v]})}),N.map((e,t)=>(0,Pv.jsxs)("tr",{className:"group-result-row",children:[(0,Pv.jsxs)("td",{children:[(0,Pv.jsxs)("strong",{className:"rank-number",children:["#",e.rank]}),1===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd47"}),2===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd48"}),3===e.rank&&(0,Pv.jsx)("span",{className:"medal",children:"\ud83e\udd49"})]}),(0,Pv.jsx)("td",{colSpan:"2",children:(0,Pv.jsxs)("strong",{children:["\ud83d\udc65 ",e.teamName]})}),(0,Pv.jsx)("td",{colSpan:"4",children:e.eventName}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("span",{className:"points-badge-lg",children:[e.points," pts"]})})]},"group-".concat(t)))]})]}),(0,Pv.jsx)("tfoot",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{colSpan:"7",className:"total-label",children:v&&b?"Total for ".concat(b," (").concat(v,")"):v?"Total for ".concat(v," Section"):b?"Total for ".concat(b):"Grand Total"}),(0,Pv.jsx)("td",{children:(0,Pv.jsxs)("span",{className:"total-value",children:[w.reduce((e,t)=>e+t.totalPoints,0)+(v&&!b?N.reduce((e,t)=>e+t.points,0):0)," pts"]})})]})})]})})]})]})};const uy=new class{async migrateAll(){try{console.log("Starting data migration from localStorage to Firebase...");const e={events:[],groupEvents:[],sections:[],participants:[],groupTeams:[],judges:this.getJudgesFromStorage(),results:this.getResultsFromStorage(),pointsConfig:{}};return console.log("Mock data retrieved:",{events:e.events.length,groupEvents:e.groupEvents.length,sections:e.sections.length,participants:e.participants.length,groupTeams:e.groupTeams.length,judges:e.judges.length,results:e.results.length}),await Av.migrateMockData(e),console.log("\u2705 Data migration completed successfully!"),{success:!0,message:"All data migrated to Firebase successfully",data:e}}catch(e){return console.error("\u274c Data migration failed:",e),{success:!1,message:"Migration failed: "+e.message,error:e}}}getJudgesFromStorage(){const e=JSON.parse(localStorage.getItem("christSoldiersData")||"{}"),t=[];return e.judgeCredentials&&e.judgeCredentials.forEach((n,r)=>{t.push({id:"judge".concat(r+1),username:n.username,password:n.password,name:"Judge ".concat(r+1),lockedScores:this.getLockedScoresForJudge(e,"judge".concat(r+1))})}),t}getLockedScoresForJudge(e,t){const n=e.judgeLocks||{},r=e.groupEventLocks||{},s=[];return Object.keys(n).forEach(e=>{n[e]&&n[e][t]&&s.push(e)}),Object.keys(r).forEach(e=>{r[e]&&r[e][t]&&s.push("group-".concat(e))}),s}getResultsFromStorage(){const e=JSON.parse(localStorage.getItem("christSoldiersData")||"{}"),t=e.scores||{},n=[];Object.keys(t).forEach(e=>{const[r,s,a]=e.split("-"),i=t[e];i&&Object.keys(i).forEach(e=>{n.push({judgeId:e,participantId:a,eventId:parseInt(r),category:s,score:i[e],type:"individual",createdAt:(new Date).toISOString()})})});return(e.groupTeams||[]).forEach(e=>{e.scores&&Array.isArray(e.scores)&&e.scores.forEach(t=>{n.push({judgeId:t.judgeId,teamId:e.id,eventId:e.groupEventId,section:e.section,score:t.score,type:"group",createdAt:(new Date).toISOString()})})}),n}async verifyMigration(){try{console.log("Verifying migration...");const e=await Av.getEvents(),t=await Av.getParticipants(),n=await Av.getSections(),r=await Av.getJudges(),s=await Av.getResults(),a=await Av.getGroupTeams();return console.log("Firebase data count:",{events:e.length,participants:t.length,sections:n.length,judges:r.length,results:s.length,groupTeams:a.length}),{success:!0,counts:{events:e.length,participants:t.length,sections:n.length,judges:r.length,results:s.length,groupTeams:a.length}}}catch(e){return console.error("Verification failed:",e),{success:!1,error:e.message}}}},dy=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(null),o=Ee();return(0,Pv.jsxs)("div",{className:"migration-container",children:[(0,Pv.jsxs)("div",{className:"migration-header",children:[(0,Pv.jsx)("h1",{children:"Data Migration Utility"}),(0,Pv.jsx)("button",{onClick:()=>o("/admin/dashboard"),className:"btn-back",children:"Back to Dashboard"})]}),(0,Pv.jsxs)("div",{className:"migration-info",children:[(0,Pv.jsx)("h2",{children:"\u26a0\ufe0f Important Information"}),(0,Pv.jsxs)("ul",{children:[(0,Pv.jsx)("li",{children:"This utility migrates all data from localStorage to Firebase Firestore"}),(0,Pv.jsx)("li",{children:"Includes: Events, Participants, Sections, Judges, Results, and Configuration"}),(0,Pv.jsx)("li",{children:"This is a one-time operation - data will be copied, not moved"}),(0,Pv.jsxs)("li",{children:["Make sure you have configured Firebase in ",(0,Pv.jsx)("code",{children:"src/config/firebase.js"})]}),(0,Pv.jsx)("li",{children:"Your localStorage data will remain intact"})]})]}),(0,Pv.jsxs)("div",{className:"migration-actions",children:[(0,Pv.jsx)("button",{onClick:async()=>{if(window.confirm("This will migrate all data from localStorage to Firebase. Continue?")){s(!0),t("Starting migration...");try{const e=await uy.migrateAll();if(i(e),e.success){t("\u2705 Migration completed successfully!"),t("Verifying migration...");const n=await uy.verifyMigration();n.success&&(t("\u2705 Migration verified successfully!"),i(d(d({},e),{},{verification:n})))}else t("\u274c Migration failed: "+e.message)}catch(e){t("\u274c Error: "+e.message),i({success:!1,error:e.message})}finally{s(!1)}}},disabled:n,className:"btn-migrate",children:n?"Migrating...":"Start Migration"}),(0,Pv.jsx)("button",{onClick:async()=>{s(!0),t("Verifying data in Firebase...");try{const e=await uy.verifyMigration();i(e),e.success?t("\u2705 Verification completed!"):t("\u274c Verification failed")}catch(e){t("\u274c Error: "+e.message)}finally{s(!1)}},disabled:n,className:"btn-verify",children:"Verify Firebase Data"})]}),e&&(0,Pv.jsxs)("div",{className:"migration-status ".concat(!1===(null===a||void 0===a?void 0:a.success)?"error":"success"),children:[(0,Pv.jsx)("h3",{children:"Status"}),(0,Pv.jsx)("p",{children:e})]}),a&&a.verification&&(0,Pv.jsxs)("div",{className:"migration-results",children:[(0,Pv.jsx)("h3",{children:"Migration Summary"}),(0,Pv.jsxs)("table",{children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Collection"}),(0,Pv.jsx)("th",{children:"Count"})]})}),(0,Pv.jsxs)("tbody",{children:[(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:"Events"}),(0,Pv.jsx)("td",{children:a.verification.counts.events})]}),(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:"Participants"}),(0,Pv.jsx)("td",{children:a.verification.counts.participants})]}),(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:"Sections"}),(0,Pv.jsx)("td",{children:a.verification.counts.sections})]}),(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:"Judges"}),(0,Pv.jsx)("td",{children:a.verification.counts.judges})]}),(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:"Group Teams"}),(0,Pv.jsx)("td",{children:a.verification.counts.groupTeams})]}),(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:"Results"}),(0,Pv.jsx)("td",{children:a.verification.counts.results})]})]})]})]}),(0,Pv.jsxs)("div",{className:"migration-instructions",children:[(0,Pv.jsx)("h3",{children:"Next Steps After Migration"}),(0,Pv.jsxs)("ol",{children:[(0,Pv.jsx)("li",{children:'Verify all data has been migrated correctly using the "Verify" button'}),(0,Pv.jsx)("li",{children:"Update all components to use FirebaseService instead of StorageService"}),(0,Pv.jsx)("li",{children:"Test all CRUD operations to ensure they work with Firebase"}),(0,Pv.jsx)("li",{children:"Once confirmed, you can remove the old localStorage code"})]})]})]})},hy=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)("section"),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{p();const e=setInterval(()=>{p()},6e5);let t;return h&&(t=setInterval(()=>{l(!0),setTimeout(()=>{i(e=>"section"===e?"church":"section"),l(!1)},500)},15e3)),()=>{clearInterval(e),t&&clearInterval(t)}},[h]);const p=async()=>{const{participants:e,scores:n,sections:r,declaredResults:a,groupTeams:i,groupEvents:o,pointsConfig:l,groupEventLocks:c,judges:u}=await _v.getPresentationData(),h=await _v.getJudgeLocks(),m={},p=(e,t)=>{const r="".concat(e,"-").concat(t);if(void 0!==m[r])return m[r];const s=[...new Set(n.filter(t=>t.eventId===e).map(e=>e.judgeName))];if(0===s.length)return m[r]=!1,!1;const a=s.every(n=>h.some(r=>r.judgeName===n&&r.eventId===e&&r.category===t&&r.locked));return m[r]=a,a},f={};for(const t of e){const r=t.eventIds||(t.eventId?[parseInt(t.eventId)]:[]);for(const s of r){const r=t.ageCategory;if(!a.some(e=>e.eventId===s&&e.category===r))continue;if(!p(s,r))continue;const i=e.filter(e=>(e.eventIds||(e.eventId?[parseInt(e.eventId)]:[])).includes(s)&&e.ageCategory===r),o=i.map(e=>{const t=n.filter(t=>t.participantId===e.id&&t.eventId===s).map(e=>e.totalScore),r=t.reduce((e,t)=>e+t,0),a=t.length>0?r/t.length:0;return{participantId:e.id,averageScore:a}});o.sort((e,t)=>t.averageScore-e.averageScore),o.forEach((e,n)=>{if(e.participantId===t.id){const e=n+1;let r=0;1===e?r=l.individual.first:2===e?r=l.individual.second:3===e&&(r=l.individual.third),f[t.id]||(f[t.id]={participant:t,totalPoints:0}),f[t.id].totalPoints+=r}})}}const g={};r.forEach(e=>{g[e.name]={section:e.name,totalPoints:0,participantCount:0,groupPoints:0}}),Object.values(f).forEach(e=>{let{participant:t,totalPoints:n}=e;t.section&&g[t.section]&&(g[t.section].totalPoints+=n,g[t.section].participantCount+=1)}),o.forEach(e=>{if(!a.some(t=>String(t.groupEventId)===String(e.id)))return;let t=!1;if(t="quiz"===e.scoringType?c.some(t=>String(t.groupEventId)===String(e.id)&&t.locked):u.length>0&&u.every(t=>c.some(n=>n.judgeName===t.username&&String(n.groupEventId)===String(e.id)&&n.locked)),!t)return;const n=i.filter(t=>String(t.groupEventId)===String(e.id)).map(t=>{const n=t.scores||[];let r=0,s=0;if("quiz"===e.scoringType){const e=n.find(e=>void 0!==e.score&&null!==e.score);r=e?parseFloat(e.score):0,s=e?1:0}else n.forEach(e=>{void 0!==e.score&&null!==e.score&&(r+=parseFloat(e.score),s++)});const a=s>0?"quiz"===e.scoringType?r:r/s:0;return{teamId:t.id,sectionId:t.sectionId,averageScore:a}});n.sort((e,t)=>t.averageScore-e.averageScore),n.forEach((e,t)=>{const n=t+1;let s=0;1===n?s=l.group.first:2===n?s=l.group.second:3===n&&(s=l.group.third);const a=r.find(t=>t.id===e.sectionId);a&&g[a.name]&&(g[a.name].groupPoints+=s,g[a.name].totalPoints+=s)})});const v=Object.values(g).filter(e=>e.participantCount>0||e.groupPoints>0).sort((e,t)=>t.totalPoints-e.totalPoints).map((e,t)=>d(d({},e),{},{rank:t+1}));t(v);const y={};Object.values(f).forEach(e=>{let{participant:t,totalPoints:n}=e;t.churchName&&(y[t.churchName]||(y[t.churchName]={church:t.churchName,section:t.section,totalPoints:0,participantCount:0}),y[t.churchName].totalPoints+=n,y[t.churchName].participantCount+=1)});const b=Object.values(y).sort((e,t)=>t.totalPoints-e.totalPoints).map((e,t)=>d(d({},e),{},{rank:t+1}));s(b)},f=e=>1===e?"\ud83e\udd47":2===e?"\ud83e\udd48":3===e?"\ud83e\udd49":"",g=e=>{l(!0),setTimeout(()=>{i(e),l(!1),u(!1)},300)};return(0,Pv.jsxs)("div",{className:"presentation-view",children:[(0,Pv.jsx)("button",{className:"menu-toggle",onClick:()=>{u(!c)},children:"\u2699\ufe0f"}),c&&(0,Pv.jsxs)("div",{className:"control-menu",children:[(0,Pv.jsxs)("div",{className:"menu-header",children:[(0,Pv.jsx)("h3",{children:"Presentation Controls"}),(0,Pv.jsx)("button",{className:"close-menu",onClick:()=>u(!1),children:"\xd7"})]}),(0,Pv.jsxs)("div",{className:"menu-section",children:[(0,Pv.jsx)("h4",{children:"View"}),(0,Pv.jsx)("button",{className:"menu-btn ".concat("section"===a?"active":""),onClick:()=>g("section"),children:"\ud83d\udccd Section Leaderboard"}),(0,Pv.jsx)("button",{className:"menu-btn ".concat("church"===a?"active":""),onClick:()=>g("church"),children:"\u26ea Church Leaderboard"})]}),(0,Pv.jsxs)("div",{className:"menu-section",children:[(0,Pv.jsx)("h4",{children:"Auto-Switch"}),(0,Pv.jsxs)("label",{className:"switch",children:[(0,Pv.jsx)("input",{type:"checkbox",checked:h,onChange:e=>m(e.target.checked)}),(0,Pv.jsx)("span",{className:"slider"})]}),(0,Pv.jsx)("span",{className:"switch-label",children:h?"Enabled (15s)":"Disabled"})]}),(0,Pv.jsx)("div",{className:"menu-section",children:(0,Pv.jsx)("button",{className:"menu-btn refresh-btn",onClick:()=>{p(),u(!1)},children:"\ud83d\udd04 Refresh Data"})}),(0,Pv.jsx)("div",{className:"menu-info",children:(0,Pv.jsx)("small",{children:"Auto-refresh: Every 10 minutes"})})]}),(0,Pv.jsxs)("div",{className:"presentation-header",children:[(0,Pv.jsx)("h1",{className:"presentation-title",children:"\ud83c\udfc6 Christ Soldiers Talent Test 2026 \ud83c\udfc6"}),(0,Pv.jsx)("h2",{className:"presentation-subtitle",children:"Leaderboard"})]}),(0,Pv.jsx)("div",{className:"presentation-content ".concat(o?"fade-out":"fade-in"),children:"section"===a?(0,Pv.jsxs)("div",{className:"leaderboard-section",children:[(0,Pv.jsx)("h2",{className:"section-title",children:"\ud83d\udccd Section Leaderboard"}),(0,Pv.jsx)("div",{className:"leaderboard-grid",children:e.map((e,t)=>(0,Pv.jsxs)("div",{className:"leaderboard-item rank-".concat(e.rank," slide-in"),style:{animationDelay:"".concat(.1*t,"s")},children:[(0,Pv.jsxs)("div",{className:"rank-badge",children:[(0,Pv.jsxs)("span",{className:"rank-number",children:["#",e.rank]}),(0,Pv.jsx)("span",{className:"medal",children:f(e.rank)})]}),(0,Pv.jsxs)("div",{className:"item-content",children:[(0,Pv.jsx)("h3",{className:"item-name",children:e.section}),(0,Pv.jsxs)("div",{className:"points-breakdown",children:[(0,Pv.jsxs)("span",{className:"individual-points",children:["Individual: ",e.totalPoints-e.groupPoints]}),(0,Pv.jsxs)("span",{className:"group-points",children:["Group: ",e.groupPoints]})]})]}),(0,Pv.jsxs)("div",{className:"total-points",children:[(0,Pv.jsx)("span",{className:"points-value",children:e.totalPoints}),(0,Pv.jsx)("span",{className:"points-label",children:"points"})]})]},e.section))})]}):(0,Pv.jsxs)("div",{className:"leaderboard-section",children:[(0,Pv.jsx)("h2",{className:"section-title",children:"\u26ea Church Leaderboard"}),(0,Pv.jsx)("div",{className:"leaderboard-grid",children:n.slice(0,10).map((e,t)=>(0,Pv.jsxs)("div",{className:"leaderboard-item rank-".concat(e.rank," slide-in"),style:{animationDelay:"".concat(.1*t,"s")},children:[(0,Pv.jsxs)("div",{className:"rank-badge",children:[(0,Pv.jsxs)("span",{className:"rank-number",children:["#",e.rank]}),(0,Pv.jsx)("span",{className:"medal",children:f(e.rank)})]}),(0,Pv.jsxs)("div",{className:"item-content",children:[(0,Pv.jsx)("h3",{className:"item-name",children:e.church}),(0,Pv.jsx)("p",{className:"item-section",children:e.section})]}),(0,Pv.jsxs)("div",{className:"total-points",children:[(0,Pv.jsx)("span",{className:"points-value",children:e.totalPoints}),(0,Pv.jsx)("span",{className:"points-label",children:"points"})]})]},e.church))})]})}),(0,Pv.jsx)("div",{className:"presentation-footer",children:(0,Pv.jsxs)("div",{className:"footer-animation",children:[(0,Pv.jsx)("span",{className:"sparkle",children:"\u2728"}),(0,Pv.jsx)("span",{className:"footer-text",children:"Congratulations to all participants!"}),(0,Pv.jsx)("span",{className:"sparkle",children:"\u2728"})]})})]})};const my=new class{async migrateAll(){try{console.log("\ud83d\ude80 Starting mock data migration to Firebase...");const e=this.generateMockData();return console.log("\ud83d\udcca Mock data generated:",{events:e.events.length,groupEvents:e.groupEvents.length,sections:e.sections.length,participants:e.participants.length,groupTeams:e.groupTeams.length,scores:e.results.length}),await this.migrateData(e),console.log("\u2705 Mock data migration completed successfully!"),{success:!0,message:"All mock data migrated to Firebase successfully",data:e}}catch(e){return console.error("\u274c Mock data migration failed:",e),{success:!1,message:"Migration failed: "+e.message,error:e}}}generateMockData(){const e=this.generateEvents(),t=this.generateGroupEvents(),n=this.generateSections(),r=this.generateParticipants(n);return{events:e,groupEvents:t,sections:n,participants:r,groupTeams:this.generateGroupTeams(n,t),results:this.generateScores(r,e),pointsConfig:this.generatePointsConfig()}}generateEvents(){return[{id:1,name:"Solo Music (Male)",description:"Individual singing performance for male participants",ageGroups:["Junior","Intermediate","Senior","Super Senior"],scoringType:"all-judges"},{id:2,name:"Solo Music (Female)",description:"Individual singing performance for female participants",ageGroups:["Junior","Intermediate","Senior","Super Senior"],scoringType:"all-judges"},{id:3,name:"Story Writing",description:"Creative story writing competition",ageGroups:["Junior","Intermediate","Senior","Super Senior"],scoringType:"single-judge"},{id:4,name:"Poem Writing",description:"Poetry composition competition",ageGroups:["Junior","Intermediate","Senior","Super Senior"],scoringType:"single-judge"},{id:5,name:"Bible Verse Competition",description:"Scripture memorization and recitation",ageGroups:["Junior","Intermediate","Senior","Super Senior"],scoringType:"all-judges"}]}generateGroupEvents(){return[{id:1,name:"Group Song",description:"Team singing performance - one team per section",maxParticipants:10,scoringType:"judge"},{id:2,name:"Group Bible Quiz",description:"Team Bible quiz competition - one team per section",maxParticipants:5,scoringType:"quiz",questionsCount:50}]}generateSections(){return[{id:1,name:"Pathanapuram",churches:[{name:"Bethel Gospel Assembly Church - Pathanapuram",pastor:{name:"Rev. John",contact:"9876543210"}},{name:"Grace Gospel Church - Pathanapuram",pastor:{name:"Rev. Paul",contact:"9876543211"}},{name:"Zion Assembly - Pathanapuram",pastor:{name:"Rev. Peter",contact:"9876543212"}},{name:"Faith Gospel Church - Pathanapuram",pastor:{name:"Rev. James",contact:"9876543213"}}],presbyter:{name:"Elder Thomas",contact:"9876543214"}},{id:2,name:"Kollam",churches:[{name:"Bethel Gospel Assembly Church - Kollam",pastor:{name:"Rev. David",contact:"9876543215"}},{name:"Living Word Church - Kollam",pastor:{name:"Rev. Samuel",contact:"9876543216"}},{name:"New Life Assembly - Kollam",pastor:{name:"Rev. Joseph",contact:"9876543217"}},{name:"Calvary Church - Kollam",pastor:{name:"Rev. Daniel",contact:"9876543218"}},{name:"Victory Gospel Church - Kollam",pastor:{name:"Rev. Matthew",contact:"9876543219"}}],presbyter:{name:"Elder Abraham",contact:"9876543220"}},{id:3,name:"Alappuzha",churches:[{name:"Bethel Gospel Assembly Church - Alappuzha",pastor:{name:"Rev. Stephen",contact:"9876543221"}},{name:"Gospel Light Church - Alappuzha",pastor:{name:"Rev. Philip",contact:"9876543222"}},{name:"Pentecostal Assembly - Alappuzha",pastor:{name:"Rev. Andrew",contact:"9876543223"}},{name:"Emmanuel Gospel Church - Alappuzha",pastor:{name:"Rev. Timothy",contact:"9876543224"}},{name:"Believers Church - Alappuzha",pastor:{name:"Rev. Mark",contact:"9876543225"}}],presbyter:{name:"Elder Isaac",contact:"9876543226"}},{id:4,name:"Kottayam",churches:[{name:"Bethel Gospel Assembly Church - Kottayam",pastor:{name:"Rev. Luke",contact:"9876543227"}},{name:"Word of Life Church - Kottayam",pastor:{name:"Rev. Barnabas",contact:"9876543228"}},{name:"Gospel Faith Assembly - Kottayam",pastor:{name:"Rev. Silas",contact:"9876543229"}},{name:"Holy Spirit Church - Kottayam",pastor:{name:"Rev. Titus",contact:"9876543230"}},{name:"Trinity Gospel Church - Kottayam",pastor:{name:"Rev. Benjamin",contact:"9876543231"}},{name:"Covenant Church - Kottayam",pastor:{name:"Rev. Joshua",contact:"9876543232"}}],presbyter:{name:"Elder Jacob",contact:"9876543233"}}]}generateParticipants(e){const t=[],n=["John","Mary","David","Sarah","Michael","Anna","James","Ruth","Peter","Rachel","Paul","Rebecca","Daniel","Esther","Joseph","Hannah","Samuel","Deborah","Timothy","Lydia"],r=["Thomas","George","John","Philip","Samuel","David","Joseph","Abraham","Jacob","Isaac"];let s=1;return e.forEach(e=>{const a=e.churches.map(e=>e.name),i=15+Math.floor(6*Math.random());for(let o=0;o<i;o++){const i=n[Math.floor(Math.random()*n.length)],l=r[Math.floor(Math.random()*r.length)],c=6+Math.floor(20*Math.random()),u=this.getAgeCategory(c),d=Math.random()>.5?"Male":"Female",h=1+Math.floor(3*Math.random()),m=[],p="Male"===d?[1,3,4,5]:[2,3,4,5];for(let e=0;e<h;e++){const e=p[Math.floor(Math.random()*p.length)];m.includes(e)||m.push(e)}t.push({id:s++,name:"".concat(i," ").concat(l),age:c,ageCategory:u,gender:d,email:"".concat(i.toLowerCase(),".").concat(l.toLowerCase(),"@example.com"),phone:"98765".concat(String(43210+o).padStart(5,"0")),churchName:a[Math.floor(Math.random()*a.length)],section:e.name,eventIds:m,chestNumber:null,registrationDate:new Date(2026,0,5+Math.floor(5*Math.random())).toISOString()})}}),this.assignChestNumbers(t),t}getAgeCategory(e){return e>=6&&e<=10?"Junior":e>=11&&e<=15?"Intermediate":e>=16&&e<=20?"Senior":e>=21&&e<=25?"Super Senior":null}assignChestNumbers(e){const t={Junior:"J",Intermediate:"I",Senior:"S","Super Senior":"SS"},n={Junior:1,Intermediate:1,Senior:1,"Super Senior":1};e.forEach(e=>{const r=t[e.ageCategory],s=n[e.ageCategory];e.chestNumber="".concat(r,"-").concat(String(s).padStart(3,"0")),n[e.ageCategory]++})}generateGroupTeams(e,t){const n=[];let r=1;return e.forEach(e=>{t.forEach(t=>{const s="".concat(e.name," ").concat(t.name," Team"),a=t.maxParticipants||5,i=Math.max(3,Math.floor(Math.random()*a)),o=[];for(let e=0;e<i;e++)o.push("Participant ".concat(e+1));n.push({id:r++,groupEventId:t.id,sectionId:e.id,teamName:s,participants:o,scores:[]})})}),n}generateScores(e,t){const n=[],r=["judge1","judge2","judge3"];return e.forEach(e=>{e.eventIds.forEach(t=>{r.forEach(s=>{const a=7+Math.floor(4*Math.random()),i=7+Math.floor(4*Math.random()),o=7+Math.floor(4*Math.random()),l=7+Math.floor(4*Math.random()),c=7+Math.floor(4*Math.random()),u=a+i+o+l+c;n.push({id:"".concat(e.id,"-").concat(t,"-").concat(s),participantId:e.id,eventId:t,judgeName:s,criteria1:a,criteria2:i,criteria3:o,criteria4:l,criteria5:c,totalScore:u,comments:"",submittedAt:new Date(2026,0,11+r.indexOf(s)).toISOString()})})})}),n}generatePointsConfig(){return{individual:{first:5,second:3,third:1},group:{first:10,second:5,third:3}}}async migrateData(e){console.log("\ud83d\udcdd Migrating events...");for(const t of e.events)await Av.addEvent(t);console.log("\ud83d\udcdd Migrating group events...");for(const t of e.groupEvents)await Av.addEvent(t);console.log("\ud83d\udcdd Migrating sections...");for(const t of e.sections)await Av.addSection(t);console.log("\ud83d\udcdd Migrating participants...");for(const t of e.participants)await Av.addParticipant(t);console.log("\ud83d\udcdd Migrating group teams...");for(const t of e.groupTeams)await Av.addGroupTeam(t);console.log("\ud83d\udcdd Migrating scores/results...");for(const t of e.results)await Av.addScore(t);console.log("\ud83d\udcdd Setting up admin credentials..."),console.log("\ud83d\udcdd Migrating points configuration..."),await Av.savePointsConfig(e.pointsConfig),console.log("\u2728 All data migrated successfully!")}async clearAllData(){console.log("\ud83d\uddd1\ufe0f  Clearing all Firebase data...");try{return console.warn("\u26a0\ufe0f  Manual clearing required. Please delete collections from Firebase Console:"),console.warn("   - participants"),console.warn("   - events"),console.warn("   - groupEvents"),console.warn("   - groupTeams"),console.warn("   - sections"),console.warn("   - results"),console.warn("   - config"),console.warn("Note: Judge and section credentials are managed through the Master Data page"),{success:!0,message:"Manual clearing required - see console warnings"}}catch(e){return console.error("Error clearing data:",e),{success:!1,error:e.message}}}async verifyMigration(){try{console.log("\ud83d\udd0d Verifying migration...");const[e,t,n,r,s]=await Promise.all([Av.getEvents(),Av.getParticipants(),Av.getSections(),Av.getScores(),Av.getGroupTeams()]),a={events:e.length,participants:t.length,sections:n.length,results:r.length,groupTeams:s.length};return console.log("\u2705 Firebase data counts:",a),{success:!0,counts:a}}catch(e){return console.error("\u274c Verification failed:",e),{success:!1,error:e.message}}}},py=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(null),{user:o,logout:l}=Rv(),c=Ee();r.useEffect(()=>{o&&"admin"===o.role||c("/admin/login")},[o,c]);return(0,Pv.jsxs)("div",{className:"migration-utility",children:[(0,Pv.jsxs)("div",{className:"dashboard-header",children:[(0,Pv.jsxs)("div",{children:[(0,Pv.jsx)("h1",{children:"\ud83d\udd04 Mock Data Migration"}),(0,Pv.jsxs)("p",{children:["Admin: ",null===o||void 0===o?void 0:o.username]})]}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{c("/admin/dashboard")},className:"btn-secondary",children:"\u2190 Back to Dashboard"}),(0,Pv.jsx)("button",{onClick:()=>{l(),(0,r.startTransition)(()=>{c("/admin/login")})},className:"btn-logout",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"migration-content",children:[(0,Pv.jsxs)("div",{className:"info-section",children:[(0,Pv.jsx)("h2",{children:"\u2139\ufe0f About This Tool"}),(0,Pv.jsx)("p",{children:"This utility generates and migrates mock data to Firebase for testing and development purposes."}),(0,Pv.jsx)("p",{children:(0,Pv.jsx)("strong",{children:"What will be created:"})}),(0,Pv.jsxs)("ul",{children:[(0,Pv.jsx)("li",{children:"5 Individual Events (Solo Music, Story Writing, etc.)"}),(0,Pv.jsx)("li",{children:"2 Group Events (Group Song, Bible Quiz)"}),(0,Pv.jsx)("li",{children:"4 Sections with churches and leadership"}),(0,Pv.jsx)("li",{children:"60-80 Participants with chest numbers"}),(0,Pv.jsx)("li",{children:"8 Group Teams (2 per section)"}),(0,Pv.jsx)("li",{children:"180-240 Score entries from 3 judges"}),(0,Pv.jsx)("li",{children:"3 Judge accounts"}),(0,Pv.jsx)("li",{children:"Points configuration"})]})]}),(0,Pv.jsxs)("div",{className:"action-section",children:[(0,Pv.jsx)("h2",{children:"\ud83d\ude80 Migration Actions"}),(0,Pv.jsxs)("div",{className:"action-buttons",children:[(0,Pv.jsx)("button",{onClick:async()=>{if(window.confirm("Start Mock Data Migration?\n\nThis will populate Firebase with sample data. Continue?")){s(!0),t(null),i(null);try{console.log("Starting migration...");const e=await my.migrateAll();if(t(e),e.success){const e=await my.verifyMigration();i(e)}}catch(e){t({success:!1,message:"Migration failed: "+e.message})}finally{s(!1)}}},disabled:n,className:"btn-primary btn-large",children:n?"\u23f3 Migrating...":"\ud83d\udce4 Start Migration"}),(0,Pv.jsx)("button",{onClick:async()=>{s(!0),i(null);try{const e=await my.verifyMigration();i(e)}catch(e){i({success:!1,error:e.message})}finally{s(!1)}},disabled:n,className:"btn-secondary btn-large",children:n?"\u23f3 Verifying...":"\ud83d\udd0d Verify Data"})]}),e&&(0,Pv.jsxs)("div",{className:"status-message ".concat(e.success?"success":"error"),children:[(0,Pv.jsx)("h3",{children:e.success?"\u2705 Success":"\u274c Failed"}),(0,Pv.jsx)("p",{children:e.message})]}),a&&(0,Pv.jsxs)("div",{className:"verification-result ".concat(a.success?"success":"error"),children:[(0,Pv.jsx)("h3",{children:"\ud83d\udd0d Verification Results"}),a.success?(0,Pv.jsxs)("div",{className:"counts-grid",children:[(0,Pv.jsxs)("div",{className:"count-item",children:[(0,Pv.jsx)("span",{className:"count-label",children:"Events:"}),(0,Pv.jsx)("span",{className:"count-value",children:a.counts.events})]}),(0,Pv.jsxs)("div",{className:"count-item",children:[(0,Pv.jsx)("span",{className:"count-label",children:"Participants:"}),(0,Pv.jsx)("span",{className:"count-value",children:a.counts.participants})]}),(0,Pv.jsxs)("div",{className:"count-item",children:[(0,Pv.jsx)("span",{className:"count-label",children:"Sections:"}),(0,Pv.jsx)("span",{className:"count-value",children:a.counts.sections})]}),(0,Pv.jsxs)("div",{className:"count-item",children:[(0,Pv.jsx)("span",{className:"count-label",children:"Judges:"}),(0,Pv.jsx)("span",{className:"count-value",children:a.counts.judges})]}),(0,Pv.jsxs)("div",{className:"count-item",children:[(0,Pv.jsx)("span",{className:"count-label",children:"Results/Scores:"}),(0,Pv.jsx)("span",{className:"count-value",children:a.counts.results})]}),(0,Pv.jsxs)("div",{className:"count-item",children:[(0,Pv.jsx)("span",{className:"count-label",children:"Group Teams:"}),(0,Pv.jsx)("span",{className:"count-value",children:a.counts.groupTeams})]})]}):(0,Pv.jsx)("p",{className:"error-text",children:a.error})]})]}),(0,Pv.jsxs)("div",{className:"warning-section",children:[(0,Pv.jsx)("h3",{children:"\u26a0\ufe0f Important Notes"}),(0,Pv.jsxs)("ul",{children:[(0,Pv.jsx)("li",{children:"This will add new data to Firebase - it does NOT clear existing data first"}),(0,Pv.jsx)("li",{children:"Running this multiple times will create duplicate entries"}),(0,Pv.jsx)("li",{children:"To clear data, manually delete collections from Firebase Console"}),(0,Pv.jsx)("li",{children:"Recommended: Use this on a fresh/empty Firebase project"})]})]}),(0,Pv.jsxs)("div",{className:"instructions-section",children:[(0,Pv.jsx)("h3",{children:"\ud83d\udccb How to Use"}),(0,Pv.jsxs)("ol",{children:[(0,Pv.jsx)("li",{children:"Ensure your Firebase project is properly configured"}),(0,Pv.jsx)("li",{children:'Click "Start Migration" to generate and upload mock data'}),(0,Pv.jsx)("li",{children:"Wait for the migration to complete (may take 1-2 minutes)"}),(0,Pv.jsx)("li",{children:'Click "Verify Data" to check what was migrated'}),(0,Pv.jsx)("li",{children:"Navigate to other pages to see the data in action"})]})]})]})]})},fy=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)({name:"",description:"",startDate:"",endDate:"",registrationOpen:!0,venue:"",maxParticipants:0,judges:[]}),[c,u]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)({participants:0,teams:0}),{user:x,logout:w}=Rv(),j=Ee();(0,r.useEffect)(()=>{x&&"admin"===x.role?N():j("/admin/login")},[x,j]);const N=async()=>{const[e,n,r,s]=await Promise.all([Av.getTalentTestEvents(),Av.getParticipants(),Av.getGroupTeams(),Av.getJudgeCredentials()]);t(e),u(n),m(r),f(s);const a=n.filter(e=>!e.talentTestEventId).length,i=r.filter(e=>!e.talentTestEventId).length;b({participants:a,teams:i})},S=e=>{const{name:t,value:n,type:r,checked:s}=e.target;l(e=>d(d({},e),{},{[t]:"checkbox"===r?s:"maxParticipants"===t?parseInt(n)||0:n}))},E=e=>c.filter(t=>t.talentTestEventId===e),k=e=>h.filter(t=>t.talentTestEventId===e),C=e=>{if(!e)return"N/A";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},T=e=>{if(!e.startDate||!e.endDate)return!1;const t=new Date,n=new Date(e.startDate),r=new Date(e.endDate);return t>=n&&t<=r},I=e=>{if(!e.startDate)return!1;return new Date<new Date(e.startDate)},_=e=>{if(!e.endDate)return!1;return new Date>new Date(e.endDate)};return(0,Pv.jsxs)("div",{className:"talent-test-events-container",children:[(0,Pv.jsxs)("div",{className:"header",children:[(0,Pv.jsx)("h1",{children:"\ud83c\udfad Talent Test Events Management"}),(0,Pv.jsxs)("div",{className:"header-actions",children:[(0,Pv.jsx)("button",{onClick:()=>{j("/admin/dashboard")},className:"btn-back",children:"\u2190 Back to Dashboard"}),(0,Pv.jsx)("button",{onClick:()=>{w(),(0,r.startTransition)(()=>{j("/admin/login")})},className:"btn-logout",children:"Logout"})]})]}),(0,Pv.jsxs)("div",{className:"actions-bar",children:[(0,Pv.jsx)("button",{onClick:()=>{s(!0),i(null),l({name:"",description:"",startDate:"",endDate:"",registrationOpen:!0,venue:"",maxParticipants:0,judges:[]})},className:"btn-add",children:"+ Create New Event"}),(y.participants>0||y.teams>0)&&(0,Pv.jsxs)("div",{className:"unmapped-warning",children:["\u26a0\ufe0f ",y.participants," unmapped participant(s) and ",y.teams," unmapped team(s)"]})]}),n&&(0,Pv.jsx)("div",{className:"modal-overlay",children:(0,Pv.jsxs)("div",{className:"modal-content",children:[(0,Pv.jsx)("h2",{children:a?"Edit Talent Test Event":"Create New Talent Test Event"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o.name&&o.startDate)try{a?await Av.updateTalentTestEvent(a.id,o):await Av.addTalentTestEvent(o),N(),s(!1),i(null)}catch(t){alert("Error saving event: "+t.message)}else alert("Please fill in event name and start date")},children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Event Name *"}),(0,Pv.jsx)("input",{type:"text",name:"name",value:o.name,onChange:S,placeholder:"e.g., Annual Talent Test 2026",required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Description"}),(0,Pv.jsx)("textarea",{name:"description",value:o.description,onChange:S,placeholder:"Event description",rows:"3"})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Start Date *"}),(0,Pv.jsx)("input",{type:"date",name:"startDate",value:o.startDate,onChange:S,required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"End Date"}),(0,Pv.jsx)("input",{type:"date",name:"endDate",value:o.endDate,onChange:S})]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Venue"}),(0,Pv.jsx)("input",{type:"text",name:"venue",value:o.venue,onChange:S,placeholder:"Event venue"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Max Participants (0 for unlimited)"}),(0,Pv.jsx)("input",{type:"number",name:"maxParticipants",value:o.maxParticipants,onChange:S,min:"0"})]}),(0,Pv.jsx)("div",{className:"form-group",children:(0,Pv.jsxs)("label",{className:"checkbox-label",children:[(0,Pv.jsx)("input",{type:"checkbox",name:"registrationOpen",checked:o.registrationOpen,onChange:S}),"Registration Open"]})}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Assign Judges"}),(0,Pv.jsx)("div",{className:"judges-selection",children:0===p.length?(0,Pv.jsx)("p",{className:"no-judges-warning",children:"No judges available. Please add judges in Master Data first."}):p.map((e,t)=>(0,Pv.jsxs)("label",{className:"checkbox-label",children:[(0,Pv.jsx)("input",{type:"checkbox",checked:o.judges.includes(e.username),onChange:t=>{const n=t.target.checked?[...o.judges,e.username]:o.judges.filter(t=>t!==e.username);l(e=>d(d({},e),{},{judges:n}))}}),e.name||e.username," (",e.username,")"]},t))})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsx)("button",{type:"submit",className:"btn-submit",children:a?"Update Event":"Create Event"}),(0,Pv.jsx)("button",{type:"button",onClick:()=>{s(!1),i(null)},className:"btn-cancel",children:"Cancel"})]})]})]})}),(0,Pv.jsx)("div",{className:"events-list",children:0===e.length?(0,Pv.jsx)("div",{className:"no-events",children:(0,Pv.jsx)("p",{children:'No talent test events created yet. Click "Create New Event" to get started.'})}):e.map(t=>{return(0,Pv.jsxs)("div",{className:"event-card ".concat(T(t)?"active":""," ").concat(_(t)?"completed":""),children:[(0,Pv.jsxs)("div",{className:"event-header",children:[(0,Pv.jsxs)("div",{className:"event-title-section",children:[(0,Pv.jsx)("h3",{children:t.name}),(0,Pv.jsxs)("div",{className:"event-badges",children:[T(t)&&(0,Pv.jsx)("span",{className:"badge badge-active",children:"Active"}),I(t)&&(0,Pv.jsx)("span",{className:"badge badge-upcoming",children:"Upcoming"}),_(t)&&(0,Pv.jsx)("span",{className:"badge badge-completed",children:"Completed"}),(0,Pv.jsxs)("span",{className:"badge ".concat(t.registrationOpen?"badge-open":"badge-closed"),children:["Registration ",t.registrationOpen?"Open":"Closed"]})]})]}),(0,Pv.jsxs)("div",{className:"event-actions",children:[(0,Pv.jsx)("button",{onClick:()=>(e=>{s(!0),i(e),l({name:e.name,description:e.description,startDate:e.startDate||"",endDate:e.endDate||"",registrationOpen:!1!==e.registrationOpen,venue:e.venue||"",maxParticipants:e.maxParticipants||0,judges:e.judges||[]})})(t),className:"btn-icon",title:"Edit",children:"\u270f\ufe0f"}),(0,Pv.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this talent test event? All participant mappings will be removed."))try{await Av.deleteTalentTestEvent(e);const t=await Av.getParticipants();for(const n of t)n.talentTestEventId===e&&await Av.updateParticipant(n.id,d(d({},n),{},{talentTestEventId:null}));N()}catch(t){alert("Error deleting event: "+t.message)}})(t.id),className:"btn-icon",title:"Delete",children:"\ud83d\uddd1\ufe0f"})]})]}),t.description&&(0,Pv.jsx)("p",{className:"event-description",children:t.description}),(0,Pv.jsxs)("div",{className:"event-details",children:[(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83d\udcc5 Start Date:"}),(0,Pv.jsx)("span",{className:"detail-value",children:C(t.startDate)})]}),t.endDate&&(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83d\udcc5 End Date:"}),(0,Pv.jsx)("span",{className:"detail-value",children:C(t.endDate)})]}),t.venue&&(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83d\udccd Venue:"}),(0,Pv.jsx)("span",{className:"detail-value",children:t.venue})]}),(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83d\udc65 Participants:"}),(0,Pv.jsxs)("span",{className:"detail-value",children:[(n=t.id,c.filter(e=>e.talentTestEventId===n).length),t.maxParticipants>0&&" / ".concat(t.maxParticipants)]})]}),(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83c\udfc6 Group Teams:"}),(0,Pv.jsx)("span",{className:"detail-value",children:k(t.id).length})]}),t.judges&&t.judges.length>0&&(0,Pv.jsxs)("div",{className:"detail-item",children:[(0,Pv.jsx)("span",{className:"detail-label",children:"\ud83d\udc68\u200d\u2696\ufe0f Assigned Judges:"}),(0,Pv.jsx)("span",{className:"detail-value",children:t.judges.join(", ")})]})]}),(0,Pv.jsxs)("div",{className:"event-footer",children:[(y.participants>0||y.teams>0)&&(0,Pv.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Map all unmapped participants and group teams to this event?"))try{let t=0;const n=c.filter(e=>!e.talentTestEventId);for(const s of n)await Av.updateParticipant(s.id,d(d({},s),{},{talentTestEventId:e})),t++;const r=h.filter(e=>!e.talentTestEventId);for(const s of r)await Av.updateGroupTeam(s.id,d(d({},s),{},{talentTestEventId:e})),t++;alert("Successfully mapped ".concat(t," items to this event.")),N()}catch(t){alert("Error mapping items: "+t.message)}})(t.id),className:"btn-map",title:"Map all unmapped participants and teams to this event",children:["\ud83d\udccc Map Unmapped (",y.participants+y.teams,")"]}),(0,Pv.jsx)("button",{onClick:()=>(async(t,n)=>{const r=n?"close":"open";if(window.confirm("Are you sure you want to ".concat(r," registration for this event?")))try{const r=e.find(e=>e.id===t);await Av.updateTalentTestEvent(t,d(d({},r),{},{registrationOpen:!n})),N()}catch(s){alert("Error updating registration status: "+s.message)}})(t.id,t.registrationOpen),className:"btn-toggle ".concat(t.registrationOpen?"btn-close":"btn-open"),children:t.registrationOpen?"\ud83d\udd12 Close Registration":"\ud83d\udd13 Open Registration"}),(0,Pv.jsx)("button",{onClick:()=>(e=>{v(g===e?"":e)})(t.id),className:"btn-view-participants",children:g===t.id?"\u25bc Hide Details":"\u25b6 View Details"})]}),g===t.id&&(0,Pv.jsxs)("div",{className:"participants-list",children:[(0,Pv.jsx)("h4",{children:"Participants & Teams"}),(0,Pv.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Pv.jsxs)("h5",{children:["Registered Participants (",E(t.id).length,")"]}),0===E(t.id).length?(0,Pv.jsx)("p",{className:"no-participants",children:"No participants registered yet."}):(0,Pv.jsxs)("table",{className:"participants-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Chest No."}),(0,Pv.jsx)("th",{children:"Name"}),(0,Pv.jsx)("th",{children:"Age"}),(0,Pv.jsx)("th",{children:"Category"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Church"})]})}),(0,Pv.jsx)("tbody",{children:E(t.id).map(e=>(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.chestNumber||"-"}),(0,Pv.jsx)("td",{children:e.name}),(0,Pv.jsx)("td",{children:e.age}),(0,Pv.jsx)("td",{children:e.ageCategory}),(0,Pv.jsx)("td",{children:e.section}),(0,Pv.jsx)("td",{children:e.churchName})]},e.id))})]})]}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsxs)("h5",{children:["Registered Group Teams (",k(t.id).length,")"]}),0===k(t.id).length?(0,Pv.jsx)("p",{className:"no-participants",children:"No group teams registered yet."}):(0,Pv.jsxs)("table",{className:"participants-table",children:[(0,Pv.jsx)("thead",{children:(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("th",{children:"Team Name"}),(0,Pv.jsx)("th",{children:"Section"}),(0,Pv.jsx)("th",{children:"Church"}),(0,Pv.jsx)("th",{children:"Event"}),(0,Pv.jsx)("th",{children:"Members"})]})}),(0,Pv.jsx)("tbody",{children:k(t.id).map(e=>{var t;return(0,Pv.jsxs)("tr",{children:[(0,Pv.jsx)("td",{children:e.teamName}),(0,Pv.jsx)("td",{children:e.section}),(0,Pv.jsx)("td",{children:e.churchName}),(0,Pv.jsx)("td",{children:e.groupEventName}),(0,Pv.jsx)("td",{children:(null===(t=e.participants)||void 0===t?void 0:t.length)||0})]},e.id)})})]})]})]})]},t.id);var n})})]})},gy=()=>{const[e,t]=(0,r.useState)("news"),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)({}),h={title:"",date:"",content:"",icon:"\ud83d\udcdd",badge:"",isFeatured:!1},m={title:"",startDate:"",endDate:"",description:"",time:"",location:"",googleMapsUrl:"",icon:"\ud83d\udcd6",type:"talent-event"};(0,r.useEffect)(()=>{p()},[]);const p=async()=>{const[e,t]=await Promise.all([Av.getNews(),Av.getUpcomingEvents()]);s(e),i(t)},f=e=>{const{name:t,value:n,type:r,checked:s}=e.target;u(d(d({},c),{},{[t]:"checkbox"===r?s:n}))},g=e=>{l(e),u(e)},v=async(e,t)=>{if(window.confirm("Are you sure you want to delete this item?"))try{"news"===t?await Av.deleteNews(e):await Av.deleteUpcomingEvent(e),p()}catch(n){console.error("Error deleting item:",n),alert("Failed to delete item")}},y=()=>{l(null),u({})},b=()=>{l(null),u("news"===e?h:m)};return(0,Pv.jsxs)("div",{className:"news-events-manager",children:[(0,Pv.jsxs)("div",{className:"manager-header",children:[(0,Pv.jsx)("h2",{children:"\ud83d\udcf0 News & Events Manager"}),(0,Pv.jsx)("p",{children:"Manage news articles and upcoming events displayed on the home page"})]}),(0,Pv.jsxs)("div",{className:"tabs",children:[(0,Pv.jsxs)("button",{className:"tab ".concat("news"===e?"active":""),onClick:()=>t("news"),children:["\ud83d\udcf0 News (",n.length,")"]}),(0,Pv.jsxs)("button",{className:"tab ".concat("events"===e?"active":""),onClick:()=>t("events"),children:["\ud83d\udcc5 Events (",a.length,")"]})]}),"news"===e&&(0,Pv.jsxs)("div",{className:"tab-content",children:[(0,Pv.jsx)("div",{className:"action-bar",children:(0,Pv.jsx)("button",{className:"btn-primary",onClick:b,children:"\u2795 Add News Article"})}),Object.keys(c).length>0&&(0,Pv.jsxs)("div",{className:"form-card",children:[(0,Pv.jsx)("h3",{children:o?"Edit News Article":"New News Article"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{o?await Av.updateNews(o.id,c):await Av.addNews(c),u({}),l(null),p()}catch(t){console.error("Error saving news:",t),alert("Failed to save news")}},children:[(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Title *"}),(0,Pv.jsx)("input",{type:"text",name:"title",value:c.title||"",onChange:f,required:!0,placeholder:"Enter news title"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Date *"}),(0,Pv.jsx)("input",{type:"date",name:"date",value:c.date||"",onChange:f,required:!0})]})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Icon"}),(0,Pv.jsx)("input",{type:"text",name:"icon",value:c.icon||"",onChange:f,placeholder:"\ud83d\udcdd",maxLength:"2"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Badge (Optional)"}),(0,Pv.jsx)("input",{type:"text",name:"badge",value:c.badge||"",onChange:f,placeholder:"e.g., Featured, New"})]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Content *"}),(0,Pv.jsx)("textarea",{name:"content",value:c.content||"",onChange:f,required:!0,rows:"8",placeholder:"Enter news content. Formatting (spaces, line breaks, bullet points) will be preserved as you type.",className:"preserve-format"}),(0,Pv.jsx)("small",{className:"form-hint",children:"\ud83d\udca1 Paste text directly - all formatting, spaces, and line breaks will be preserved automatically"})]}),(0,Pv.jsx)("div",{className:"form-group checkbox-group",children:(0,Pv.jsxs)("label",{children:[(0,Pv.jsx)("input",{type:"checkbox",name:"isFeatured",checked:c.isFeatured||!1,onChange:f}),"Featured (Show with \ud83d\udd25 badge)"]})}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsxs)("button",{type:"submit",className:"btn-primary",children:[o?"Update":"Create"," News"]}),(0,Pv.jsx)("button",{type:"button",className:"btn-secondary",onClick:y,children:"Cancel"})]})]})]}),(0,Pv.jsxs)("div",{className:"items-list",children:[n.map(e=>(0,Pv.jsxs)("div",{className:"item-card",children:[(0,Pv.jsxs)("div",{className:"item-header",children:[(0,Pv.jsxs)("div",{className:"item-title",children:[(0,Pv.jsx)("span",{className:"item-icon",children:e.icon}),(0,Pv.jsx)("h4",{children:e.title}),e.isFeatured&&(0,Pv.jsx)("span",{className:"badge featured",children:"\ud83d\udd25 Featured"}),e.badge&&(0,Pv.jsx)("span",{className:"badge",children:e.badge})]}),(0,Pv.jsxs)("div",{className:"item-actions",children:[(0,Pv.jsx)("button",{className:"btn-edit",onClick:()=>g(e),children:"\u270f\ufe0f Edit"}),(0,Pv.jsx)("button",{className:"btn-delete",onClick:()=>v(e.id,"news"),children:"\ud83d\uddd1\ufe0f Delete"})]})]}),(0,Pv.jsx)("div",{className:"item-meta",children:(0,Pv.jsxs)("span",{children:["\ud83d\udcc5 ",new Date(e.date).toLocaleDateString()]})}),(0,Pv.jsx)("p",{className:"item-content",children:e.content})]},e.id)),0===n.length&&(0,Pv.jsx)("div",{className:"empty-state",children:(0,Pv.jsx)("p",{children:'No news articles yet. Click "Add News Article" to create one.'})})]})]}),"events"===e&&(0,Pv.jsxs)("div",{className:"tab-content",children:[(0,Pv.jsx)("div",{className:"action-bar",children:(0,Pv.jsx)("button",{className:"btn-primary",onClick:b,children:"\u2795 Add Event"})}),Object.keys(c).length>0&&(0,Pv.jsxs)("div",{className:"form-card",children:[(0,Pv.jsx)("h3",{children:o?"Edit Event":"New Event"}),(0,Pv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{o?await Av.updateUpcomingEvent(o.id,c):await Av.addUpcomingEvent(c),u({}),l(null),p()}catch(t){console.error("Error saving event:",t),alert("Failed to save event")}},children:[(0,Pv.jsx)("div",{className:"form-row",children:(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Event Title *"}),(0,Pv.jsx)("input",{type:"text",name:"title",value:c.title||"",onChange:f,required:!0,placeholder:"e.g., Annual Talent Test"})]})}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Start Date *"}),(0,Pv.jsx)("input",{type:"date",name:"startDate",value:c.startDate||"",onChange:f,required:!0})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"End Date"}),(0,Pv.jsx)("input",{type:"date",name:"endDate",value:c.endDate||"",onChange:f,placeholder:"Leave empty for single day event"})]})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Location"}),(0,Pv.jsx)("input",{type:"text",name:"location",value:c.location||"",onChange:f,placeholder:"e.g., Church Main Hall, 123 Main St, City"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Icon"}),(0,Pv.jsx)("input",{type:"text",name:"icon",value:c.icon||"",onChange:f,placeholder:"\ud83d\udcd6",maxLength:"2"})]})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Google Maps URL"}),(0,Pv.jsx)("input",{type:"url",name:"googleMapsUrl",value:c.googleMapsUrl||"",onChange:f,placeholder:"e.g., https://maps.google.com/?q=..."}),(0,Pv.jsx)("small",{className:"form-hint",children:"\ud83d\udca1 Paste the Google Maps share link for this location"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Description *"}),(0,Pv.jsx)("textarea",{name:"description",value:c.description||"",onChange:f,required:!0,rows:"6",placeholder:"Brief description of the event. Formatting will be preserved.",className:"preserve-format"}),(0,Pv.jsx)("small",{className:"form-hint",children:"\ud83d\udca1 Paste text directly - all formatting, spaces, and line breaks will be preserved automatically"})]}),(0,Pv.jsxs)("div",{className:"form-row",children:[(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Time"}),(0,Pv.jsx)("input",{type:"text",name:"time",value:c.time||"",onChange:f,placeholder:"e.g., 10:00 AM - 5:00 PM"})]}),(0,Pv.jsxs)("div",{className:"form-group",children:[(0,Pv.jsx)("label",{children:"Type (CSS class)"}),(0,Pv.jsxs)("select",{name:"type",value:c.type||"talent-event",onChange:f,children:[(0,Pv.jsx)("option",{value:"talent-event",children:"Talent Event"}),(0,Pv.jsx)("option",{value:"retreat-event",children:"Retreat"}),(0,Pv.jsx)("option",{value:"outreach-event",children:"Outreach"})]})]})]}),(0,Pv.jsxs)("div",{className:"form-actions",children:[(0,Pv.jsxs)("button",{type:"submit",className:"btn-primary",children:[o?"Update":"Create"," Event"]}),(0,Pv.jsx)("button",{type:"button",className:"btn-secondary",onClick:y,children:"Cancel"})]})]})]}),(0,Pv.jsxs)("div",{className:"items-list",children:[a.map(e=>(0,Pv.jsxs)("div",{className:"item-card event-card-preview",children:[(0,Pv.jsxs)("div",{className:"item-header",children:[(0,Pv.jsxs)("div",{className:"item-title",children:[(0,Pv.jsxs)("div",{className:"event-date-badge",children:[(0,Pv.jsx)("span",{className:"day",children:e.day}),(0,Pv.jsx)("span",{className:"month",children:e.month})]}),(0,Pv.jsxs)("div",{children:[(0,Pv.jsxs)("h4",{children:[(0,Pv.jsx)("span",{className:"item-icon",children:e.icon}),e.title]}),(0,Pv.jsx)("span",{className:"event-type-badge",children:e.type}),(0,Pv.jsxs)("p",{className:"event-date-range",children:["\ud83d\udcc5 ",(()=>{if(!e.startDate)return"No date set";const t=new Date(e.startDate),n=e.endDate?new Date(e.endDate):null;if(!n||t.getTime()===n.getTime())return t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});const r=t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),s=n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()?"".concat(t.toLocaleDateString("en-US",{month:"long"})," ").concat(t.getDate()," - ").concat(n.getDate(),", ").concat(t.getFullYear()):"".concat(r," - ").concat(s)})()]})]})]}),(0,Pv.jsxs)("div",{className:"item-actions",children:[(0,Pv.jsx)("button",{className:"btn-edit",onClick:()=>g(e),children:"\u270f\ufe0f Edit"}),(0,Pv.jsx)("button",{className:"btn-delete",onClick:()=>v(e.id,"event"),children:"\ud83d\uddd1\ufe0f Delete"})]})]}),(0,Pv.jsx)("p",{className:"item-content",children:e.description}),e.time&&(0,Pv.jsx)("div",{className:"item-meta",children:(0,Pv.jsxs)("span",{children:["\u23f0 ",e.time]})})]},e.id)),0===a.length&&(0,Pv.jsx)("div",{className:"empty-state",children:(0,Pv.jsx)("p",{children:'No upcoming events yet. Click "Add Event" to create one.'})})]})]})]})};function vy(){const{loading:e,showLoading:t,hideLoading:n}=(()=>{const e=(0,r.useContext)(Ov);if(!e)throw new Error("useLoading must be used within LoadingProvider");return e})();return(0,r.useEffect)(()=>{((e,t)=>{bv={showLoading:e,hideLoading:t}})(t,n)},[t,n]),(0,Pv.jsxs)(Pv.Fragment,{children:[e&&(0,Pv.jsx)(zv,{}),(0,Pv.jsx)(Ct,{children:(0,Pv.jsxs)("div",{className:"App",children:[(0,Pv.jsx)(Vv,{}),(0,Pv.jsx)("main",{className:"main-content",children:(0,Pv.jsxs)(Je,{children:[(0,Pv.jsx)(We,{path:"/",element:(0,Pv.jsx)(Bv,{})}),(0,Pv.jsx)(We,{path:"/about",element:(0,Pv.jsx)(qv,{})}),(0,Pv.jsx)(We,{path:"/events",element:(0,Pv.jsx)(Gv,{})}),(0,Pv.jsx)(We,{path:"/gallery",element:(0,Pv.jsx)(Hv,{})}),(0,Pv.jsx)(We,{path:"/presentation",element:(0,Pv.jsx)(hy,{})}),(0,Pv.jsx)(We,{path:"/admin/login",element:(0,Pv.jsx)(Wv,{})}),(0,Pv.jsx)(We,{path:"/judge/login",element:(0,Pv.jsx)(Kv,{})}),(0,Pv.jsx)(We,{path:"/section/login",element:(0,Pv.jsx)(Jv,{})}),(0,Pv.jsx)(We,{path:"/admin",element:(0,Pv.jsx)(He,{to:"/admin/login",replace:!0})}),(0,Pv.jsx)(We,{path:"/admin/dashboard",element:(0,Pv.jsx)(Qv,{})}),(0,Pv.jsx)(We,{path:"/admin/events",element:(0,Pv.jsx)(Qv,{})}),(0,Pv.jsx)(We,{path:"/admin/event/:eventId",element:(0,Pv.jsx)(Yv,{})}),(0,Pv.jsx)(We,{path:"/admin/talent-test-events",element:(0,Pv.jsx)(fy,{})}),(0,Pv.jsx)(We,{path:"/admin/master-data",element:(0,Pv.jsx)(sy,{})}),(0,Pv.jsx)(We,{path:"/admin/news-events",element:(0,Pv.jsx)(gy,{})}),(0,Pv.jsx)(We,{path:"/admin/participants",element:(0,Pv.jsx)(ly,{})}),(0,Pv.jsx)(We,{path:"/admin/group-teams",element:(0,Pv.jsx)(ay,{})}),(0,Pv.jsx)(We,{path:"/admin/results",element:(0,Pv.jsx)(ny,{})}),(0,Pv.jsx)(We,{path:"/admin/group-results",element:(0,Pv.jsx)(iy,{})}),(0,Pv.jsx)(We,{path:"/admin/leaderboard",element:(0,Pv.jsx)(ry,{})}),(0,Pv.jsx)(We,{path:"/admin/individual-results",element:(0,Pv.jsx)(cy,{})}),(0,Pv.jsx)(We,{path:"/admin/printable-results",element:(0,Pv.jsx)(oy,{})}),(0,Pv.jsx)(We,{path:"/admin/old-dashboard",element:(0,Pv.jsx)(Zv,{})}),(0,Pv.jsx)(We,{path:"/admin/migration",element:(0,Pv.jsx)(dy,{})}),(0,Pv.jsx)(We,{path:"/admin/mock-migration",element:(0,Pv.jsx)(py,{})}),(0,Pv.jsx)(We,{path:"/admin/talent-test-events",element:(0,Pv.jsx)(fy,{})}),(0,Pv.jsx)(We,{path:"/judge/dashboard",element:(0,Pv.jsx)(ey,{})}),(0,Pv.jsx)(We,{path:"/section/dashboard",element:(0,Pv.jsx)(Xv,{})}),(0,Pv.jsx)(We,{path:"/section/event/:eventId",element:(0,Pv.jsx)($v,{})}),(0,Pv.jsx)(We,{path:"/section/participants",element:(0,Pv.jsx)(ly,{})}),(0,Pv.jsx)(We,{path:"/section/old-dashboard",element:(0,Pv.jsx)(ty,{})}),(0,Pv.jsx)(We,{path:"/section/dashboard",element:(0,Pv.jsx)(ty,{})})]})})]})})]})}const yy=function(){return(0,Pv.jsx)(Mv,{children:(0,Pv.jsx)(Lv,{children:(0,Pv.jsx)(vy,{})})})},by=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:a,getTTFB:i}=t;n(e),r(e),s(e),a(e),i(e)})};a.createRoot(document.getElementById("root")).render((0,Pv.jsx)(r.StrictMode,{children:(0,Pv.jsx)(yy,{})})),by()})();
//# sourceMappingURL=main.9b56825b.js.map